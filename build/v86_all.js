var h;function ba(){}function k(a){document.getElementById(a)||console.log("Element with id `"+a+"` not found");return document.getElementById(a)}
function ca(){function a(a,b,d){document.title=a.name+" - Jmulate x86";if(67108864>a.size){var e=new da(a);e.onprogress=ba.bind(this,{msg:"Loading disk image into memory"})}else e=new ea(a);e.onload=function(){switch(b){case "floppy":c.fda=e;break;case "hd":c.hda=e;break;case "cdrom":c.cdrom=e}d()};e.AsyncFileBuffer$load()}function b(a,b,c){b.memory_size=a.memory_size;b.vga_memory_size=a.vga_memory_size;a.async_hda&&(b.hda=new fa(a.async_hda,512,a.async_hda_size));a.fda?b.fda=new ga(c):a.cdrom&&(b.cdrom=
new ga(c));ha(b,function(b){if(a.state){var d=c.byteLength;if(16>d)throw new ia("Invalid length: "+d);var e=new Int32Array(c,0,4);if(-2039052682!==e[0])throw new ia("Invalid header: "+(e[0]>>>0?(e[0]>>>0).toString(16).toUpperCase():String.pad0("",1)));if(0!==e[1])throw new ia("Version mismatch: dump="+e[1]+" we=0");if(e[2]!==d)throw new ia("Length doesn't match header: real="+d+" header="+e[2]);e=e[3];if(0>e||e+12>=d||e%2)throw new ia("Invalid info block length: "+e);for(var f=e/2,g=new Uint16Array(c,
16,f),r="",d=0;d<f-8;)r+=String.fromCharCode(g[d++],g[d++],g[d++],g[d++],g[d++],g[d++],g[d++],g[d++]);for(;d<f;)r+=String.fromCharCode(g[d++]);f=JSON.parse(r);e=16+e;g=f.buffer_infos;for(d=0;d<g.length;d++)g[d].offset+=e;ka(b,f.state,{full:c,infos:g})}b.run()})}if("responseType"in new XMLHttpRequest){var c={load_devices:!0};na("/bios/seabios.bin",function(a){c.bios=a;oa&&oa()});na("/bios/bochs-vgabios-0.7a.bin",function(a){c.vga_bios=a;oa&&oa()});k("start_emulation").onclick=function(){function b(){if(0===
d.length)ha(c,function(a){a.run()});else{var e=d.pop();a(e.file,e.type,b)}}k("boot_options").style.display="none";var d=[];k("floppy_image").files.length&&d.push({file:k("floppy_image").files[0],type:"floppy"});k("cd_image").files.length&&d.push({file:k("cd_image").files[0],type:"cdrom"});k("hd_image").files.length&&d.push({file:k("hd_image").files[0],type:"hd"});b()};for(var d=[{id:"freedos",fda:"/images/freedos722.img",size:737280,name:"FreeDOS"},{id:"windows1",fda:"/images/windows101.img",size:1474560,
name:"Windows"},{id:"linux26",cdrom:"/images/linux.iso",size:5666816,name:"Linux"},{id:"damnsmall",cdrom:"/images/dsl.iso",size:52824064,name:"Damn Small Linux"}],e=location.search.substr(1).split("&"),f,g={},r=0;r<e.length;r++)f=e[r].split("="),g[f[0]]=f[1];for(var t=g.profile,e=0;e<d.length;e++){f=d[e];var x="start_"+f.id;k(x).onclick=function(a){na(a.state||a.fda||a.cdrom,b.bind(this,a,c),ba.bind(this,{msg:"Downloading image",total:a.size}));var d;(d=t===a.id?window.history.replaceState:window.history.pushState)&&
d.call(window.history,{profile:a.id},"","?profile="+a.id);document.title=a.name+" - Jmulate x86";k(x).blur();k("boot_options").style.display="none"}.bind(this,f);if(t===f.id){k(x).onclick();break}}}else alert("Your browser is not supported because it doesn't have XMLHttpRequest.responseType")}
function ha(a,b){if(a.bios&&a.vga_bios){var c=new l;a.fdb=void 0;a.screen_adapter=new pa;a.keyboard_adapter=new qa;a.mouse_adapter=new ra;a.boot_order=parseInt(k("boot_order").value,16);if(!a.memory_size){var d=1048576*parseInt(k("memory_size").value,10);16777216<=d&&2147483648>d?a.memory_size=d:(alert("Invalid memory size - ignored."),a.memory_size=33554432)}a.vga_memory_size||(d=1048576*parseInt(k("video_memory_size").value,10),65536<d&&2147483648>d?a.vga_memory_size=d:(alert("Invalid video memory size - ignored."),
a.vga_memory_size=8388608));var e=function(){if(g){var a=Date.now(),b=(c.timestamp_counter-va)/1E3|0;ja+=b;K+=a-B;B=a;t.textContent=b;x.textContent=ja/K*1E3|0;r.textContent=60>(K/1E3|0)?(K/1E3|0)+"s":3600>(K/1E3|0)?((K/1E3|0)/60|0)+"m "+String.pad0((K/1E3|0)%60,2)+"s":((K/1E3|0)/3600|0)+"h "+String.pad0(((K/1E3|0)/60|0)%60,2)+"m "+String.pad0((K/1E3|0)%60,2)+"s";va=c.timestamp_counter}setTimeout(e,1E3)},f=function(){if(g){var a=c.devices.vga.stats;a.is_graphical?(k("info_vga_mode").textContent="Graphical",
k("info_res").textContent=a.res_x+"x"+a.res_y):(k("info_vga_mode").textContent="Terminal",k("info_res").textContent="")}setTimeout(f,1E3)},d=function(a){a.ctrlKey?window.onbeforeunload=function(){window.onbeforeunload=null;return"CTRL-W cannot be sent to the emulator."}:window.onbeforeunload=null};k("boot_options").style.display="none";k("runtime_options").style.display="block";document.getElementsByClassName("phone_keyboard")[0].style.display="none";var g=!0;k("run").onclick=function(){g?(K+=Date.now()-
B,k("run").value="Run",c.stop()):(k("run").value="Pause",c.run(),B=Date.now());g=!g;k("run").blur()};k("exit").onclick=function(){location.href=location.pathname};var r=k("running_time"),t=k("speed"),x=k("avg_speed"),B=Date.now(),K=0,ja=0,va=0;setTimeout(e,1E3);setTimeout(f,0);for(var aa=["hda","hdb","fda","fdb"],la=0;la<aa.length;la++){var Da=k("get_"+aa[la]+"_image"),ma=a[aa[la]];ma&&16777216>ma.byteLength?Da.onclick=function(a){ma.get_buffer(function(b){var c=a+".img",d=new Blob([b]);b=document.createElement("a");
b.download=c;b.href=window.URL.createObjectURL(d);b.dataset.downloadurl=["application/octet-stream",b.download,b.href].join(":");document.createEvent?(c=document.createEvent("MouseEvent"),c.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),b.dispatchEvent(c)):b.click()});this.blur()}.bind(Da,aa[la]):Da.style.display="none"}k("ctrlaltdel").onclick=function(){var a=c.devices.ps2;a.kbd_send_code(29);a.kbd_send_code(56);a.kbd_send_code(83);a.kbd_send_code(157);a.kbd_send_code(184);a.kbd_send_code(211);
k("ctrlaltdel").blur()};k("fullscreen").onclick=function(){var a=document.getElementById("screen_container"),b=a.requestFullScreen||a.webkitRequestFullscreen||a.mozRequestFullScreen||a.msRequestFullScreen;b&&(b.call(a),document.getElementsByClassName("phone_keyboard")[0].focus());(b=a.requestPointerLock||a.mozRequestPointerLock||a.webkitRequestPointerLock)&&b.call(a)};k("screen_container").onclick=function(){window.getSelection().isCollapsed&&document.getElementsByClassName("phone_keyboard")[0].focus()};
k("take_screenshot").onclick=function(){a.screen_adapter.make_screenshot();k("take_screenshot").blur()};window.addEventListener("keydown",d,!1);window.addEventListener("keyup",d,!1);window.addEventListener("blur",d,!1);c.init(a);b(c)}else oa=ha.bind(this,a,b)}var oa;window.addEventListener("load",ca,!1);window.addEventListener("popstate",function(){location.reload()},!1);"complete"===document.readyState&&ca();function l(){this.memory_size=0;this.segment_is_null=[];this.segment_offsets=[];this.segment_limits=[];this.tlb_data=[];this.tlb_info=[];this.tlb_info_global=[];this.protected_mode=!1;this.gdtr_offset=this.gdtr_size=this.idtr_offset=this.idtr_size=0;this.page_fault=!1;this.page_size_extensions=this.cpl=this.cr4=this.cr3=this.cr2=this.cr0=0;this.stopped=this.running=this.in_hlt=this.address_size_32=this.stack_size_32=this.operand_size_32=this.is_32=!1;this.devices={vga:{timer:function(){},destroy:function(){}},
ps2:{timer:function(){},destroy:function(){}}};this.tsc_offset=this.last_result=this.last_add_result=this.last_op_size=this.last_op2=this.last_op1=this.flags_changed=this.flags=this.repeat_string_prefix=this.sysenter_eip=this.sysenter_esp=this.sysenter_cs=this.eip_phys=this.last_virt_eip=0;this.regv=this.reg16;this.reg_vdi=this.reg_vsi=this.reg_vcx=0;this.table=[];this.table0F=[];this.current_settings={};this.paging=!1;this.timestamp_counter=this.previous_ip=this.instruction_pointer=0;this.reg32s=
new Int32Array(8);this.reg32=new Uint32Array(this.reg32s.buffer);this.reg16s=new Int16Array(this.reg32s.buffer);this.reg16=new Uint16Array(this.reg32s.buffer);this.reg8s=new Int8Array(this.reg32s.buffer);this.reg8=new Uint8Array(this.reg32s.buffer);this.sreg=new Uint16Array(8);this.dreg=new Int32Array(8);this.stack_reg=this.reg16;this.reg_vbp=this.reg_vsp=0;this.memory=null;this.segment_prefix=-1;this.last_instr_jump=!1;this.first_init=!0;this.v86$next_tick=function(){};this.microtick=function(){};
this.fpu=this.io=void 0;"use strict";var a={};this.debug=a;a.step_mode=!1;a.ops={};a.show=function(a){if("undefined"!==typeof document){var c=document.getElementById("log");if(c){c.textContent+=a+"\n";c.style.display="block";c.scrollTop=1E9;return}}console.log(c)};a.init=function(){};a.dump_regs=function(){};a.dump_instructions=function(){};a.dump_regs_short=function(){};a.dump_stack=function(){};a.dump_page_directory=function(){};a.dump_gdt_ldt=function(){};a.dump_idt=function(){};a.get_memory_dump=
function(){};a.memory_hex_dump=function(){};a.used_memory_dump=function(){};a.step=function(){};a.run_until=function(){};a.debugger=function(){};a.unimpl=function(b){b="Unimplemented"+(b?": "+b:"");a.show(b);a.show("Execution stopped");return b};a.logop=function(){}}
l.prototype._state_restore=function(){this.reg32=new Uint32Array(this.reg32s.buffer);this.reg16s=new Int16Array(this.reg32s.buffer);this.reg16=new Uint16Array(this.reg32s.buffer);this.reg8s=new Int8Array(this.reg32s.buffer);this.reg8=new Uint8Array(this.reg32s.buffer);sa(this);ta(this);this.stack_size_32?this.stack_reg=this.reg32s:this.stack_reg=this.reg16;ua(this);this.timestamp_counter=0};"use strict";l.prototype.modrm_table16=Array(192);l.prototype.modrm_table32=Array(192);
l.prototype.sib_table=Array(256);l.prototype.modrm_table16[0]=function(a){return m(a)+(a.reg16[6]+a.reg16[12]&65535)|0};l.prototype.modrm_table16[64]=function(a){return m(a)+(a.reg16[6]+a.reg16[12]+n(a)&65535)|0};l.prototype.modrm_table16[128]=function(a){return m(a)+(a.reg16[6]+a.reg16[12]+p(a)&65535)|0};l.prototype.modrm_table16[1]=function(a){return m(a)+(a.reg16[6]+a.reg16[14]&65535)|0};l.prototype.modrm_table16[65]=function(a){return m(a)+(a.reg16[6]+a.reg16[14]+n(a)&65535)|0};
l.prototype.modrm_table16[129]=function(a){return m(a)+(a.reg16[6]+a.reg16[14]+p(a)&65535)|0};l.prototype.modrm_table16[2]=function(a){return q(a)+(a.reg16[10]+a.reg16[12]&65535)|0};l.prototype.modrm_table16[66]=function(a){return q(a)+(a.reg16[10]+a.reg16[12]+n(a)&65535)|0};l.prototype.modrm_table16[130]=function(a){return q(a)+(a.reg16[10]+a.reg16[12]+p(a)&65535)|0};l.prototype.modrm_table16[3]=function(a){return q(a)+(a.reg16[10]+a.reg16[14]&65535)|0};
l.prototype.modrm_table16[67]=function(a){return q(a)+(a.reg16[10]+a.reg16[14]+n(a)&65535)|0};l.prototype.modrm_table16[131]=function(a){return q(a)+(a.reg16[10]+a.reg16[14]+p(a)&65535)|0};l.prototype.modrm_table16[4]=function(a){return m(a)+(a.reg16[12]&65535)|0};l.prototype.modrm_table16[68]=function(a){return m(a)+(a.reg16[12]+n(a)&65535)|0};l.prototype.modrm_table16[132]=function(a){return m(a)+(a.reg16[12]+p(a)&65535)|0};
l.prototype.modrm_table16[5]=function(a){return m(a)+(a.reg16[14]&65535)|0};l.prototype.modrm_table16[69]=function(a){return m(a)+(a.reg16[14]+n(a)&65535)|0};l.prototype.modrm_table16[133]=function(a){return m(a)+(a.reg16[14]+p(a)&65535)|0};l.prototype.modrm_table16[6]=function(a){return q(a)+(a.reg16[10]&65535)|0};l.prototype.modrm_table16[70]=function(a){return q(a)+(a.reg16[10]+n(a)&65535)|0};l.prototype.modrm_table16[134]=function(a){return q(a)+(a.reg16[10]+p(a)&65535)|0};
l.prototype.modrm_table16[7]=function(a){return m(a)+(a.reg16[6]&65535)|0};l.prototype.modrm_table16[71]=function(a){return m(a)+(a.reg16[6]+n(a)&65535)|0};l.prototype.modrm_table16[135]=function(a){return m(a)+(a.reg16[6]+p(a)&65535)|0};l.prototype.modrm_table32[0]=function(a){return m(a)+a.reg32s[0]|0};l.prototype.modrm_table32[64]=function(a){return m(a)+a.reg32s[0]+n(a)|0};l.prototype.modrm_table32[128]=function(a){return m(a)+a.reg32s[0]+s(a)|0};
l.prototype.modrm_table32[1]=function(a){return m(a)+a.reg32s[1]|0};l.prototype.modrm_table32[65]=function(a){return m(a)+a.reg32s[1]+n(a)|0};l.prototype.modrm_table32[129]=function(a){return m(a)+a.reg32s[1]+s(a)|0};l.prototype.modrm_table32[2]=function(a){return m(a)+a.reg32s[2]|0};l.prototype.modrm_table32[66]=function(a){return m(a)+a.reg32s[2]+n(a)|0};l.prototype.modrm_table32[130]=function(a){return m(a)+a.reg32s[2]+s(a)|0};l.prototype.modrm_table32[3]=function(a){return m(a)+a.reg32s[3]|0};
l.prototype.modrm_table32[67]=function(a){return m(a)+a.reg32s[3]+n(a)|0};l.prototype.modrm_table32[131]=function(a){return m(a)+a.reg32s[3]+s(a)|0};l.prototype.modrm_table32[4]=function(a){return a.sib_table[u(a)](a,!1)|0};l.prototype.modrm_table32[68]=function(a){return a.sib_table[u(a)](a,!1)+n(a)|0};l.prototype.modrm_table32[132]=function(a){return a.sib_table[u(a)](a,!1)+s(a)|0};l.prototype.modrm_table32[5]=function(a){return q(a)+a.reg32s[5]|0};
l.prototype.modrm_table32[69]=function(a){return q(a)+a.reg32s[5]+n(a)|0};l.prototype.modrm_table32[133]=function(a){return q(a)+a.reg32s[5]+s(a)|0};l.prototype.modrm_table32[6]=function(a){return m(a)+a.reg32s[6]|0};l.prototype.modrm_table32[70]=function(a){return m(a)+a.reg32s[6]+n(a)|0};l.prototype.modrm_table32[134]=function(a){return m(a)+a.reg32s[6]+s(a)|0};l.prototype.modrm_table32[7]=function(a){return m(a)+a.reg32s[7]|0};
l.prototype.modrm_table32[71]=function(a){return m(a)+a.reg32s[7]+n(a)|0};l.prototype.modrm_table32[135]=function(a){return m(a)+a.reg32s[7]+s(a)|0};l.prototype.modrm_table16[6]=function(a){return m(a)+p(a)|0};l.prototype.modrm_table32[5]=function(a){return m(a)+s(a)|0};l.prototype.modrm_table32[4]=function(a){return a.sib_table[u(a)](a,!1)|0};l.prototype.modrm_table32[68]=function(a){return a.sib_table[u(a)](a,!0)+n(a)|0};
l.prototype.modrm_table32[132]=function(a){return a.sib_table[u(a)](a,!0)+s(a)|0};for(var wa=0;8>wa;wa++)for(var xa=0;3>xa;xa++)for(var za=wa|xa<<6,Aa=1;8>Aa;Aa++)l.prototype.modrm_table32[za|Aa<<3]=l.prototype.modrm_table32[za],l.prototype.modrm_table16[za|Aa<<3]=l.prototype.modrm_table16[za];l.prototype.sib_table[0]=function(a){return a.reg32s[0]+m(a)+a.reg32s[0]|0};l.prototype.sib_table[1]=function(a){return a.reg32s[0]+m(a)+a.reg32s[1]|0};
l.prototype.sib_table[2]=function(a){return a.reg32s[0]+m(a)+a.reg32s[2]|0};l.prototype.sib_table[3]=function(a){return a.reg32s[0]+m(a)+a.reg32s[3]|0};l.prototype.sib_table[4]=function(a){return a.reg32s[0]+q(a)+a.reg32s[4]|0};l.prototype.sib_table[5]=function(a,b){return a.reg32s[0]+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[6]=function(a){return a.reg32s[0]+m(a)+a.reg32s[6]|0};l.prototype.sib_table[7]=function(a){return a.reg32s[0]+m(a)+a.reg32s[7]|0};
l.prototype.sib_table[64]=function(a){return(a.reg32s[0]<<1)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[65]=function(a){return(a.reg32s[0]<<1)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[66]=function(a){return(a.reg32s[0]<<1)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[67]=function(a){return(a.reg32s[0]<<1)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[68]=function(a){return(a.reg32s[0]<<1)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[69]=function(a,b){return(a.reg32s[0]<<1)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};
l.prototype.sib_table[70]=function(a){return(a.reg32s[0]<<1)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[71]=function(a){return(a.reg32s[0]<<1)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[128]=function(a){return(a.reg32s[0]<<2)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[129]=function(a){return(a.reg32s[0]<<2)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[130]=function(a){return(a.reg32s[0]<<2)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[131]=function(a){return(a.reg32s[0]<<2)+m(a)+a.reg32s[3]|0};
l.prototype.sib_table[132]=function(a){return(a.reg32s[0]<<2)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[133]=function(a,b){return(a.reg32s[0]<<2)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[134]=function(a){return(a.reg32s[0]<<2)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[135]=function(a){return(a.reg32s[0]<<2)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[192]=function(a){return(a.reg32s[0]<<3)+m(a)+a.reg32s[0]|0};
l.prototype.sib_table[193]=function(a){return(a.reg32s[0]<<3)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[194]=function(a){return(a.reg32s[0]<<3)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[195]=function(a){return(a.reg32s[0]<<3)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[196]=function(a){return(a.reg32s[0]<<3)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[197]=function(a,b){return(a.reg32s[0]<<3)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};
l.prototype.sib_table[198]=function(a){return(a.reg32s[0]<<3)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[199]=function(a){return(a.reg32s[0]<<3)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[8]=function(a){return a.reg32s[1]+m(a)+a.reg32s[0]|0};l.prototype.sib_table[9]=function(a){return a.reg32s[1]+m(a)+a.reg32s[1]|0};l.prototype.sib_table[10]=function(a){return a.reg32s[1]+m(a)+a.reg32s[2]|0};l.prototype.sib_table[11]=function(a){return a.reg32s[1]+m(a)+a.reg32s[3]|0};
l.prototype.sib_table[12]=function(a){return a.reg32s[1]+q(a)+a.reg32s[4]|0};l.prototype.sib_table[13]=function(a,b){return a.reg32s[1]+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[14]=function(a){return a.reg32s[1]+m(a)+a.reg32s[6]|0};l.prototype.sib_table[15]=function(a){return a.reg32s[1]+m(a)+a.reg32s[7]|0};l.prototype.sib_table[72]=function(a){return(a.reg32s[1]<<1)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[73]=function(a){return(a.reg32s[1]<<1)+m(a)+a.reg32s[1]|0};
l.prototype.sib_table[74]=function(a){return(a.reg32s[1]<<1)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[75]=function(a){return(a.reg32s[1]<<1)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[76]=function(a){return(a.reg32s[1]<<1)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[77]=function(a,b){return(a.reg32s[1]<<1)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[78]=function(a){return(a.reg32s[1]<<1)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[79]=function(a){return(a.reg32s[1]<<1)+m(a)+a.reg32s[7]|0};
l.prototype.sib_table[136]=function(a){return(a.reg32s[1]<<2)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[137]=function(a){return(a.reg32s[1]<<2)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[138]=function(a){return(a.reg32s[1]<<2)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[139]=function(a){return(a.reg32s[1]<<2)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[140]=function(a){return(a.reg32s[1]<<2)+q(a)+a.reg32s[4]|0};
l.prototype.sib_table[141]=function(a,b){return(a.reg32s[1]<<2)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[142]=function(a){return(a.reg32s[1]<<2)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[143]=function(a){return(a.reg32s[1]<<2)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[200]=function(a){return(a.reg32s[1]<<3)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[201]=function(a){return(a.reg32s[1]<<3)+m(a)+a.reg32s[1]|0};
l.prototype.sib_table[202]=function(a){return(a.reg32s[1]<<3)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[203]=function(a){return(a.reg32s[1]<<3)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[204]=function(a){return(a.reg32s[1]<<3)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[205]=function(a,b){return(a.reg32s[1]<<3)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[206]=function(a){return(a.reg32s[1]<<3)+m(a)+a.reg32s[6]|0};
l.prototype.sib_table[207]=function(a){return(a.reg32s[1]<<3)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[16]=function(a){return a.reg32s[2]+m(a)+a.reg32s[0]|0};l.prototype.sib_table[17]=function(a){return a.reg32s[2]+m(a)+a.reg32s[1]|0};l.prototype.sib_table[18]=function(a){return a.reg32s[2]+m(a)+a.reg32s[2]|0};l.prototype.sib_table[19]=function(a){return a.reg32s[2]+m(a)+a.reg32s[3]|0};l.prototype.sib_table[20]=function(a){return a.reg32s[2]+q(a)+a.reg32s[4]|0};
l.prototype.sib_table[21]=function(a,b){return a.reg32s[2]+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[22]=function(a){return a.reg32s[2]+m(a)+a.reg32s[6]|0};l.prototype.sib_table[23]=function(a){return a.reg32s[2]+m(a)+a.reg32s[7]|0};l.prototype.sib_table[80]=function(a){return(a.reg32s[2]<<1)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[81]=function(a){return(a.reg32s[2]<<1)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[82]=function(a){return(a.reg32s[2]<<1)+m(a)+a.reg32s[2]|0};
l.prototype.sib_table[83]=function(a){return(a.reg32s[2]<<1)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[84]=function(a){return(a.reg32s[2]<<1)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[85]=function(a,b){return(a.reg32s[2]<<1)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[86]=function(a){return(a.reg32s[2]<<1)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[87]=function(a){return(a.reg32s[2]<<1)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[144]=function(a){return(a.reg32s[2]<<2)+m(a)+a.reg32s[0]|0};
l.prototype.sib_table[145]=function(a){return(a.reg32s[2]<<2)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[146]=function(a){return(a.reg32s[2]<<2)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[147]=function(a){return(a.reg32s[2]<<2)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[148]=function(a){return(a.reg32s[2]<<2)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[149]=function(a,b){return(a.reg32s[2]<<2)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};
l.prototype.sib_table[150]=function(a){return(a.reg32s[2]<<2)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[151]=function(a){return(a.reg32s[2]<<2)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[208]=function(a){return(a.reg32s[2]<<3)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[209]=function(a){return(a.reg32s[2]<<3)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[210]=function(a){return(a.reg32s[2]<<3)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[211]=function(a){return(a.reg32s[2]<<3)+m(a)+a.reg32s[3]|0};
l.prototype.sib_table[212]=function(a){return(a.reg32s[2]<<3)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[213]=function(a,b){return(a.reg32s[2]<<3)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[214]=function(a){return(a.reg32s[2]<<3)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[215]=function(a){return(a.reg32s[2]<<3)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[24]=function(a){return a.reg32s[3]+m(a)+a.reg32s[0]|0};l.prototype.sib_table[25]=function(a){return a.reg32s[3]+m(a)+a.reg32s[1]|0};
l.prototype.sib_table[26]=function(a){return a.reg32s[3]+m(a)+a.reg32s[2]|0};l.prototype.sib_table[27]=function(a){return a.reg32s[3]+m(a)+a.reg32s[3]|0};l.prototype.sib_table[28]=function(a){return a.reg32s[3]+q(a)+a.reg32s[4]|0};l.prototype.sib_table[29]=function(a,b){return a.reg32s[3]+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[30]=function(a){return a.reg32s[3]+m(a)+a.reg32s[6]|0};l.prototype.sib_table[31]=function(a){return a.reg32s[3]+m(a)+a.reg32s[7]|0};
l.prototype.sib_table[88]=function(a){return(a.reg32s[3]<<1)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[89]=function(a){return(a.reg32s[3]<<1)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[90]=function(a){return(a.reg32s[3]<<1)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[91]=function(a){return(a.reg32s[3]<<1)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[92]=function(a){return(a.reg32s[3]<<1)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[93]=function(a,b){return(a.reg32s[3]<<1)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};
l.prototype.sib_table[94]=function(a){return(a.reg32s[3]<<1)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[95]=function(a){return(a.reg32s[3]<<1)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[152]=function(a){return(a.reg32s[3]<<2)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[153]=function(a){return(a.reg32s[3]<<2)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[154]=function(a){return(a.reg32s[3]<<2)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[155]=function(a){return(a.reg32s[3]<<2)+m(a)+a.reg32s[3]|0};
l.prototype.sib_table[156]=function(a){return(a.reg32s[3]<<2)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[157]=function(a,b){return(a.reg32s[3]<<2)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[158]=function(a){return(a.reg32s[3]<<2)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[159]=function(a){return(a.reg32s[3]<<2)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[216]=function(a){return(a.reg32s[3]<<3)+m(a)+a.reg32s[0]|0};
l.prototype.sib_table[217]=function(a){return(a.reg32s[3]<<3)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[218]=function(a){return(a.reg32s[3]<<3)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[219]=function(a){return(a.reg32s[3]<<3)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[220]=function(a){return(a.reg32s[3]<<3)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[221]=function(a,b){return(a.reg32s[3]<<3)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};
l.prototype.sib_table[222]=function(a){return(a.reg32s[3]<<3)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[223]=function(a){return(a.reg32s[3]<<3)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[32]=function(a){return 0+m(a)+a.reg32s[0]|0};l.prototype.sib_table[33]=function(a){return 0+m(a)+a.reg32s[1]|0};l.prototype.sib_table[34]=function(a){return 0+m(a)+a.reg32s[2]|0};l.prototype.sib_table[35]=function(a){return 0+m(a)+a.reg32s[3]|0};l.prototype.sib_table[36]=function(a){return 0+q(a)+a.reg32s[4]|0};
l.prototype.sib_table[37]=function(a,b){return 0+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[38]=function(a){return 0+m(a)+a.reg32s[6]|0};l.prototype.sib_table[39]=function(a){return 0+m(a)+a.reg32s[7]|0};l.prototype.sib_table[96]=function(a){return 0+m(a)+a.reg32s[0]|0};l.prototype.sib_table[97]=function(a){return 0+m(a)+a.reg32s[1]|0};l.prototype.sib_table[98]=function(a){return 0+m(a)+a.reg32s[2]|0};l.prototype.sib_table[99]=function(a){return 0+m(a)+a.reg32s[3]|0};
l.prototype.sib_table[100]=function(a){return 0+q(a)+a.reg32s[4]|0};l.prototype.sib_table[101]=function(a,b){return 0+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[102]=function(a){return 0+m(a)+a.reg32s[6]|0};l.prototype.sib_table[103]=function(a){return 0+m(a)+a.reg32s[7]|0};l.prototype.sib_table[160]=function(a){return 0+m(a)+a.reg32s[0]|0};l.prototype.sib_table[161]=function(a){return 0+m(a)+a.reg32s[1]|0};l.prototype.sib_table[162]=function(a){return 0+m(a)+a.reg32s[2]|0};
l.prototype.sib_table[163]=function(a){return 0+m(a)+a.reg32s[3]|0};l.prototype.sib_table[164]=function(a){return 0+q(a)+a.reg32s[4]|0};l.prototype.sib_table[165]=function(a,b){return 0+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[166]=function(a){return 0+m(a)+a.reg32s[6]|0};l.prototype.sib_table[167]=function(a){return 0+m(a)+a.reg32s[7]|0};l.prototype.sib_table[224]=function(a){return 0+m(a)+a.reg32s[0]|0};l.prototype.sib_table[225]=function(a){return 0+m(a)+a.reg32s[1]|0};
l.prototype.sib_table[226]=function(a){return 0+m(a)+a.reg32s[2]|0};l.prototype.sib_table[227]=function(a){return 0+m(a)+a.reg32s[3]|0};l.prototype.sib_table[228]=function(a){return 0+q(a)+a.reg32s[4]|0};l.prototype.sib_table[229]=function(a,b){return 0+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[230]=function(a){return 0+m(a)+a.reg32s[6]|0};l.prototype.sib_table[231]=function(a){return 0+m(a)+a.reg32s[7]|0};l.prototype.sib_table[40]=function(a){return a.reg32s[5]+m(a)+a.reg32s[0]|0};
l.prototype.sib_table[41]=function(a){return a.reg32s[5]+m(a)+a.reg32s[1]|0};l.prototype.sib_table[42]=function(a){return a.reg32s[5]+m(a)+a.reg32s[2]|0};l.prototype.sib_table[43]=function(a){return a.reg32s[5]+m(a)+a.reg32s[3]|0};l.prototype.sib_table[44]=function(a){return a.reg32s[5]+q(a)+a.reg32s[4]|0};l.prototype.sib_table[45]=function(a,b){return a.reg32s[5]+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[46]=function(a){return a.reg32s[5]+m(a)+a.reg32s[6]|0};
l.prototype.sib_table[47]=function(a){return a.reg32s[5]+m(a)+a.reg32s[7]|0};l.prototype.sib_table[104]=function(a){return(a.reg32s[5]<<1)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[105]=function(a){return(a.reg32s[5]<<1)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[106]=function(a){return(a.reg32s[5]<<1)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[107]=function(a){return(a.reg32s[5]<<1)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[108]=function(a){return(a.reg32s[5]<<1)+q(a)+a.reg32s[4]|0};
l.prototype.sib_table[109]=function(a,b){return(a.reg32s[5]<<1)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[110]=function(a){return(a.reg32s[5]<<1)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[111]=function(a){return(a.reg32s[5]<<1)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[168]=function(a){return(a.reg32s[5]<<2)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[169]=function(a){return(a.reg32s[5]<<2)+m(a)+a.reg32s[1]|0};
l.prototype.sib_table[170]=function(a){return(a.reg32s[5]<<2)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[171]=function(a){return(a.reg32s[5]<<2)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[172]=function(a){return(a.reg32s[5]<<2)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[173]=function(a,b){return(a.reg32s[5]<<2)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[174]=function(a){return(a.reg32s[5]<<2)+m(a)+a.reg32s[6]|0};
l.prototype.sib_table[175]=function(a){return(a.reg32s[5]<<2)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[232]=function(a){return(a.reg32s[5]<<3)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[233]=function(a){return(a.reg32s[5]<<3)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[234]=function(a){return(a.reg32s[5]<<3)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[235]=function(a){return(a.reg32s[5]<<3)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[236]=function(a){return(a.reg32s[5]<<3)+q(a)+a.reg32s[4]|0};
l.prototype.sib_table[237]=function(a,b){return(a.reg32s[5]<<3)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[238]=function(a){return(a.reg32s[5]<<3)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[239]=function(a){return(a.reg32s[5]<<3)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[48]=function(a){return a.reg32s[6]+m(a)+a.reg32s[0]|0};l.prototype.sib_table[49]=function(a){return a.reg32s[6]+m(a)+a.reg32s[1]|0};l.prototype.sib_table[50]=function(a){return a.reg32s[6]+m(a)+a.reg32s[2]|0};
l.prototype.sib_table[51]=function(a){return a.reg32s[6]+m(a)+a.reg32s[3]|0};l.prototype.sib_table[52]=function(a){return a.reg32s[6]+q(a)+a.reg32s[4]|0};l.prototype.sib_table[53]=function(a,b){return a.reg32s[6]+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[54]=function(a){return a.reg32s[6]+m(a)+a.reg32s[6]|0};l.prototype.sib_table[55]=function(a){return a.reg32s[6]+m(a)+a.reg32s[7]|0};l.prototype.sib_table[112]=function(a){return(a.reg32s[6]<<1)+m(a)+a.reg32s[0]|0};
l.prototype.sib_table[113]=function(a){return(a.reg32s[6]<<1)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[114]=function(a){return(a.reg32s[6]<<1)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[115]=function(a){return(a.reg32s[6]<<1)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[116]=function(a){return(a.reg32s[6]<<1)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[117]=function(a,b){return(a.reg32s[6]<<1)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};
l.prototype.sib_table[118]=function(a){return(a.reg32s[6]<<1)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[119]=function(a){return(a.reg32s[6]<<1)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[176]=function(a){return(a.reg32s[6]<<2)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[177]=function(a){return(a.reg32s[6]<<2)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[178]=function(a){return(a.reg32s[6]<<2)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[179]=function(a){return(a.reg32s[6]<<2)+m(a)+a.reg32s[3]|0};
l.prototype.sib_table[180]=function(a){return(a.reg32s[6]<<2)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[181]=function(a,b){return(a.reg32s[6]<<2)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[182]=function(a){return(a.reg32s[6]<<2)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[183]=function(a){return(a.reg32s[6]<<2)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[240]=function(a){return(a.reg32s[6]<<3)+m(a)+a.reg32s[0]|0};
l.prototype.sib_table[241]=function(a){return(a.reg32s[6]<<3)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[242]=function(a){return(a.reg32s[6]<<3)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[243]=function(a){return(a.reg32s[6]<<3)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[244]=function(a){return(a.reg32s[6]<<3)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[245]=function(a,b){return(a.reg32s[6]<<3)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};
l.prototype.sib_table[246]=function(a){return(a.reg32s[6]<<3)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[247]=function(a){return(a.reg32s[6]<<3)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[56]=function(a){return a.reg32s[7]+m(a)+a.reg32s[0]|0};l.prototype.sib_table[57]=function(a){return a.reg32s[7]+m(a)+a.reg32s[1]|0};l.prototype.sib_table[58]=function(a){return a.reg32s[7]+m(a)+a.reg32s[2]|0};l.prototype.sib_table[59]=function(a){return a.reg32s[7]+m(a)+a.reg32s[3]|0};
l.prototype.sib_table[60]=function(a){return a.reg32s[7]+q(a)+a.reg32s[4]|0};l.prototype.sib_table[61]=function(a,b){return a.reg32s[7]+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[62]=function(a){return a.reg32s[7]+m(a)+a.reg32s[6]|0};l.prototype.sib_table[63]=function(a){return a.reg32s[7]+m(a)+a.reg32s[7]|0};l.prototype.sib_table[120]=function(a){return(a.reg32s[7]<<1)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[121]=function(a){return(a.reg32s[7]<<1)+m(a)+a.reg32s[1]|0};
l.prototype.sib_table[122]=function(a){return(a.reg32s[7]<<1)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[123]=function(a){return(a.reg32s[7]<<1)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[124]=function(a){return(a.reg32s[7]<<1)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[125]=function(a,b){return(a.reg32s[7]<<1)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[126]=function(a){return(a.reg32s[7]<<1)+m(a)+a.reg32s[6]|0};
l.prototype.sib_table[127]=function(a){return(a.reg32s[7]<<1)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[184]=function(a){return(a.reg32s[7]<<2)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[185]=function(a){return(a.reg32s[7]<<2)+m(a)+a.reg32s[1]|0};l.prototype.sib_table[186]=function(a){return(a.reg32s[7]<<2)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[187]=function(a){return(a.reg32s[7]<<2)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[188]=function(a){return(a.reg32s[7]<<2)+q(a)+a.reg32s[4]|0};
l.prototype.sib_table[189]=function(a,b){return(a.reg32s[7]<<2)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[190]=function(a){return(a.reg32s[7]<<2)+m(a)+a.reg32s[6]|0};l.prototype.sib_table[191]=function(a){return(a.reg32s[7]<<2)+m(a)+a.reg32s[7]|0};l.prototype.sib_table[248]=function(a){return(a.reg32s[7]<<3)+m(a)+a.reg32s[0]|0};l.prototype.sib_table[249]=function(a){return(a.reg32s[7]<<3)+m(a)+a.reg32s[1]|0};
l.prototype.sib_table[250]=function(a){return(a.reg32s[7]<<3)+m(a)+a.reg32s[2]|0};l.prototype.sib_table[251]=function(a){return(a.reg32s[7]<<3)+m(a)+a.reg32s[3]|0};l.prototype.sib_table[252]=function(a){return(a.reg32s[7]<<3)+q(a)+a.reg32s[4]|0};l.prototype.sib_table[253]=function(a,b){return(a.reg32s[7]<<3)+(b?q(a)+a.reg32s[5]:m(a)+s(a))|0};l.prototype.sib_table[254]=function(a){return(a.reg32s[7]<<3)+m(a)+a.reg32s[6]|0};
l.prototype.sib_table[255]=function(a){return(a.reg32s[7]<<3)+m(a)+a.reg32s[7]|0};l.prototype.modrm_resolve=function(a){return(this.address_size_32?this.modrm_table32:this.modrm_table16)[a](this)};"use strict";l.prototype.add=function(a,b,c){this.last_op1=a;this.last_op2=b;this.last_add_result=this.last_result=a+b|0;this.last_op_size=c;this.flags_changed=2261;return this.last_result};
function Ba(a,b,c,d){var e=a.getcf();a.last_op1=b;a.last_op2=c;a.last_add_result=a.last_result=(b+c|0)+e|0;a.last_op_size=d;a.flags_changed=2261;return a.last_result}l.prototype.sub=function(a,b,c){this.last_add_result=a;this.last_op2=b;this.last_op1=this.last_result=a-b|0;this.last_op_size=c;this.flags_changed=2261;return this.last_result};
function Ea(a,b,c,d){var e=a.getcf();a.last_add_result=b;a.last_op2=c;a.last_op1=a.last_result=b-c-e|0;a.last_op_size=d;a.flags_changed=2261;return a.last_result}function Fa(a,b,c){a.flags=a.flags&-2|a.getcf();a.last_op1=b;a.last_op2=1;a.last_add_result=a.last_result=b+1|0;a.last_op_size=c;a.flags_changed=2260;return a.last_result}
function Ga(a,b,c){a.flags=a.flags&-2|a.getcf();a.last_add_result=b;a.last_op2=1;a.last_op1=a.last_result=b-1|0;a.last_op_size=c;a.flags_changed=2260;return a.last_result}function Ha(a,b,c){a.last_op1=a.last_result=-b|0;a.flags_changed=2261;a.last_add_result=0;a.last_op2=b;a.last_op_size=c;return a.last_result}function Ia(a,b,c){b=b*c;a.flags=32767<b||-32768>b?a.flags|2049:a.flags&-2050;a.flags_changed=0;return b}
function Ka(a,b,c){var d=!1;0>b&&(d=!0,b=-b|0);0>c&&(d=!d,c=-c|0);var e=b&65535;b=b>>>16;var f=c&65535;c=c>>>16;var g=e*f,f=(g>>>16)+(b*f|0)|0,r=f>>>16,f=(f&65535)+(e*c|0)|0,g=f<<16|g&65535,r=((f>>>16)+(b*c|0)|0)+r|0;d&&(g=-g|0,r=~r+!g|0);a.flags=r===g>>31?a.flags&-2050:a.flags|2049;a.flags_changed=0;return g}function v(a,b,c,d){a.last_result=b&c;a.last_op_size=d;a.flags&=-2066;a.flags_changed=196;return a.last_result}
function La(a,b,c,d){a.last_result=b|c;a.last_op_size=d;a.flags&=-2066;a.flags_changed=196;return a.last_result}function Ma(a,b,c,d){a.last_result=b^c;a.last_op_size=d;a.flags&=-2066;a.flags_changed=196;return a.last_result}function Na(a,b,c){if(!c)return b;c&=7;b=b<<c|b>>8-c;a.flags_changed&=-2050;a.flags=a.flags&-2050|b&1|(b<<11^b<<4)&2048;return b}function Oa(a,b,c){if(!c)return b;c&=15;b=b<<c|b>>16-c;a.flags_changed&=-2050;a.flags=a.flags&-2050|b&1|(b<<11^b>>4)&2048;return b}
function Pa(a,b,c){if(!c)return b;b=b<<c|b>>>32-c;a.flags_changed&=-2050;a.flags=a.flags&-2050|b&1|(b<<11^b>>20)&2048;return b}function Qa(a,b,c){c%=9;if(!c)return b;b=b<<c|a.getcf()<<c-1|b>>9-c;a.flags_changed&=-2050;a.flags=a.flags&-2050|b>>8&1|(b<<3^b<<4)&2048;return b}function Ra(a,b,c){c%=17;if(!c)return b;b=b<<c|a.getcf()<<c-1|b>>17-c;a.flags_changed&=-2050;a.flags=a.flags&-2050|b>>16&1|(b>>5^b>>4)&2048;return b}
function Sa(a,b,c){if(!c)return b;var d=b<<c|a.getcf()<<c-1;1<c&&(d|=b>>>33-c);a.flags_changed&=-2050;a.flags=a.flags&-2050|b>>>32-c&1;a.flags|=(a.flags<<11^d>>20)&2048;return d}function Ta(a,b,c){c&=7;if(!c)return b;b=b>>c|b<<8-c;a.flags_changed&=-2050;a.flags=a.flags&-2050|b>>7&1|(b<<4^b<<5)&2048;return b}function Va(a,b,c){c&=15;if(!c)return b;b=b>>c|b<<16-c;a.flags_changed&=-2050;a.flags=a.flags&-2050|b>>15&1|(b>>4^b>>3)&2048;return b}
function Wa(a,b,c){if(!c)return b;b=b>>>c|b<<32-c;a.flags_changed&=-2050;a.flags=a.flags&-2050|b>>31&1|(b>>20^b>>19)&2048;return b}function Xa(a,b,c){c%=9;if(!c)return b;b=b>>c|a.getcf()<<8-c|b<<9-c;a.flags_changed&=-2050;a.flags=a.flags&-2050|b>>8&1|(b<<4^b<<5)&2048;return b}function Ya(a,b,c){c%=17;if(!c)return b;b=b>>c|a.getcf()<<16-c|b<<17-c;a.flags_changed&=-2050;a.flags=a.flags&-2050|b>>16&1|(b>>4^b>>3)&2048;return b}
function Za(a,b,c){if(!c)return b;var d=b>>>c|a.getcf()<<32-c;1<c&&(d|=b<<33-c);a.flags_changed&=-2050;a.flags=a.flags&-2050|b>>c-1&1|(d>>20^d>>19)&2048;return d}function $a(a,b,c){if(0===c)return b;a.last_result=b<<c;a.last_op_size=7;a.flags_changed=212;a.flags=a.flags&-2050|a.last_result>>8&1|(a.last_result<<3^a.last_result<<4)&2048;return a.last_result}
function ab(a,b,c){if(0===c)return b;a.last_result=b<<c;a.last_op_size=15;a.flags_changed=212;a.flags=a.flags&-2050|a.last_result>>16&1|(a.last_result>>5^a.last_result>>4)&2048;return a.last_result}function bb(a,b,c){if(0===c)return b;a.last_result=b<<c;a.last_op_size=31;a.flags_changed=212;a.flags=a.flags&-2050|b>>>32-c&1;a.flags|=(a.flags&1^a.last_result>>31&1)<<11&2048;return a.last_result}
function cb(a,b,c){if(0===c)return b;a.last_result=b>>c;a.last_op_size=7;a.flags_changed=212;a.flags=a.flags&-2050|b>>c-1&1|(b>>7&1)<<11&2048;return a.last_result}function db(a,b,c){if(0===c)return b;a.last_result=b>>c;a.last_op_size=15;a.flags_changed=212;a.flags=a.flags&-2050|b>>c-1&1|b>>4&2048;return a.last_result}function eb(a,b,c){if(0===c)return b;a.last_result=b>>>c;a.last_op_size=31;a.flags_changed=212;a.flags=a.flags&-2050|b>>>c-1&1|b>>20&2048;return a.last_result}
function fb(a,b,c){if(0===c)return b;a.last_result=b>>c;a.last_op_size=7;a.flags_changed=212;a.flags=a.flags&-2050|b>>c-1&1;return a.last_result}function hb(a,b,c){if(0===c)return b;a.last_result=b>>c;a.last_op_size=15;a.flags_changed=212;a.flags=a.flags&-2050|b>>c-1&1;return a.last_result}function ib(a,b,c){if(0===c)return b;a.last_result=b>>c;a.last_op_size=31;a.flags_changed=212;a.flags=a.flags&-2050|b>>>c-1&1;return a.last_result}
function jb(a,b,c,d){if(0===d)return b;16>=d?(a.last_result=b>>d|c<<16-d,a.flags=a.flags&-2|b>>d-1&1):(a.last_result=b<<32-d|c>>d-16,a.flags=a.flags&-2|c>>d-17&1);a.last_op_size=15;a.flags_changed=212;a.flags=a.flags&-2049|(a.last_result^b)>>4&2048;return a.last_result}function kb(a,b,c,d){if(0===d)return b;a.last_result=b>>>d|c<<32-d;a.last_op_size=31;a.flags_changed=212;a.flags=a.flags&-2|b>>>d-1&1;a.flags=a.flags&-2049|(a.last_result^b)>>20&2048;return a.last_result}
function lb(a,b,c,d){if(0===d)return b;16>=d?(a.last_result=b<<d|c>>>16-d,a.flags=a.flags&-2|b>>>16-d&1):(a.last_result=b>>32-d|c<<d-16,a.flags=a.flags&-2|c>>>32-d&1);a.last_op_size=15;a.flags_changed=212;a.flags=a.flags&-2049|(a.flags&1^a.last_result>>15&1)<<11;return a.last_result}function mb(a,b,c,d){if(0===d)return b;a.last_result=b<<d|c>>>32-d;a.last_op_size=31;a.flags_changed=212;a.flags=a.flags&-2|b>>>32-d&1;a.flags=a.flags&-2049|(a.flags&1^a.last_result>>31&1)<<11;return a.last_result}
function nb(a,b,c){a.flags=a.flags&-2|b>>c&1;a.flags_changed&=-2}function ob(a,b,c){a.flags=a.flags&-2|b>>c&1;a.flags_changed&=-2;return b^1<<c}function pb(a,b,c){a.flags=a.flags&-2|b>>c&1;a.flags_changed&=-2;return b|1<<c}function qb(a,b,c){a.flags=a.flags&-2|b>>c&1;a.flags_changed&=-2;return b&~(1<<c)}function rb(a,b,c){b=w(a,b+(c>>3));a.flags=a.flags&-2|b>>(c&7)&1;a.flags_changed&=-2}
function sb(a,b,c){b=y(a,b+(c>>3));var d=a.memory.read8(b);c&=7;a.flags=a.flags&-2|d>>c&1;a.flags_changed&=-2;a.memory.write8(b,d^1<<c)}function tb(a,b,c){b=y(a,b+(c>>3));var d=a.memory.read8(b);c&=7;a.flags=a.flags&-2|d>>c&1;a.flags_changed&=-2;a.memory.write8(b,d&~(1<<c))}function vb(a,b,c){b=y(a,b+(c>>3));var d=a.memory.read8(b);c&=7;a.flags=a.flags&-2|d>>c&1;a.flags_changed&=-2;a.memory.write8(b,d|1<<c)}
function wb(a,b){a.flags_changed=0;a.flags&=-2262;if(b)return b=b-(b>>1&1431655765),b=(b&858993459)+(b>>2&858993459),16843009*(b+(b>>4)&252645135)>>24;a.flags|=64;return 0}"use strict";"use strict";var z=[],A=[],C=[],D=[];l.prototype.table16=z;l.prototype.table32=A;l.prototype.table0F_16=C;l.prototype.table0F_32=D;
z[0]=A[0]=function(a){var b=u(a),c,d;192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1];c=a.add(c,a.reg8[b>>1&12|b>>5&1],7);192>b?a.memory.write8(d,c):a.reg8[b<<2&12|b>>2&1]=c};z[1]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=a.add(c,a.reg16[b>>2&14],15);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c};
A[1]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=a.add(c,a.reg32s[b>>3&7],31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c};z[2]=A[2]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];a.reg8[b>>1&12|b>>5&1]=a.add(a.reg8[b>>1&12|b>>5&1],c,7)};
z[3]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.reg16[b>>2&14]=a.add(a.reg16[b>>2&14],c,15)};A[3]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.reg32s[b>>3&7]=a.add(a.reg32s[b>>3&7],c,31)};z[4]=A[4]=function(a){a.reg8[0]=a.add(a.reg8[0],u(a),7)};z[5]=function(a){a.reg16[0]=a.add(a.reg16[0],p(a),15)};A[5]=function(a){a.reg32s[0]=a.add(a.reg32s[0],s(a),31)};z[6]=function(a){M(a,a.sreg[0])};A[6]=function(a){N(a,a.sreg[0])};
z[7]=function(a){O(a,0,J(a,xb(a,0)));a.stack_reg[a.reg_vsp]+=2};A[7]=function(a){O(a,0,J(a,xb(a,0)));a.stack_reg[a.reg_vsp]+=4};z[8]=A[8]=function(a){var b=u(a),c,d;192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1];c=La(a,c,a.reg8[b>>1&12|b>>5&1],7);192>b?a.memory.write8(d,c):a.reg8[b<<2&12|b>>2&1]=c};
z[9]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=La(a,c,a.reg16[b>>2&14],15);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c};A[9]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=La(a,c,a.reg32s[b>>3&7],31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c};
z[10]=A[10]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];a.reg8[b>>1&12|b>>5&1]=La(a,a.reg8[b>>1&12|b>>5&1],c,7)};z[11]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.reg16[b>>2&14]=La(a,a.reg16[b>>2&14],c,15)};A[11]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.reg32s[b>>3&7]=La(a,a.reg32s[b>>3&7],c,31)};z[12]=A[12]=function(a){a.reg8[0]=La(a,a.reg8[0],u(a),7)};z[13]=function(a){a.reg16[0]=La(a,a.reg16[0],p(a),15)};
A[13]=function(a){a.reg32s[0]=La(a,a.reg32s[0],s(a),31)};z[14]=function(a){M(a,a.sreg[1])};A[14]=function(a){N(a,a.sreg[1])};z[15]=A[15]=function(a){a.table0F[u(a)](a)};z[16]=A[16]=function(a){var b=u(a),c,d;192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1];c=Ba(a,c,a.reg8[b>>1&12|b>>5&1],7);192>b?a.memory.write8(d,c):a.reg8[b<<2&12|b>>2&1]=c};
z[17]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=Ba(a,c,a.reg16[b>>2&14],15);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c};A[17]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=Ba(a,c,a.reg32s[b>>3&7],31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c};
z[18]=A[18]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];a.reg8[b>>1&12|b>>5&1]=Ba(a,a.reg8[b>>1&12|b>>5&1],c,7)};z[19]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.reg16[b>>2&14]=Ba(a,a.reg16[b>>2&14],c,15)};A[19]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.reg32s[b>>3&7]=Ba(a,a.reg32s[b>>3&7],c,31)};z[20]=A[20]=function(a){a.reg8[0]=Ba(a,a.reg8[0],u(a),7)};z[21]=function(a){a.reg16[0]=Ba(a,a.reg16[0],p(a),15)};
A[21]=function(a){a.reg32s[0]=Ba(a,a.reg32s[0],s(a),31)};z[22]=function(a){M(a,a.sreg[2])};A[22]=function(a){N(a,a.sreg[2])};z[23]=function(a){O(a,2,J(a,xb(a,0)));a.stack_reg[a.reg_vsp]+=2};A[23]=function(a){O(a,2,J(a,xb(a,0)));a.stack_reg[a.reg_vsp]+=4};z[24]=A[24]=function(a){var b=u(a),c,d;192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1];c=Ea(a,c,a.reg8[b>>1&12|b>>5&1],7);192>b?a.memory.write8(d,c):a.reg8[b<<2&12|b>>2&1]=c};
z[25]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=Ea(a,c,a.reg16[b>>2&14],15);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c};A[25]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=Ea(a,c,a.reg32s[b>>3&7],31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c};
z[26]=A[26]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];a.reg8[b>>1&12|b>>5&1]=Ea(a,a.reg8[b>>1&12|b>>5&1],c,7)};z[27]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.reg16[b>>2&14]=Ea(a,a.reg16[b>>2&14],c,15)};A[27]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.reg32s[b>>3&7]=Ea(a,a.reg32s[b>>3&7],c,31)};z[28]=A[28]=function(a){a.reg8[0]=Ea(a,a.reg8[0],u(a),7)};z[29]=function(a){a.reg16[0]=Ea(a,a.reg16[0],p(a),15)};
A[29]=function(a){a.reg32s[0]=Ea(a,a.reg32s[0],s(a),31)};z[30]=function(a){M(a,a.sreg[3])};A[30]=function(a){N(a,a.sreg[3])};z[31]=function(a){O(a,3,J(a,xb(a,0)));a.stack_reg[a.reg_vsp]+=2};A[31]=function(a){O(a,3,J(a,xb(a,0)));a.stack_reg[a.reg_vsp]+=4};z[32]=A[32]=function(a){var b=u(a),c,d;192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1];c=v(a,c,a.reg8[b>>1&12|b>>5&1],7);192>b?a.memory.write8(d,c):a.reg8[b<<2&12|b>>2&1]=c};
z[33]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=v(a,c,a.reg16[b>>2&14],15);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c};A[33]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=v(a,c,a.reg32s[b>>3&7],31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c};
z[34]=A[34]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];a.reg8[b>>1&12|b>>5&1]=v(a,a.reg8[b>>1&12|b>>5&1],c,7)};z[35]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.reg16[b>>2&14]=v(a,a.reg16[b>>2&14],c,15)};A[35]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.reg32s[b>>3&7]=v(a,a.reg32s[b>>3&7],c,31)};z[36]=A[36]=function(a){a.reg8[0]=v(a,a.reg8[0],u(a),7)};z[37]=function(a){a.reg16[0]=v(a,a.reg16[0],p(a),15)};
A[37]=function(a){a.reg32s[0]=v(a,a.reg32s[0],s(a),31)};z[38]=A[38]=function(a){yb(a,0)};z[39]=A[39]=function(a){var b=a.reg8[0],c=a.getcf(),d=zb(a);a.flags&=-18;if(9<(b&15)||d)a.reg8[0]+=6,a.flags|=16;if(153<b||c)a.reg8[0]+=96,a.flags|=1;a.last_result=a.reg8[0];a.last_op_size=7;a.last_op1=a.last_op2=0;a.flags_changed=196};
z[40]=A[40]=function(a){var b=u(a),c,d;192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1];c=a.sub(c,a.reg8[b>>1&12|b>>5&1],7);192>b?a.memory.write8(d,c):a.reg8[b<<2&12|b>>2&1]=c};z[41]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=a.sub(c,a.reg16[b>>2&14],15);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c};
A[41]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=a.sub(c,a.reg32s[b>>3&7],31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c};z[42]=A[42]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];a.reg8[b>>1&12|b>>5&1]=a.sub(a.reg8[b>>1&12|b>>5&1],c,7)};
z[43]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.reg16[b>>2&14]=a.sub(a.reg16[b>>2&14],c,15)};A[43]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.reg32s[b>>3&7]=a.sub(a.reg32s[b>>3&7],c,31)};z[44]=A[44]=function(a){a.reg8[0]=a.sub(a.reg8[0],u(a),7)};z[45]=function(a){a.reg16[0]=a.sub(a.reg16[0],p(a),15)};A[45]=function(a){a.reg32s[0]=a.sub(a.reg32s[0],s(a),31)};z[46]=A[46]=function(a){yb(a,1)};
z[47]=A[47]=function(a){var b=a.reg8[0],c=a.getcf();a.flags&=-2;9<(b&15)||zb(a)?(a.reg8[0]-=6,a.flags|=16,a.flags=a.flags&-2|c|a.reg8[0]>>7):a.flags&=-17;if(153<b||c)a.reg8[0]-=96,a.flags|=1;a.last_result=a.reg8[0];a.last_op_size=7;a.last_op1=a.last_op2=0;a.flags_changed=196};z[48]=A[48]=function(a){var b=u(a),c,d;192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1];c=Ma(a,c,a.reg8[b>>1&12|b>>5&1],7);192>b?a.memory.write8(d,c):a.reg8[b<<2&12|b>>2&1]=c};
z[49]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=Ma(a,c,a.reg16[b>>2&14],15);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c};A[49]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=Ma(a,c,a.reg32s[b>>3&7],31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c};
z[50]=A[50]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];a.reg8[b>>1&12|b>>5&1]=Ma(a,a.reg8[b>>1&12|b>>5&1],c,7)};z[51]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.reg16[b>>2&14]=Ma(a,a.reg16[b>>2&14],c,15)};A[51]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.reg32s[b>>3&7]=Ma(a,a.reg32s[b>>3&7],c,31)};z[52]=A[52]=function(a){a.reg8[0]=Ma(a,a.reg8[0],u(a),7)};z[53]=function(a){a.reg16[0]=Ma(a,a.reg16[0],p(a),15)};
A[53]=function(a){a.reg32s[0]=Ma(a,a.reg32s[0],s(a),31)};z[54]=A[54]=function(a){yb(a,2)};z[55]=A[55]=function(a){9<(a.reg8[0]&15)||zb(a)?(a.reg16[0]+=6,a.reg8[1]+=1,a.flags|=17):a.flags&=-18;a.reg8[0]&=15;a.flags_changed&=-18};z[56]=A[56]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];a.sub(c,a.reg8[b>>1&12|b>>5&1],7)};z[57]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.sub(c,a.reg16[b>>2&14],15)};
A[57]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.sub(c,a.reg32s[b>>3&7],31)};z[58]=A[58]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];a.sub(a.reg8[b>>1&12|b>>5&1],c,7)};z[59]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.sub(a.reg16[b>>2&14],c,15)};A[59]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.sub(a.reg32s[b>>3&7],c,31)};z[60]=A[60]=function(a){a.sub(a.reg8[0],u(a),7)};
z[61]=function(a){a.sub(a.reg16[0],p(a),15)};A[61]=function(a){a.sub(a.reg32s[0],s(a),31)};z[62]=A[62]=function(a){yb(a,3)};z[63]=A[63]=function(a){9<(a.reg8[0]&15)||zb(a)?(a.reg16[0]-=6,a.reg8[1]-=1,a.flags|=17):a.flags&=-18;a.reg8[0]&=15;a.flags_changed&=-18};z[64]=function(a){a.reg16[0]=Fa(a,a.reg16[0],15)};A[64]=function(a){a.reg32s[0]=Fa(a,a.reg32s[0],31)};z[65]=function(a){a.reg16[2]=Fa(a,a.reg16[2],15)};A[65]=function(a){a.reg32s[1]=Fa(a,a.reg32s[1],31)};
z[66]=function(a){a.reg16[4]=Fa(a,a.reg16[4],15)};A[66]=function(a){a.reg32s[2]=Fa(a,a.reg32s[2],31)};z[67]=function(a){a.reg16[6]=Fa(a,a.reg16[6],15)};A[67]=function(a){a.reg32s[3]=Fa(a,a.reg32s[3],31)};z[68]=function(a){a.reg16[8]=Fa(a,a.reg16[8],15)};A[68]=function(a){a.reg32s[4]=Fa(a,a.reg32s[4],31)};z[69]=function(a){a.reg16[10]=Fa(a,a.reg16[10],15)};A[69]=function(a){a.reg32s[5]=Fa(a,a.reg32s[5],31)};z[70]=function(a){a.reg16[12]=Fa(a,a.reg16[12],15)};
A[70]=function(a){a.reg32s[6]=Fa(a,a.reg32s[6],31)};z[71]=function(a){a.reg16[14]=Fa(a,a.reg16[14],15)};A[71]=function(a){a.reg32s[7]=Fa(a,a.reg32s[7],31)};z[72]=function(a){a.reg16[0]=Ga(a,a.reg16[0],15)};A[72]=function(a){a.reg32s[0]=Ga(a,a.reg32s[0],31)};z[73]=function(a){a.reg16[2]=Ga(a,a.reg16[2],15)};A[73]=function(a){a.reg32s[1]=Ga(a,a.reg32s[1],31)};z[74]=function(a){a.reg16[4]=Ga(a,a.reg16[4],15)};A[74]=function(a){a.reg32s[2]=Ga(a,a.reg32s[2],31)};
z[75]=function(a){a.reg16[6]=Ga(a,a.reg16[6],15)};A[75]=function(a){a.reg32s[3]=Ga(a,a.reg32s[3],31)};z[76]=function(a){a.reg16[8]=Ga(a,a.reg16[8],15)};A[76]=function(a){a.reg32s[4]=Ga(a,a.reg32s[4],31)};z[77]=function(a){a.reg16[10]=Ga(a,a.reg16[10],15)};A[77]=function(a){a.reg32s[5]=Ga(a,a.reg32s[5],31)};z[78]=function(a){a.reg16[12]=Ga(a,a.reg16[12],15)};A[78]=function(a){a.reg32s[6]=Ga(a,a.reg32s[6],31)};z[79]=function(a){a.reg16[14]=Ga(a,a.reg16[14],15)};
A[79]=function(a){a.reg32s[7]=Ga(a,a.reg32s[7],31)};z[80]=function(a){M(a,a.reg16[0])};A[80]=function(a){N(a,a.reg32s[0])};z[81]=function(a){M(a,a.reg16[2])};A[81]=function(a){N(a,a.reg32s[1])};z[82]=function(a){M(a,a.reg16[4])};A[82]=function(a){N(a,a.reg32s[2])};z[83]=function(a){M(a,a.reg16[6])};A[83]=function(a){N(a,a.reg32s[3])};z[84]=function(a){M(a,a.reg16[8])};A[84]=function(a){N(a,a.reg32s[4])};z[85]=function(a){M(a,a.reg16[10])};A[85]=function(a){N(a,a.reg32s[5])};
z[86]=function(a){M(a,a.reg16[12])};A[86]=function(a){N(a,a.reg32s[6])};z[87]=function(a){M(a,a.reg16[14])};A[87]=function(a){N(a,a.reg32s[7])};z[88]=function(a){a.reg16[0]=P(a)};A[88]=function(a){a.reg32s[0]=Q(a)};z[89]=function(a){a.reg16[2]=P(a)};A[89]=function(a){a.reg32s[1]=Q(a)};z[90]=function(a){a.reg16[4]=P(a)};A[90]=function(a){a.reg32s[2]=Q(a)};z[91]=function(a){a.reg16[6]=P(a)};A[91]=function(a){a.reg32s[3]=Q(a)};z[92]=function(a){a.reg16[8]=P(a)};A[92]=function(a){a.reg32s[4]=Q(a)};
z[93]=function(a){a.reg16[10]=P(a)};A[93]=function(a){a.reg32s[5]=Q(a)};z[94]=function(a){a.reg16[12]=P(a)};A[94]=function(a){a.reg32s[6]=Q(a)};z[95]=function(a){a.reg16[14]=P(a)};A[95]=function(a){a.reg32s[7]=Q(a)};z[96]=function(a){var b=a.reg16[8];y(a,a.segment_offsets[2]+b-15|0);M(a,a.reg16[0]);M(a,a.reg16[2]);M(a,a.reg16[4]);M(a,a.reg16[6]);M(a,b);M(a,a.reg16[10]);M(a,a.reg16[12]);M(a,a.reg16[14])};
A[96]=function(a){var b=a.reg32s[4];y(a,a.segment_offsets[2]+b-31|0);N(a,a.reg32s[0]);N(a,a.reg32s[1]);N(a,a.reg32s[2]);N(a,a.reg32s[3]);N(a,b);N(a,a.reg32s[5]);N(a,a.reg32s[6]);N(a,a.reg32s[7])};z[97]=function(a){R(a,a.segment_offsets[2]+a.stack_reg[a.reg_vsp]+15|0);a.reg16[14]=P(a);a.reg16[12]=P(a);a.reg16[10]=P(a);a.stack_reg[a.reg_vsp]+=2;a.reg16[6]=P(a);a.reg16[4]=P(a);a.reg16[2]=P(a);a.reg16[0]=P(a)};
A[97]=function(a){R(a,a.segment_offsets[2]+a.stack_reg[a.reg_vsp]+31|0);a.reg32s[7]=Q(a);a.reg32s[6]=Q(a);a.reg32s[5]=Q(a);a.stack_reg[a.reg_vsp]+=4;a.reg32s[3]=Q(a);a.reg32s[2]=Q(a);a.reg32s[1]=Q(a);a.reg32s[0]=Q(a)};z[98]=A[98]=function(){};
z[99]=A[99]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];var f=b>>2&14;a.flags_changed&=-65;(c&3)<(a.reg16[f]&3)?(a.flags|=64,c=c&-4|a.reg16[f]&3):a.flags&=-65;192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c};z[100]=A[100]=function(a){yb(a,4)};z[101]=A[101]=function(a){yb(a,5)};
z[102]=A[102]=function(a){a.operand_size_32=!a.is_32;ta(a);a.table[u(a)](a);a.operand_size_32=a.is_32;ta(a)};z[103]=A[103]=function(a){a.address_size_32=!a.is_32;sa(a);a.table[u(a)](a);a.address_size_32=a.is_32;sa(a)};z[104]=function(a){M(a,p(a))};A[104]=function(a){N(a,s(a))};z[105]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b))<<16>>16:a.reg16s[b<<1&14];a.reg16[b>>2&14]=Ia(a,p(a)<<16>>16,c)};
A[105]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.reg32s[b>>3&7]=Ka(a,s(a),c)};z[106]=function(a){M(a,n(a))};A[106]=function(a){N(a,n(a))};z[107]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b))<<16>>16:a.reg16s[b<<1&14];a.reg16[b>>2&14]=Ia(a,n(a),c)};A[107]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.reg32s[b>>3&7]=Ka(a,n(a),c)};
z[108]=A[108]=function(a){a:{var b=a.reg16[4];Ab(a,b,1);var c,d=a.flags&1024?-1:1,e=!1;c=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;if(0!==a.repeat_string_prefix){var f=a.regv[a.reg_vcx]>>>0,g=f;if(0===f)break a;var r=16384,t=d>>31|1;a.paging&&(r=Math.min(r,(t>>1^~c)&4095),c=y(a,c));do a.memory.write8(c,a.io.port_read8(b)),c+=t,e=0!==--f&&!0;while(e&&r--);a.regv[a.reg_vdi]+=d*(g-f)|0;a.regv[a.reg_vcx]=f;a.timestamp_counter+=g-f}else c=y(a,c),a.memory.write8(c,a.io.port_read8(b)),a.regv[a.reg_vdi]+=
d;e&&(a.instruction_pointer=a.previous_ip)}};
z[109]=function(a){a:{var b=a.reg16[4];Ab(a,b,2);var c,d=a.flags&1024?-2:2,e=!1;c=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;if(0!==a.repeat_string_prefix){var f=a.regv[a.reg_vcx]>>>0,g=f;if(0===f)break a;var r=16384;if(c&1){do S(a,c,a.io.port_read16(b)),c+=d,a.regv[a.reg_vdi]+=d,e=0!==--a.regv[a.reg_vcx]&&!0;while(e&&r--)}else{var t=d>>31|1;a.paging&&(r=Math.min(r,(t>>1^~c)&4095),c=y(a,c),r>>=1);c>>>=1;do Bb(a.memory,c,a.io.port_read16(b)),c+=t,e=0!==--f&&!0;while(e&&r--);a.regv[a.reg_vdi]+=d*(g-f)|
0;a.regv[a.reg_vcx]=f;a.timestamp_counter+=g-f}}else S(a,c,a.io.port_read16(b)),a.regv[a.reg_vdi]+=d;e&&(a.instruction_pointer=a.previous_ip)}};
A[109]=function(a){a:{var b=a.reg16[4];Ab(a,b,4);var c,d=a.flags&1024?-4:4,e=!1;c=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;if(0!==a.repeat_string_prefix){var f=a.regv[a.reg_vcx]>>>0,g=f;if(0===f)break a;var r=16384;if(c&3){do T(a,c,a.io.port_read32(b)),c+=d,a.regv[a.reg_vdi]+=d,e=0!==--a.regv[a.reg_vcx]&&!0;while(e&&r--)}else{var t=d>>31|1;a.paging&&(r=Math.min(r,(t>>1^~c)&4095),c=y(a,c),r>>=2);c>>>=2;do Cb(a.memory,c,a.io.port_read32(b)),c+=t,e=0!==--f&&!0;while(e&&r--);a.regv[a.reg_vdi]+=d*(g-f)|
0;a.regv[a.reg_vcx]=f;a.timestamp_counter+=g-f}}else T(a,c,a.io.port_read32(b)),a.regv[a.reg_vdi]+=d;e&&(a.instruction_pointer=a.previous_ip)}};
z[110]=A[110]=function(a){a:{var b=a.reg16[4];Ab(a,b,1);var c,d=a.flags&1024?-1:1,e=!1;c=Db(a,3)+a.regv[a.reg_vsi]|0;if(0!==a.repeat_string_prefix){var f=a.regv[a.reg_vcx]>>>0,g=f;if(0===f)break a;var r=16384,t=d>>31|1;a.paging&&(r=(t>>1^~c)&4095,c=R(a,c));do a.io.port_write8(b,a.memory.read8(c)),c+=t,e=0!==--f&&!0;while(e&&r--);a.regv[a.reg_vsi]+=d*(g-f)|0;a.regv[a.reg_vcx]=f;a.timestamp_counter+=g-f}else c=R(a,c),a.io.port_write8(b,a.memory.read8(c)),a.regv[a.reg_vsi]+=d;e&&(a.instruction_pointer=
a.previous_ip)}};
z[111]=function(a){a:{var b=a.reg16[4];Ab(a,b,2);var c,d=a.flags&1024?-2:2,e=!1;c=Db(a,3)+a.regv[a.reg_vsi]|0;if(0!==a.repeat_string_prefix){var f=a.regv[a.reg_vcx]>>>0,g=f;if(0===f)break a;var r=16384;if(c&1){do a.io.port_write16(b,J(a,c)),c+=d,a.regv[a.reg_vsi]+=d,e=0!==--a.regv[a.reg_vcx]&&!0;while(e&&r--)}else{var t=d>>31|1;a.paging&&(r=(t>>1^~c)&4095,c=R(a,c),r>>=1);c>>>=1;do a.io.port_write16(b,Eb(a.memory,c)),c+=t,e=0!==--f&&!0;while(e&&r--);a.regv[a.reg_vsi]+=d*(g-f)|0;a.regv[a.reg_vcx]=f;
a.timestamp_counter+=g-f}}else a.io.port_write16(b,J(a,c)),a.regv[a.reg_vsi]+=d;e&&(a.instruction_pointer=a.previous_ip)}};
A[111]=function(a){a:{var b=a.reg16[4];Ab(a,b,4);var c,d=a.flags&1024?-4:4,e=!1;c=Db(a,3)+a.regv[a.reg_vsi]|0;if(0!==a.repeat_string_prefix){var f=a.regv[a.reg_vcx]>>>0,g=f;if(0===f)break a;var r=16384;if(c&3){do a.io.port_write32(b,L(a,c)),c+=d,a.regv[a.reg_vsi]+=d,e=0!==--a.regv[a.reg_vcx]&&!0;while(e&&r--)}else{var t=d>>31|1;a.paging&&(r=(t>>1^~c)&4095,c=R(a,c),r>>=2);c>>>=2;do a.io.port_write32(b,Fb(a.memory,c)),c+=t,e=0!==--f&&!0;while(e&&r--);a.regv[a.reg_vsi]+=d*(g-f)|0;a.regv[a.reg_vcx]=f;
a.timestamp_counter+=g-f}}else a.io.port_write32(b,L(a,c)),a.regv[a.reg_vsi]+=d;e&&(a.instruction_pointer=a.previous_ip)}};z[112]=A[112]=function(a){a.test_o()&&(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};z[113]=A[113]=function(a){a.test_o()||(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};
z[114]=A[114]=function(a){a.test_b()&&(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};z[115]=A[115]=function(a){a.test_b()||(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};z[116]=A[116]=function(a){a.test_z()&&(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};
z[117]=A[117]=function(a){a.test_z()||(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};z[118]=A[118]=function(a){Gb(a)&&(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};z[119]=A[119]=function(a){Gb(a)||(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};
z[120]=A[120]=function(a){a.test_s()&&(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};z[121]=A[121]=function(a){a.test_s()||(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};z[122]=A[122]=function(a){a.test_p()&&(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};
z[123]=A[123]=function(a){a.test_p()||(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};z[124]=A[124]=function(a){Hb(a)&&(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};z[125]=A[125]=function(a){Hb(a)||(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};
z[126]=A[126]=function(a){Ib(a)&&(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};z[127]=A[127]=function(a){Ib(a)||(a.instruction_pointer=a.instruction_pointer+n(a)|0);a.instruction_pointer++;a.last_instr_jump=!0};
z[128]=A[128]=function(a){var b=u(a);if(56===(b&56)){var c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];a.sub(c,u(a),7)}else{var d,e,f;192>b?(e=y(a,a.modrm_resolve(b)),c=a.memory.read8(e)):c=a.reg8[b<<2&12|b>>2&1];f=0;d=u(a);switch(b>>3&7){case 0:f=a.add(c,d,7);break;case 1:f=La(a,c,d,7);break;case 2:f=Ba(a,c,d,7);break;case 3:f=Ea(a,c,d,7);break;case 4:f=v(a,c,d,7);break;case 5:f=a.sub(c,d,7);break;case 6:f=Ma(a,c,d,7);break;case 7:f=Jb.bind(this,0)(c,d)}192>b?a.memory.write8(e,f):a.reg8[b<<
2&12|b>>2&1]=f}};
z[129]=function(a){var b=u(a);if(56===(b&56)){var c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.sub(c,p(a),15)}else{var d,e,f=0,g;192>b?(c=a.modrm_resolve(b),e=y(a,c),a.paging&&4095===(c&4095)?(f=y(a,c+1),c=E(a,e,f)):c=a.memory.read16(e)):c=a.reg16[b<<1&14];g=0;d=p(a);switch(b>>3&7){case 0:g=a.add(c,d,15);break;case 1:g=La(a,c,d,15);break;case 2:g=Ba(a,c,d,15);break;case 3:g=Ea(a,c,d,15);break;case 4:g=v(a,c,d,15);break;case 5:g=a.sub(c,d,15);break;case 6:g=Ma(a,c,d,15);break;case 7:g=Jb.bind(this,
0)(c,d)}192>b?f?F(a,e,f,g):a.memory.write16(e,g):a.reg16[b<<1&14]=g}};
A[129]=function(a){var b=u(a);if(56===(b&56)){var c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.sub(c,s(a),31)}else{var d,e,f=0,g;192>b?(c=a.modrm_resolve(b),e=y(a,c),a.paging&&4093<=(c&4095)?(f=y(a,c+3),c=G(a,e,f)):c=H(a.memory,e)):c=a.reg32s[b&7];g=0;d=s(a);switch(b>>3&7){case 0:g=a.add(c,d,31);break;case 1:g=La(a,c,d,31);break;case 2:g=Ba(a,c,d,31);break;case 3:g=Ea(a,c,d,31);break;case 4:g=v(a,c,d,31);break;case 5:g=a.sub(c,d,31);break;case 6:g=Ma(a,c,d,31);break;case 7:g=Jb.bind(this,0)(c,
d)}192>b?f?I(a,e,f,g):a.memory.write32(e,g):a.reg32s[b&7]=g}};z[130]=A[130]=function(a){a.table[128](a)};
z[131]=function(a){var b=u(a);if(56===(b&56)){var c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.sub(c,n(a),15)}else{var d,e,f=0,g;192>b?(c=a.modrm_resolve(b),e=y(a,c),a.paging&&4095===(c&4095)?(f=y(a,c+1),c=E(a,e,f)):c=a.memory.read16(e)):c=a.reg16[b<<1&14];g=0;d=n(a);switch(b>>3&7){case 0:g=a.add(c,d,15);break;case 1:g=La(a,c,d,15);break;case 2:g=Ba(a,c,d,15);break;case 3:g=Ea(a,c,d,15);break;case 4:g=v(a,c,d,15);break;case 5:g=a.sub(c,d,15);break;case 6:g=Ma(a,c,d,15);break;case 7:g=Jb.bind(this,
0)(c,d)}192>b?f?F(a,e,f,g):a.memory.write16(e,g):a.reg16[b<<1&14]=g}};
A[131]=function(a){var b=u(a);if(56===(b&56)){var c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.sub(c,n(a),31)}else{var d,e,f=0,g;192>b?(c=a.modrm_resolve(b),e=y(a,c),a.paging&&4093<=(c&4095)?(f=y(a,c+3),c=G(a,e,f)):c=H(a.memory,e)):c=a.reg32s[b&7];g=0;d=n(a);switch(b>>3&7){case 0:g=a.add(c,d,31);break;case 1:g=La(a,c,d,31);break;case 2:g=Ba(a,c,d,31);break;case 3:g=Ea(a,c,d,31);break;case 4:g=v(a,c,d,31);break;case 5:g=a.sub(c,d,31);break;case 6:g=Ma(a,c,d,31);break;case 7:g=Jb.bind(this,0)(c,
d)}192>b?f?I(a,e,f,g):a.memory.write32(e,g):a.reg32s[b&7]=g}};z[132]=A[132]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];v(a,c,a.reg8[b>>1&12|b>>5&1],7)};z[133]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];v(a,c,a.reg16[b>>2&14],15)};A[133]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];v(a,c,a.reg32s[b>>3&7],31)};
z[134]=A[134]=function(a){var b=u(a),c,d;192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1];var e=b>>1&12|b>>5&1,f=a.reg8[e];a.reg8[e]=c;192>b?a.memory.write8(d,f):a.reg8[b<<2&12|b>>2&1]=f};z[135]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];var f=b>>2&14,g=a.reg16[f];a.reg16[f]=c;192>b?e?F(a,d,e,g):a.memory.write16(d,g):a.reg16[b<<1&14]=g};
A[135]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];var f=b>>3&7,g=a.reg32s[f];a.reg32s[f]=c;192>b?e?I(a,d,e,g):a.memory.write32(d,g):a.reg32s[b&7]=g};z[136]=A[136]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=a.reg8[b>>1&12|b>>5&1];192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};
z[137]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=a.reg16[b>>2&14];192>b?S(a,c,d):a.reg16[b<<1&14]=d};A[137]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=a.reg32s[b>>3&7];192>b?T(a,c,d):a.reg32[b&7]=d};z[138]=A[138]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];a.reg8[b>>1&12|b>>5&1]=c};z[139]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.reg16[b>>2&14]=c};
A[139]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.reg32s[b>>3&7]=c};z[140]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=a.sreg[b>>3&7];192>b?S(a,c,d):a.reg16[b<<1&14]=d};A[140]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=a.sreg[b>>3&7];192>b?T(a,c,d):a.reg32[b&7]=d};z[141]=function(a){var b=u(a);192<=b&&V(a);a.segment_prefix=9;a.reg16[(b>>3&7)<<1]=a.modrm_resolve(b);a.segment_prefix=-1};
A[141]=function(a){var b=u(a);192<=b&&V(a);a.segment_prefix=9;a.reg32s[b>>3&7]=a.modrm_resolve(b);a.segment_prefix=-1};z[142]=A[142]=function(a){var b=u(a),c=b>>3&7,b=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];O(a,c,b)};z[143]=function(a){var b=u(a),c=J(a,xb(a,0));a.stack_reg[a.reg_vsp]+=2;192>b?(b=a.modrm_resolve(b),a.stack_reg[a.reg_vsp]-=2,S(a,b,c),a.stack_reg[a.reg_vsp]+=2):a.reg16[b<<1&14]=c};
A[143]=function(a){var b=u(a),c=L(a,xb(a,0));a.stack_reg[a.reg_vsp]+=4;192>b?(b=a.modrm_resolve(b),a.stack_reg[a.reg_vsp]-=4,T(a,b,c),a.stack_reg[a.reg_vsp]+=4):a.reg32s[b&7]=c};z[144]=function(a){Kb(a,0)};A[144]=function(a){Lb(a,0)};z[145]=function(a){Kb(a,2)};A[145]=function(a){Lb(a,1)};z[146]=function(a){Kb(a,4)};A[146]=function(a){Lb(a,2)};z[147]=function(a){Kb(a,6)};A[147]=function(a){Lb(a,3)};z[148]=function(a){Kb(a,8)};A[148]=function(a){Lb(a,4)};z[149]=function(a){Kb(a,10)};
A[149]=function(a){Lb(a,5)};z[150]=function(a){Kb(a,12)};A[150]=function(a){Lb(a,6)};z[151]=function(a){Kb(a,14)};A[151]=function(a){Lb(a,7)};z[144]=A[144]=function(){};z[152]=function(a){a.reg16[0]=a.reg8s[0]};A[152]=function(a){a.reg32s[0]=a.reg16s[0]};z[153]=function(a){a.reg16[4]=a.reg16s[0]>>15};A[153]=function(a){a.reg32s[2]=a.reg32s[0]>>31};
z[154]=function(a){var b=p(a),c=p(a);Mb(a,xb(a,-4),4);M(a,a.sreg[1]);M(a,Nb(a));O(a,1,c);a.instruction_pointer=a.segment_offsets[1]+b|0;a.last_instr_jump=!0};A[154]=function(a){var b=s(a),c=p(a);Mb(a,xb(a,-8),8);N(a,a.sreg[1]);N(a,Nb(a));O(a,1,c);a.instruction_pointer=a.segment_offsets[1]+b|0;a.last_instr_jump=!0};z[155]=A[155]=function(a){10===(a.cr0&10)&&Ob(a)};z[156]=function(a){a.flags&131072&&3>(a.flags>>12&3)?W(a,0):(Pb(a),M(a,a.flags))};
A[156]=function(a){a.flags&131072&&3>(a.flags>>12&3)?W(a,0):(Pb(a),N(a,a.flags&-196609))};z[157]=function(a){a.flags&131072&&3>(a.flags>>12&3)&&W(a,0);Qb(a,a.flags&-65536|P(a));Rb(a)};A[157]=function(a){a.flags&131072&&3>(a.flags>>12&3)&&W(a,0);Qb(a,Q(a));Rb(a)};z[158]=A[158]=function(a){a.flags=a.flags&-256|a.reg8[1];a.flags=a.flags&4161493|2;a.flags_changed=0};z[159]=A[159]=function(a){Pb(a);a.reg8[1]=a.flags};z[160]=A[160]=function(a){var b=w(a,Sb(a));a.reg8[0]=b};
z[161]=function(a){var b=J(a,Sb(a));a.reg16[0]=b};A[161]=function(a){var b=L(a,Sb(a));a.reg32s[0]=b};z[162]=A[162]=function(a){U(a,Sb(a),a.reg8[0])};z[163]=function(a){S(a,Sb(a),a.reg16[0])};A[163]=function(a){T(a,Sb(a),a.reg32s[0])};
z[164]=A[164]=function(a){a:{var b,c,d=a.flags&1024?-1:1,e=!1;c=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;b=Db(a,3)+a.regv[a.reg_vsi]|0;if(0!==a.repeat_string_prefix){var f=a.regv[a.reg_vcx]>>>0,g=f;if(0===f)break a;var r=16384,t=d>>31|1;a.paging&&(r=(t>>1^~b)&4095,b=R(a,b),r=Math.min(r,(t>>1^~c)&4095),c=y(a,c));do a.memory.write8(c,a.memory.read8(b)),c+=t,b+=t,e=0!==--f&&!0;while(e&&r--);d=d*(g-f)|0;a.regv[a.reg_vdi]+=d;a.regv[a.reg_vsi]+=d;a.regv[a.reg_vcx]=f;a.timestamp_counter+=g-f}else b=R(a,
b),c=y(a,c),a.memory.write8(c,a.memory.read8(b)),a.regv[a.reg_vdi]+=d,a.regv[a.reg_vsi]+=d;e&&(a.instruction_pointer=a.previous_ip)}};
z[165]=function(a){a:{var b,c,d=a.flags&1024?-2:2,e=!1;c=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;b=Db(a,3)+a.regv[a.reg_vsi]|0;if(0!==a.repeat_string_prefix){var f=a.regv[a.reg_vcx]>>>0,g=f;if(0===f)break a;var r=16384;if(c&1||b&1){do S(a,c,J(a,b)),c+=d,a.regv[a.reg_vdi]+=d,b+=d,a.regv[a.reg_vsi]+=d,e=0!==--a.regv[a.reg_vcx]&&!0;while(e&&r--)}else{var t=d>>31|1;a.paging&&(r=(t>>1^~b)&4095,b=R(a,b),r=Math.min(r,(t>>1^~c)&4095),c=y(a,c),r>>=1);c>>>=1;b>>>=1;do Bb(a.memory,c,Eb(a.memory,b)),c+=t,b+=
t,e=0!==--f&&!0;while(e&&r--);d=d*(g-f)|0;a.regv[a.reg_vdi]+=d;a.regv[a.reg_vsi]+=d;a.regv[a.reg_vcx]=f;a.timestamp_counter+=g-f}}else S(a,c,J(a,b)),a.regv[a.reg_vdi]+=d,a.regv[a.reg_vsi]+=d;e&&(a.instruction_pointer=a.previous_ip)}};
A[165]=function(a){a:{if(0!==a.repeat_string_prefix){var b=Db(a,3)+a.regv[a.reg_vsi],c=a.segment_offsets[0]+a.regv[a.reg_vdi],d=a.regv[a.reg_vcx]>>>0;if(!d)break a;var e=a.paging?4095:3;if(0===(c&e)&&0===(b&e)&&0===(a.flags&1024)&&(e=!1,a.paging&&(b=R(a,b),c=y(a,c),1024<d&&(d=1024,e=!0)),!a.io.in_mmap_range(b,d)&&!a.io.in_mmap_range(c,d))){var f=d<<2;a.regv[a.reg_vcx]-=d;a.regv[a.reg_vdi]+=f;a.regv[a.reg_vsi]+=f;b>>=2;a.memory.mem32s.set(a.memory.mem32s.subarray(b,b+d),c>>2);e&&(a.instruction_pointer=
a.previous_ip);break a}}f=a.flags&1024?-4:4;e=!1;c=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;b=Db(a,3)+a.regv[a.reg_vsi]|0;if(0!==a.repeat_string_prefix){var g=d=a.regv[a.reg_vcx]>>>0;if(0===d)break a;var r=16384;if(c&3||b&3){do T(a,c,L(a,b)),c+=f,a.regv[a.reg_vdi]+=f,b+=f,a.regv[a.reg_vsi]+=f,e=0!==--a.regv[a.reg_vcx]&&!0;while(e&&r--)}else{var t=f>>31|1;a.paging&&(r=(t>>1^~b)&4095,b=R(a,b),r=Math.min(r,(t>>1^~c)&4095),c=y(a,c),r>>=2);c>>>=2;b>>>=2;do Cb(a.memory,c,Fb(a.memory,b)),c+=t,b+=t,e=0!==
--d&&!0;while(e&&r--);f=f*(g-d)|0;a.regv[a.reg_vdi]+=f;a.regv[a.reg_vsi]+=f;a.regv[a.reg_vcx]=d;a.timestamp_counter+=g-d}}else T(a,c,L(a,b)),a.regv[a.reg_vdi]+=f,a.regv[a.reg_vsi]+=f;e&&(a.instruction_pointer=a.previous_ip)}};
z[166]=A[166]=function(a){a:{var b,c;c=0;var d,e,f=a.flags&1024?-1:1,g=!1;c=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;b=Db(a,3)+a.regv[a.reg_vsi]|0;if(0!==a.repeat_string_prefix){var r=a.regv[a.reg_vcx]>>>0,t=r;if(0===r)break a;var x=16384,B=f>>31|1;a.paging?(x=(B>>1^~b)&4095,e=R(a,b),x=Math.min(x,(B>>1^~c)&4095),d=R(a,c)):(d=c,e=b);do c=a.memory.read8(d),b=a.memory.read8(e),d+=B,e+=B,g=0!==--r&&b===c===(2===a.repeat_string_prefix);while(g&&x--);f=f*(t-r)|0;a.regv[a.reg_vdi]+=f;a.regv[a.reg_vsi]+=
f;a.regv[a.reg_vcx]=r;a.timestamp_counter+=t-r}else e=R(a,b),d=R(a,c),c=a.memory.read8(d),b=a.memory.read8(e),a.regv[a.reg_vdi]+=f,a.regv[a.reg_vsi]+=f;a.sub(b,c,7);g&&(a.instruction_pointer=a.previous_ip)}};
z[167]=function(a){a:{var b,c,d,e=0,f=a.flags&1024?-2:2,g=!1;c=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;b=Db(a,3)+a.regv[a.reg_vsi]|0;if(0!==a.repeat_string_prefix){var r=a.regv[a.reg_vcx]>>>0,t=r;if(0===r)break a;var x=16384;if(c&1||b&1){do e=J(a,c),d=J(a,b),c+=f,a.regv[a.reg_vdi]+=f,b+=f,a.regv[a.reg_vsi]+=f,g=0!==--a.regv[a.reg_vcx]&&d===e===(2===a.repeat_string_prefix);while(g&&x--)}else{var B=f>>31|1;a.paging&&(x=(B>>1^~b)&4095,b=R(a,b),x=Math.min(x,(B>>1^~c)&4095),c=R(a,c),x>>=1);c>>>=1;b>>>=
1;do e=Eb(a.memory,c),d=Eb(a.memory,b),c+=B,b+=B,g=0!==--r&&d===e===(2===a.repeat_string_prefix);while(g&&x--);f=f*(t-r)|0;a.regv[a.reg_vdi]+=f;a.regv[a.reg_vsi]+=f;a.regv[a.reg_vcx]=r;a.timestamp_counter+=t-r}}else e=J(a,c),d=J(a,b),a.regv[a.reg_vdi]+=f,a.regv[a.reg_vsi]+=f;a.sub(d,e,15);g&&(a.instruction_pointer=a.previous_ip)}};
A[167]=function(a){a:{var b,c,d,e=0,f=a.flags&1024?-4:4,g=!1;c=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;b=Db(a,3)+a.regv[a.reg_vsi]|0;if(0!==a.repeat_string_prefix){var r=a.regv[a.reg_vcx]>>>0,t=r;if(0===r)break a;var x=16384;if(c&3||b&3){do e=L(a,c),d=L(a,b),c+=f,a.regv[a.reg_vdi]+=f,b+=f,a.regv[a.reg_vsi]+=f,g=0!==--a.regv[a.reg_vcx]&&d===e===(2===a.repeat_string_prefix);while(g&&x--)}else{var B=f>>31|1;a.paging&&(x=(B>>1^~b)&4095,b=R(a,b),x=Math.min(x,(B>>1^~c)&4095),c=R(a,c),x>>=2);c>>>=2;b>>>=
2;do e=Fb(a.memory,c),d=Fb(a.memory,b),c+=B,b+=B,g=0!==--r&&d===e===(2===a.repeat_string_prefix);while(g&&x--);f=f*(t-r)|0;a.regv[a.reg_vdi]+=f;a.regv[a.reg_vsi]+=f;a.regv[a.reg_vcx]=r;a.timestamp_counter+=t-r}}else e=L(a,c),d=L(a,b),a.regv[a.reg_vdi]+=f,a.regv[a.reg_vsi]+=f;a.sub(d,e,31);g&&(a.instruction_pointer=a.previous_ip)}};z[168]=A[168]=function(a){v(a,a.reg8[0],u(a),7)};z[169]=function(a){v(a,a.reg16[0],p(a),15)};A[169]=function(a){v(a,a.reg32s[0],s(a),31)};
z[170]=A[170]=function(a){a:{var b=a.reg8[0],c,d=a.flags&1024?-1:1,e=!1;c=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;if(0!==a.repeat_string_prefix){var f=a.regv[a.reg_vcx]>>>0,g=f;if(0===f)break a;var r=16384,t=d>>31|1;a.paging&&(r=Math.min(r,(t>>1^~c)&4095),c=y(a,c));do a.memory.write8(c,b),c+=t,e=0!==--f&&!0;while(e&&r--);a.regv[a.reg_vdi]+=d*(g-f)|0;a.regv[a.reg_vcx]=f;a.timestamp_counter+=g-f}else c=y(a,c),a.memory.write8(c,b),a.regv[a.reg_vdi]+=d;e&&(a.instruction_pointer=a.previous_ip)}};
z[171]=function(a){a:{var b=a.reg16[0],c,d=a.flags&1024?-2:2,e=!1;c=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;if(0!==a.repeat_string_prefix){var f=a.regv[a.reg_vcx]>>>0,g=f;if(0===f)break a;var r=16384;if(c&1){do S(a,c,b),c+=d,a.regv[a.reg_vdi]+=d,e=0!==--a.regv[a.reg_vcx]&&!0;while(e&&r--)}else{var t=d>>31|1;a.paging&&(r=Math.min(r,(t>>1^~c)&4095),c=y(a,c),r>>=1);c>>>=1;do Bb(a.memory,c,b),c+=t,e=0!==--f&&!0;while(e&&r--);a.regv[a.reg_vdi]+=d*(g-f)|0;a.regv[a.reg_vcx]=f;a.timestamp_counter+=g-f}}else S(a,
c,b),a.regv[a.reg_vdi]+=d;e&&(a.instruction_pointer=a.previous_ip)}};
A[171]=function(a){a:{var b=a.reg32s[0],c,d=a.flags&1024?-4:4,e=!1;c=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;if(0!==a.repeat_string_prefix){var f=a.regv[a.reg_vcx]>>>0,g=f;if(0===f)break a;var r=16384;if(c&3){do T(a,c,b),c+=d,a.regv[a.reg_vdi]+=d,e=0!==--a.regv[a.reg_vcx]&&!0;while(e&&r--)}else{var t=d>>31|1;a.paging&&(r=Math.min(r,(t>>1^~c)&4095),c=y(a,c),r>>=2);c>>>=2;do Cb(a.memory,c,b),c+=t,e=0!==--f&&!0;while(e&&r--);a.regv[a.reg_vdi]+=d*(g-f)|0;a.regv[a.reg_vcx]=f;a.timestamp_counter+=g-f}}else T(a,
c,b),a.regv[a.reg_vdi]+=d;e&&(a.instruction_pointer=a.previous_ip)}};
z[172]=A[172]=function(a){a:{var b,c=a.flags&1024?-1:1,d=!1;b=Db(a,3)+a.regv[a.reg_vsi]|0;if(0!==a.repeat_string_prefix){var e=a.regv[a.reg_vcx]>>>0,f=e;if(0===e)break a;var g=16384,r=c>>31|1;a.paging&&(g=(r>>1^~b)&4095,b=R(a,b));do a.reg8[0]=a.memory.read8(b),b+=r,d=0!==--e&&!0;while(d&&g--);a.regv[a.reg_vsi]+=c*(f-e)|0;a.regv[a.reg_vcx]=e;a.timestamp_counter+=f-e}else b=R(a,b),a.reg8[0]=a.memory.read8(b),a.regv[a.reg_vsi]+=c;d&&(a.instruction_pointer=a.previous_ip)}};
z[173]=function(a){a:{var b,c=a.flags&1024?-2:2,d=!1;b=Db(a,3)+a.regv[a.reg_vsi]|0;if(0!==a.repeat_string_prefix){var e=a.regv[a.reg_vcx]>>>0,f=e;if(0===e)break a;var g=16384;if(b&1){do a.reg16[0]=J(a,b),b+=c,a.regv[a.reg_vsi]+=c,d=0!==--a.regv[a.reg_vcx]&&!0;while(d&&g--)}else{var r=c>>31|1;a.paging&&(g=(r>>1^~b)&4095,b=R(a,b),g>>=1);b>>>=1;do a.reg16[0]=Eb(a.memory,b),b+=r,d=0!==--e&&!0;while(d&&g--);a.regv[a.reg_vsi]+=c*(f-e)|0;a.regv[a.reg_vcx]=e;a.timestamp_counter+=f-e}}else a.reg16[0]=J(a,
b),a.regv[a.reg_vsi]+=c;d&&(a.instruction_pointer=a.previous_ip)}};
A[173]=function(a){a:{var b,c=a.flags&1024?-4:4,d=!1;b=Db(a,3)+a.regv[a.reg_vsi]|0;if(0!==a.repeat_string_prefix){var e=a.regv[a.reg_vcx]>>>0,f=e;if(0===e)break a;var g=16384;if(b&3){do a.reg32s[0]=L(a,b),b+=c,a.regv[a.reg_vsi]+=c,d=0!==--a.regv[a.reg_vcx]&&!0;while(d&&g--)}else{var r=c>>31|1;a.paging&&(g=(r>>1^~b)&4095,b=R(a,b),g>>=2);b>>>=2;do a.reg32s[0]=Fb(a.memory,b),b+=r,d=0!==--e&&!0;while(d&&g--);a.regv[a.reg_vsi]+=c*(f-e)|0;a.regv[a.reg_vcx]=e;a.timestamp_counter+=f-e}}else a.reg32s[0]=L(a,
b),a.regv[a.reg_vsi]+=c;d&&(a.instruction_pointer=a.previous_ip)}};
z[174]=A[174]=function(a){a:{var b,c;b=0;var d,e=a.flags&1024?-1:1,f=!1;c=a.reg8[0];b=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;if(0!==a.repeat_string_prefix){var g=a.regv[a.reg_vcx]>>>0,r=g;if(0===g)break a;var t=16384,x=e>>31|1;a.paging?(t=Math.min(t,(x>>1^~b)&4095),d=R(a,b)):d=b;do b=a.memory.read8(d),d+=x,f=0!==--g&&c===b===(2===a.repeat_string_prefix);while(f&&t--);a.regv[a.reg_vdi]+=e*(r-g)|0;a.regv[a.reg_vcx]=g;a.timestamp_counter+=r-g}else d=R(a,b),b=a.memory.read8(d),a.regv[a.reg_vdi]+=e;
a.sub(c,b,7);f&&(a.instruction_pointer=a.previous_ip)}};
z[175]=function(a){a:{var b,c,d=0,e=a.flags&1024?-2:2,f=!1;c=a.reg16[0];b=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;if(0!==a.repeat_string_prefix){var g=a.regv[a.reg_vcx]>>>0,r=g;if(0===g)break a;var t=16384;if(b&1){do d=J(a,b),b+=e,a.regv[a.reg_vdi]+=e,f=0!==--a.regv[a.reg_vcx]&&c===d===(2===a.repeat_string_prefix);while(f&&t--)}else{var x=e>>31|1;a.paging&&(t=Math.min(t,(x>>1^~b)&4095),b=R(a,b),t>>=1);b>>>=1;do d=Eb(a.memory,b),b+=x,f=0!==--g&&c===d===(2===a.repeat_string_prefix);while(f&&t--);a.regv[a.reg_vdi]+=
e*(r-g)|0;a.regv[a.reg_vcx]=g;a.timestamp_counter+=r-g}}else d=J(a,b),a.regv[a.reg_vdi]+=e;a.sub(c,d,15);f&&(a.instruction_pointer=a.previous_ip)}};
A[175]=function(a){a:{var b,c,d=0,e=a.flags&1024?-4:4,f=!1;c=a.reg32s[0];b=a.segment_offsets[0]+a.regv[a.reg_vdi]|0;if(0!==a.repeat_string_prefix){var g=a.regv[a.reg_vcx]>>>0,r=g;if(0===g)break a;var t=16384;if(b&3){do d=L(a,b),b+=e,a.regv[a.reg_vdi]+=e,f=0!==--a.regv[a.reg_vcx]&&c===d===(2===a.repeat_string_prefix);while(f&&t--)}else{var x=e>>31|1;a.paging&&(t=Math.min(t,(x>>1^~b)&4095),b=R(a,b),t>>=2);b>>>=2;do d=Fb(a.memory,b),b+=x,f=0!==--g&&c===d===(2===a.repeat_string_prefix);while(f&&t--);
a.regv[a.reg_vdi]+=e*(r-g)|0;a.regv[a.reg_vcx]=g;a.timestamp_counter+=r-g}}else d=L(a,b),a.regv[a.reg_vdi]+=e;a.sub(c,d,31);f&&(a.instruction_pointer=a.previous_ip)}};z[176]=A[176]=function(a){a.reg8[0]=u(a)};z[177]=A[177]=function(a){a.reg8[4]=u(a)};z[178]=A[178]=function(a){a.reg8[8]=u(a)};z[179]=A[179]=function(a){a.reg8[12]=u(a)};z[180]=A[180]=function(a){a.reg8[1]=u(a)};z[181]=A[181]=function(a){a.reg8[5]=u(a)};z[182]=A[182]=function(a){a.reg8[9]=u(a)};z[183]=A[183]=function(a){a.reg8[13]=u(a)};
z[184]=function(a){a.reg16[0]=p(a)};A[184]=function(a){a.reg32s[0]=s(a)};z[185]=function(a){a.reg16[2]=p(a)};A[185]=function(a){a.reg32s[1]=s(a)};z[186]=function(a){a.reg16[4]=p(a)};A[186]=function(a){a.reg32s[2]=s(a)};z[187]=function(a){a.reg16[6]=p(a)};A[187]=function(a){a.reg32s[3]=s(a)};z[188]=function(a){a.reg16[8]=p(a)};A[188]=function(a){a.reg32s[4]=s(a)};z[189]=function(a){a.reg16[10]=p(a)};A[189]=function(a){a.reg32s[5]=s(a)};z[190]=function(a){a.reg16[12]=p(a)};
A[190]=function(a){a.reg32s[6]=s(a)};z[191]=function(a){a.reg16[14]=p(a)};A[191]=function(a){a.reg32s[7]=s(a)};
z[192]=A[192]=function(a){var b=u(a),c,d,e,f;192>b?(e=y(a,a.modrm_resolve(b)),d=a.memory.read8(e)):d=a.reg8[b<<2&12|b>>2&1];f=0;c=u(a)&31;switch(b>>3&7){case 0:f=Na(a,d,c);break;case 1:f=Ta(a,d,c);break;case 2:f=Qa(a,d,c);break;case 3:f=Xa(a,d,c);break;case 4:f=$a(a,d,c);break;case 5:f=cb(a,d,c);break;case 6:f=$a(a,d,c);break;case 7:f=fb(a,d,c)}192>b?a.memory.write8(e,f):a.reg8[b<<2&12|b>>2&1]=f};
z[193]=function(a){var b=u(a),c,d,e,f=0,g;192>b?(c=a.modrm_resolve(b),e=y(a,c),a.paging&&4095===(c&4095)?(f=y(a,c+1),d=E(a,e,f)):d=a.memory.read16(e)):d=a.reg16[b<<1&14];g=0;c=u(a)&31;switch(b>>3&7){case 0:g=Oa(a,d,c);break;case 1:g=Va(a,d,c);break;case 2:g=Ra(a,d,c);break;case 3:g=Ya(a,d,c);break;case 4:g=ab(a,d,c);break;case 5:g=db(a,d,c);break;case 6:g=ab(a,d,c);break;case 7:g=hb(a,d,c)}192>b?f?F(a,e,f,g):a.memory.write16(e,g):a.reg16[b<<1&14]=g};
A[193]=function(a){var b=u(a),c,d,e,f=0,g;192>b?(c=a.modrm_resolve(b),e=y(a,c),a.paging&&4093<=(c&4095)?(f=y(a,c+3),d=G(a,e,f)):d=H(a.memory,e)):d=a.reg32s[b&7];g=0;c=u(a)&31;switch(b>>3&7){case 0:g=Pa(a,d,c);break;case 1:g=Wa(a,d,c);break;case 2:g=Sa(a,d,c);break;case 3:g=Za(a,d,c);break;case 4:g=bb(a,d,c);break;case 5:g=eb(a,d,c);break;case 6:g=bb(a,d,c);break;case 7:g=ib(a,d,c)}192>b?f?I(a,e,f,g):a.memory.write32(e,g):a.reg32s[b&7]=g};
z[194]=function(a){var b=p(a);a.instruction_pointer=a.segment_offsets[1]+P(a)|0;a.stack_reg[a.reg_vsp]+=b;a.last_instr_jump=!0};A[194]=function(a){var b=p(a);a.instruction_pointer=a.segment_offsets[1]+Q(a)|0;a.stack_reg[a.reg_vsp]+=b;a.last_instr_jump=!0};z[195]=function(a){a.instruction_pointer=a.segment_offsets[1]+P(a)|0;a.last_instr_jump=!0};A[195]=function(a){a.instruction_pointer=a.segment_offsets[1]+Q(a)|0;a.last_instr_jump=!0};
z[196]=function(a){var b=u(a);192<=b&&V(a);Tb(a,0,a.modrm_resolve(b),b>>2&14)};A[196]=function(a){var b=u(a);192<=b&&V(a);Ub(a,0,a.modrm_resolve(b),b>>3&7)};z[197]=function(a){var b=u(a);192<=b&&V(a);Tb(a,3,a.modrm_resolve(b),b>>2&14)};A[197]=function(a){var b=u(a);192<=b&&V(a);Ub(a,3,a.modrm_resolve(b),b>>3&7)};z[198]=A[198]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=u(a);192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};
z[199]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=p(a);192>b?S(a,c,d):a.reg16[b<<1&14]=d};A[199]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=s(a);192>b?T(a,c,d):a.reg32[b&7]=d};z[200]=function(a){var b=p(a),c=u(a)&31,d,e;M(a,a.reg16[10]);d=a.reg16[8];if(0<c){e=a.reg16[5];for(var f=1;f<c;f++)e-=2,M(a,J(a,a.segment_offsets[2]+e|0));M(a,d)}a.reg16[10]=d;a.reg16[8]-=b};
A[200]=function(a){var b=p(a),c=u(a)&31,d,e;N(a,a.reg32s[5]);d=a.reg32s[4];if(0<c){e=a.reg32s[5];for(var f=1;f<c;f++)e-=4,N(a,L(a,a.segment_offsets[2]+e|0));N(a,d)}a.reg32s[5]=d;a.reg32s[4]-=b};z[201]=function(a){a.stack_reg[a.reg_vsp]=a.stack_reg[a.reg_vbp];a.reg16[10]=P(a)};A[201]=function(a){a.stack_reg[a.reg_vsp]=a.stack_reg[a.reg_vbp];a.reg32s[5]=Q(a)};
z[202]=function(a){R(a,a.segment_offsets[2]+a.stack_reg[a.reg_vsp]+4);var b=p(a),c=P(a);O(a,1,P(a));a.instruction_pointer=a.segment_offsets[1]+c|0;a.stack_reg[a.reg_vsp]+=b;a.last_instr_jump=!0};A[202]=function(a){R(a,a.segment_offsets[2]+a.stack_reg[a.reg_vsp]+8);var b=p(a),c=Q(a);O(a,1,Q(a)&65535);a.instruction_pointer=a.segment_offsets[1]+c|0;a.stack_reg[a.reg_vsp]+=b;a.last_instr_jump=!0};
z[203]=function(a){R(a,a.segment_offsets[2]+a.stack_reg[a.reg_vsp]+4);var b=P(a);O(a,1,P(a));a.instruction_pointer=a.segment_offsets[1]+b|0;a.last_instr_jump=!0};A[203]=function(a){R(a,a.segment_offsets[2]+a.stack_reg[a.reg_vsp]+8);var b=Q(a);O(a,1,Q(a)&65535);a.instruction_pointer=a.segment_offsets[1]+b|0;a.last_instr_jump=!0};z[204]=A[204]=function(a){Vb(a,3,!0,!1)};z[205]=A[205]=function(a){var b=u(a);Vb(a,b,!0,!1)};z[206]=A[206]=function(a){a.getof()&&Vb(a,4,!0,!1)};
z[207]=function(a){if(!a.protected_mode||a.flags&131072&&3===(a.flags>>12&3)){var b=P(a);O(a,1,P(a));var c=P(a);a.instruction_pointer=b+a.segment_offsets[1]|0;Qb(a,c);Rb(a)}else throw a.flags&131072&&W(a,0),a.debug.unimpl("16 bit iret in protected mode");a.last_instr_jump=!0};
A[207]=function(a){a:if(!a.protected_mode||a.flags&131072&&3===(a.flags>>12&3)){var b=Q(a);O(a,1,Q(a)&65535);var c=Q(a);a.instruction_pointer=b+a.segment_offsets[1]|0;Qb(a,c);Rb(a)}else{a.flags&131072&&W(a,0);a.instruction_pointer=Q(a);a.sreg[1]=Q(a);c=Q(a);if(c&131072){if(0===a.cpl){Qb(a,c);a.flags|=131072;O(a,1,a.sreg[1]);a.instruction_pointer=a.instruction_pointer+a.segment_offsets[1]|0;var b=Q(a),d=Q(a);O(a,0,Q(a)&65535);O(a,3,Q(a)&65535);O(a,4,Q(a)&65535);O(a,5,Q(a)&65535);a.reg32s[4]=b;O(a,
2,d&65535);a.cpl=3;Wb(a,!1);break a}c&=-131073}var e=Xb(a,a.sreg[1]);if(e.is_null)throw a.debug.unimpl("is null");if(!e.is_present)throw a.debug.unimpl("not present");if(!e.is_executable)throw a.debug.unimpl("not exec");if(e.rpl<a.cpl)throw a.debug.unimpl("rpl < cpl");if(e.dc_bit&&e.dpl>e.rpl)throw a.debug.unimpl("conforming and dpl > rpl");e.rpl>a.cpl?(b=Q(a),d=Q(a),a.reg32s[4]=b,Qb(a,c),a.cpl=e.rpl,O(a,2,d&65535),a.last_virt_eip=-1):Qb(a,c);e.size!==a.is_32&&Wb(a,e.size);a.segment_limits[1]=e.effective_limit;
a.segment_offsets[1]=e.base;a.instruction_pointer=a.instruction_pointer+a.segment_offsets[1]|0;Rb(a);a.last_instr_jump=!0}};
z[208]=A[208]=function(a){var b=u(a),c,d,e;192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1];e=0;switch(b>>3&7){case 0:e=Na(a,c,1);break;case 1:e=Ta(a,c,1);break;case 2:e=Qa(a,c,1);break;case 3:e=Xa(a,c,1);break;case 4:e=$a(a,c,1);break;case 5:e=cb(a,c,1);break;case 6:e=$a(a,c,1);break;case 7:e=fb(a,c,1)}192>b?a.memory.write8(d,e):a.reg8[b<<2&12|b>>2&1]=e};
z[209]=function(a){var b=u(a),c,d,e=0,f;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];f=0;switch(b>>3&7){case 0:f=Oa(a,c,1);break;case 1:f=Va(a,c,1);break;case 2:f=Ra(a,c,1);break;case 3:f=Ya(a,c,1);break;case 4:f=ab(a,c,1);break;case 5:f=db(a,c,1);break;case 6:f=ab(a,c,1);break;case 7:f=hb(a,c,1)}192>b?e?F(a,d,e,f):a.memory.write16(d,f):a.reg16[b<<1&14]=f};
A[209]=function(a){var b=u(a),c,d,e=0,f;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];f=0;switch(b>>3&7){case 0:f=Pa(a,c,1);break;case 1:f=Wa(a,c,1);break;case 2:f=Sa(a,c,1);break;case 3:f=Za(a,c,1);break;case 4:f=bb(a,c,1);break;case 5:f=eb(a,c,1);break;case 6:f=bb(a,c,1);break;case 7:f=ib(a,c,1)}192>b?e?I(a,d,e,f):a.memory.write32(d,f):a.reg32s[b&7]=f};
z[210]=A[210]=function(a){var b=u(a),c,d,e,f;192>b?(e=y(a,a.modrm_resolve(b)),d=a.memory.read8(e)):d=a.reg8[b<<2&12|b>>2&1];f=0;c=a.reg8[4]&31;switch(b>>3&7){case 0:f=Na(a,d,c);break;case 1:f=Ta(a,d,c);break;case 2:f=Qa(a,d,c);break;case 3:f=Xa(a,d,c);break;case 4:f=$a(a,d,c);break;case 5:f=cb(a,d,c);break;case 6:f=$a(a,d,c);break;case 7:f=fb(a,d,c)}192>b?a.memory.write8(e,f):a.reg8[b<<2&12|b>>2&1]=f};
z[211]=function(a){var b=u(a),c,d,e,f=0,g;192>b?(c=a.modrm_resolve(b),e=y(a,c),a.paging&&4095===(c&4095)?(f=y(a,c+1),d=E(a,e,f)):d=a.memory.read16(e)):d=a.reg16[b<<1&14];g=0;c=a.reg8[4]&31;switch(b>>3&7){case 0:g=Oa(a,d,c);break;case 1:g=Va(a,d,c);break;case 2:g=Ra(a,d,c);break;case 3:g=Ya(a,d,c);break;case 4:g=ab(a,d,c);break;case 5:g=db(a,d,c);break;case 6:g=ab(a,d,c);break;case 7:g=hb(a,d,c)}192>b?f?F(a,e,f,g):a.memory.write16(e,g):a.reg16[b<<1&14]=g};
A[211]=function(a){var b=u(a),c,d,e,f=0,g;192>b?(c=a.modrm_resolve(b),e=y(a,c),a.paging&&4093<=(c&4095)?(f=y(a,c+3),d=G(a,e,f)):d=H(a.memory,e)):d=a.reg32s[b&7];g=0;c=a.reg8[4]&31;switch(b>>3&7){case 0:g=Pa(a,d,c);break;case 1:g=Wa(a,d,c);break;case 2:g=Sa(a,d,c);break;case 3:g=Za(a,d,c);break;case 4:g=bb(a,d,c);break;case 5:g=eb(a,d,c);break;case 6:g=bb(a,d,c);break;case 7:g=ib(a,d,c)}192>b?f?I(a,e,f,g):a.memory.write32(e,g):a.reg32s[b&7]=g};
z[212]=A[212]=function(a){var b=u(a);if(0===b)Yb(a);else{var c=a.reg8[0];a.reg8[1]=c/b;a.reg8[0]=c%b;a.last_result=a.reg8[0];a.flags_changed=196;a.flags&=-2066}};z[213]=A[213]=function(a){var b=u(a);a.last_result=a.reg8[0]+a.reg8[1]*b;a.reg16[0]=a.last_result&255;a.last_op_size=7;a.flags_changed=196;a.flags&=-2066};z[214]=A[214]=function(a){a.reg8[0]=-a.getcf()};z[215]=A[215]=function(a){a.reg8[0]=a.address_size_32?w(a,Db(a,3)+a.reg32s[3]+a.reg8[0]):w(a,Db(a,3)+a.reg16[6]+a.reg8[0])};
z[216]=A[216]=function(a){var b=u(a);a.cr0&12&&Ob(a);if(192>b){var c=a.fpu;a=a.modrm_resolve(b);b=b>>3&7;a=Zb(c,a);var d=X(c);switch(b){case 0:c._st[c._stack_ptr]=d+a;break;case 1:c._st[c._stack_ptr]=d*a;break;case 2:$b(c,a);break;case 3:$b(c,a);Y(c);break;case 4:c._st[c._stack_ptr]=d-a;break;case 5:c._st[c._stack_ptr]=a-d;break;case 6:c._st[c._stack_ptr]=d/a;break;case 7:c._st[c._stack_ptr]=a/d}}else switch(c=a.fpu,a=b>>3&7,b=Z(c,b&7),d=X(c),a){case 0:c._st[c._stack_ptr]=d+b;break;case 1:c._st[c._stack_ptr]=
d*b;break;case 2:$b(c,b);break;case 3:$b(c,b);Y(c);break;case 4:c._st[c._stack_ptr]=d-b;break;case 5:c._st[c._stack_ptr]=b-d;break;case 6:c._st[c._stack_ptr]=d/b;break;case 7:c._st[c._stack_ptr]=b/d}};
z[217]=A[217]=function(a){var b=u(a);a.cr0&12&&Ob(a);if(192>b){var c=a.fpu;a=a.modrm_resolve(b);switch(b>>3&7){case 0:b=Zb(c,a);ac(c,b);break;case 1:$(c);break;case 2:b=X(c);c.float32[0]=b;T(c.cpu,a,c.float32_int[0]);break;case 3:b=X(c);c.float32[0]=b;T(c.cpu,a,c.float32_int[0]);Y(c);break;case 4:bc(c,a);break;case 5:c._control_word=J(c.cpu,a);break;case 6:cc(c,a);break;case 7:S(c.cpu,a,c._control_word)}}else switch(c=a.fpu,a=b&7,b>>3&7){case 0:b=Z(c,a);ac(c,b);break;case 1:b=Z(c,a);c._st[c._stack_ptr+
a&7]=X(c);c._st[c._stack_ptr]=b;break;case 2:switch(a){case 0:break;default:$(c)}break;case 3:$(c);break;case 4:b=X(c);switch(a){case 0:c._st[c._stack_ptr]=-b;break;case 1:c._st[c._stack_ptr]=Math.abs(b);break;case 4:c._status_word&=-18177;isNaN(b)?c._status_word|=17664:0===b?c._status_word|=16384:0>b&&(c._status_word|=256);break;case 5:c._status_word&=-18177;c._status_word|=c._st8[(c._stack_ptr+0&7)<<3|7]>>7<<9;c._status_word=c._stack_empty>>c._stack_ptr&1?c._status_word|16640:isNaN(b)?c._status_word|
256:0===b?c._status_word|16384:Infinity===b||-Infinity===b?c._status_word|1280:c._status_word|1024;break;default:$(c)}break;case 5:ac(c,c.constants[a]);break;case 6:b=X(c);switch(a){case 0:c._st[c._stack_ptr]=Math.pow(2,b)-1;break;case 1:c._st[c._stack_ptr+1&7]=Z(c,1)*Math.log(b)/Math.LN2;Y(c);break;case 2:c._st[c._stack_ptr]=Math.tan(b);ac(c,1);break;case 3:c._st[c._stack_ptr+1&7]=Math.atan2(Z(c,1),b);Y(c);break;case 4:$(c);break;case 5:c._st[c._stack_ptr]=b%Z(c,1);break;case 6:$(c);break;case 7:$(c)}break;
case 7:switch(b=X(c),a){case 0:c._st[c._stack_ptr]=b%Z(c,1);break;case 1:c._st[c._stack_ptr+1&7]=Z(c,1)*Math.log(b+1)/Math.LN2;Y(c);break;case 2:c._st[c._stack_ptr]=Math.sqrt(b);break;case 3:c._st[c._stack_ptr]=Math.sin(b);ac(c,Math.cos(b));break;case 4:c._st[c._stack_ptr]=dc(c,b);break;case 5:c._st[c._stack_ptr]=b*Math.pow(2,ec(Z(c,1)));break;case 6:c._st[c._stack_ptr]=Math.sin(b);break;case 7:c._st[c._stack_ptr]=Math.cos(b)}}};
z[218]=A[218]=function(a){var b=u(a);a.cr0&12&&Ob(a);if(192>b){var c=a.fpu;a=a.modrm_resolve(b);b=b>>3&7;a=L(c.cpu,a);var d=X(c);switch(b){case 0:c._st[c._stack_ptr]=d+a;break;case 1:c._st[c._stack_ptr]=d*a;break;case 2:$b(c,a);break;case 3:$b(c,a);Y(c);break;case 4:c._st[c._stack_ptr]=d-a;break;case 5:c._st[c._stack_ptr]=a-d;break;case 6:c._st[c._stack_ptr]=d/a;break;case 7:c._st[c._stack_ptr]=a/d}}else switch(c=a.fpu,a=b&7,b>>3&7){case 0:c.cpu.test_b()&&(c._st[c._stack_ptr]=Z(c,a),c._stack_empty&=
~(1<<c._stack_ptr));break;case 1:c.cpu.test_z()&&(c._st[c._stack_ptr]=Z(c,a),c._stack_empty&=~(1<<c._stack_ptr));break;case 2:Gb(c.cpu)&&(c._st[c._stack_ptr]=Z(c,a),c._stack_empty&=~(1<<c._stack_ptr));break;case 3:c.cpu.test_p()&&(c._st[c._stack_ptr]=Z(c,a),c._stack_empty&=~(1<<c._stack_ptr));break;case 5:1===a?(b=Z(c,1),$b(c,b),Y(c),Y(c)):$(c);break;default:$(c)}};
z[219]=A[219]=function(a){var b=u(a);a.cr0&12&&Ob(a);if(192>b){var c=a.fpu;a=a.modrm_resolve(b);switch(b>>3&7){case 0:b=L(c.cpu,a);ac(c,b);break;case 2:b=dc(c,X(c));2147483647>=b&&-2147483648<=b?T(c.cpu,a,b):(fc(c),T(c.cpu,a,-2147483648));break;case 3:b=dc(c,X(c));2147483647>=b&&-2147483648<=b?T(c.cpu,a,b):(fc(c),T(c.cpu,a,-2147483648));Y(c);break;case 5:ac(c,gc(c,a));break;case 7:Mb(c.cpu,a,10);hc(c,a,0);Y(c);break;default:$(c)}}else switch(c=a.fpu,a=b&7,b>>3&7){case 0:c.cpu.test_b()||(c._st[c._stack_ptr]=
Z(c,a),c._stack_empty&=~(1<<c._stack_ptr));break;case 1:c.cpu.test_z()||(c._st[c._stack_ptr]=Z(c,a),c._stack_empty&=~(1<<c._stack_ptr));break;case 2:Gb(c.cpu)||(c._st[c._stack_ptr]=Z(c,a),c._stack_empty&=~(1<<c._stack_ptr));break;case 3:c.cpu.test_p()||(c._st[c._stack_ptr]=Z(c,a),c._stack_empty&=~(1<<c._stack_ptr));break;case 4:227===b?ic(c):228!==b&&225!==b&&(226===b?c._status_word=0:$(c));break;case 5:b=Z(c,a);jc(c,b);break;case 6:jc(c,Z(c,a));break;default:$(c)}};
z[220]=A[220]=function(a){var b=u(a);a.cr0&12&&Ob(a);if(192>b){var c=a.fpu,d=a.modrm_resolve(b);a=b>>3&7;b=kc(c,d);d=X(c);switch(a){case 0:c._st[c._stack_ptr]=d+b;break;case 1:c._st[c._stack_ptr]=d*b;break;case 2:$b(c,b);break;case 3:$b(c,b);Y(c);break;case 4:c._st[c._stack_ptr]=d-b;break;case 5:c._st[c._stack_ptr]=b-d;break;case 6:c._st[c._stack_ptr]=d/b;break;case 7:c._st[c._stack_ptr]=b/d}}else{c=a.fpu;a=b>>3&7;var d=b&7,b=c._stack_ptr+d&7,d=Z(c,d),e=X(c);switch(a){case 0:c._st[b]=d+e;break;case 1:c._st[b]=
d*e;break;case 2:$b(c,d);break;case 3:$b(c,d);Y(c);break;case 4:c._st[b]=e-d;break;case 5:c._st[b]=d-e;break;case 6:c._st[b]=e/d;break;case 7:c._st[b]=d/e}}};
z[221]=A[221]=function(a){var b=u(a);a.cr0&12&&Ob(a);if(192>b){var c=a.fpu;a=a.modrm_resolve(b);switch(b>>3&7){case 0:b=kc(c,a);ac(c,b);break;case 1:$(c);break;case 2:lc(c,a);break;case 3:lc(c,a);Y(c);break;case 4:b=a;bc(c,b);b+=28;for(a=0;8>a;a++)c._st[a]=gc(c,b),b+=10;break;case 5:$(c);break;case 6:b=a;Mb(c.cpu,b,108);cc(c,b);b+=28;for(a=0;8>a;a++)hc(c,b,a-c._stack_ptr&7),b+=10;ic(c);break;case 7:S(c.cpu,a,c._status_word&-14337|c._stack_ptr<<11)}}else switch(c=a.fpu,a=b&7,b>>3&7){case 0:c._stack_empty|=
1<<(c._stack_ptr+a&7);break;case 2:c._st[c._stack_ptr+a&7]=X(c);break;case 3:0!==a&&(c._st[c._stack_ptr+a&7]=X(c));Y(c);break;case 4:b=Z(c,a);$b(c,b);break;case 5:b=Z(c,a);$b(c,b);Y(c);break;default:$(c)}};
z[222]=A[222]=function(a){var b=u(a);a.cr0&12&&Ob(a);if(192>b){var c=a.fpu,d=a.modrm_resolve(b);a=b>>3&7;b=J(c.cpu,d)<<16>>16;d=X(c);switch(a){case 0:c._st[c._stack_ptr]=d+b;break;case 1:c._st[c._stack_ptr]=d*b;break;case 2:$b(c,b);break;case 3:$b(c,b);Y(c);break;case 4:c._st[c._stack_ptr]=d-b;break;case 5:c._st[c._stack_ptr]=b-d;break;case 6:c._st[c._stack_ptr]=d/b;break;case 7:c._st[c._stack_ptr]=b/d}}else{c=a.fpu;a=b>>3&7;var b=b&7,d=c._stack_ptr+b&7,e=Z(c,b),f=X(c);switch(a){case 0:c._st[d]=e+
f;break;case 1:c._st[d]=e*f;break;case 2:$b(c,e);break;case 3:1===b?($b(c,c._st[d]),Y(c)):$(c);break;case 4:c._st[d]=f-e;break;case 5:c._st[d]=e-f;break;case 6:c._st[d]=f/e;break;case 7:c._st[d]=e/f}Y(c)}};
z[223]=A[223]=function(a){var b=u(a);a.cr0&12&&Ob(a);if(192>b){var c=a.fpu;a=a.modrm_resolve(b);switch(b>>3&7){case 0:a=J(c.cpu,a)<<16>>16;ac(c,a);break;case 1:$(c);break;case 2:b=dc(c,X(c));32767>=b&&-32768<=b?S(c.cpu,a,b):(fc(c),S(c.cpu,a,32768));break;case 3:b=dc(c,X(c));32767>=b&&-32768<=b?S(c.cpu,a,b):(fc(c),S(c.cpu,a,32768));Y(c);break;case 4:$(c);break;case 5:b=L(c.cpu,a)>>>0;a=L(c.cpu,a+4)>>>0;b+=4294967296*a;a>>31&&(b-=1.8446744073709552E19);ac(c,b);break;case 6:$(c);break;case 7:Mb(c.cpu,
a,8);var b=dc(c,X(c)),d,e;9223372036854775E3>b&&-9223372036854775E3<=b?(d=b|0,e=b/4294967296|0,0===e&&0>b&&(e=-1)):(d=0,e=-2147483648,fc(c));T(c.cpu,a,d);T(c.cpu,a+4,e);Y(c)}}else switch(c=a.fpu,a=b&7,b>>3&7){case 4:224===b?c.cpu.reg16[0]=c._status_word&-14337|c._stack_ptr<<11:$(c);break;case 5:a=Z(c,a);jc(c,a);Y(c);break;case 6:jc(c,Z(c,a));Y(c);break;default:$(c)}};
z[224]=A[224]=function(a){if(--a.regv[a.reg_vcx]&&!a.getzf()){var b=n(a);a.instruction_pointer=a.instruction_pointer+b|0}else a.instruction_pointer++;a.last_instr_jump=!0};z[225]=A[225]=function(a){if(--a.regv[a.reg_vcx]&&a.getzf()){var b=n(a);a.instruction_pointer=a.instruction_pointer+b|0}else a.instruction_pointer++;a.last_instr_jump=!0};z[226]=A[226]=function(a){a.loop()};
z[227]=A[227]=function(a){var b=n(a);0===a.regv[a.reg_vcx]&&(a.instruction_pointer=a.instruction_pointer+b|0);a.last_instr_jump=!0};z[228]=A[228]=function(a){var b=u(a);Ab(a,b,1);a.reg8[0]=a.io.port_read8(b)};z[229]=function(a){var b=u(a);Ab(a,b,2);a.reg16[0]=a.io.port_read16(b)};A[229]=function(a){var b=u(a);Ab(a,b,4);a.reg32s[0]=a.io.port_read32(b)};z[230]=A[230]=function(a){var b=u(a);Ab(a,b,1);a.io.port_write8(b,a.reg8[0])};z[231]=function(a){var b=u(a);Ab(a,b,2);a.io.port_write16(b,a.reg16[0])};
A[231]=function(a){var b=u(a);Ab(a,b,4);a.io.port_write32(b,a.reg32s[0])};z[232]=function(a){var b=p(a)<<16>>16;M(a,Nb(a));mc(a,b);a.last_instr_jump=!0};A[232]=function(a){var b=s(a);N(a,Nb(a));a.instruction_pointer=a.instruction_pointer+b|0;a.last_instr_jump=!0};z[233]=function(a){var b=p(a)<<16>>16;mc(a,b);a.last_instr_jump=!0};A[233]=function(a){var b=s(a);a.instruction_pointer=a.instruction_pointer+b|0;a.last_instr_jump=!0};
z[234]=function(a){var b=p(a);O(a,1,p(a));a.instruction_pointer=b+a.segment_offsets[1]|0;a.last_instr_jump=!0};A[234]=function(a){var b=s(a);O(a,1,p(a));a.instruction_pointer=b+a.segment_offsets[1]|0;a.last_instr_jump=!0};z[235]=A[235]=function(a){var b=n(a);a.instruction_pointer=a.instruction_pointer+b|0;a.last_instr_jump=!0};z[236]=A[236]=function(a){var b=a.reg16[4];Ab(a,b,1);a.reg8[0]=a.io.port_read8(b)};z[237]=function(a){var b=a.reg16[4];Ab(a,b,2);a.reg16[0]=a.io.port_read16(b)};
A[237]=function(a){var b=a.reg16[4];Ab(a,b,4);a.reg32s[0]=a.io.port_read32(b)};z[238]=A[238]=function(a){var b=a.reg16[4];Ab(a,b,1);a.io.port_write8(b,a.reg8[0])};z[239]=function(a){var b=a.reg16[4];Ab(a,b,2);a.io.port_write16(b,a.reg16[0])};A[239]=function(a){var b=a.reg16[4];Ab(a,b,4);a.io.port_write32(b,a.reg32s[0])};z[240]=A[240]=function(a){a.table[u(a)](a)};z[241]=A[241]=function(a){throw a.debug.unimpl("int1 instruction");};
z[242]=A[242]=function(a){a.repeat_string_prefix=1;a.table[u(a)](a);a.repeat_string_prefix=0};z[243]=A[243]=function(a){a.repeat_string_prefix=2;a.table[u(a)](a);a.repeat_string_prefix=0};z[244]=A[244]=function(a){a.cpl&&W(a,0);if(0===(a.flags&512))throw a.debug.show("cpu halted"),a.stopped=!0,"HALT";a.in_hlt=!0;throw 233495534;};z[245]=A[245]=function(a){a.flags=(a.flags|1)^a.getcf();a.flags_changed&=-2};
z[246]=A[246]=function(a){var b=u(a);switch(b>>3&7){case 0:var c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];v(a,c,u(a),7);break;case 1:192>b?c=w(a,a.modrm_resolve(b)):c=a.reg8[b<<2&12|b>>2&1];v(a,c,u(a),7);break;case 2:var d;192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1];c=~c;192>b?a.memory.write8(d,c):a.reg8[b<<2&12|b>>2&1]=c;break;case 3:192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1];c=Ha(a,c,7);192>b?a.memory.write8(d,c):
a.reg8[b<<2&12|b>>2&1]=c;break;case 4:192>b?c=w(a,a.modrm_resolve(b)):c=a.reg8[b<<2&12|b>>2&1];b=c*a.reg8[0];a.reg16[0]=b;a.flags=256>b?a.flags&-2050:a.flags|2049;a.flags_changed=0;break;case 5:192>b?c=w(a,a.modrm_resolve(b))<<24>>24:c=a.reg8s[b<<2&12|b>>2&1];b=c*a.reg8s[0];a.reg16[0]=b;a.flags=127<b||-128>b?a.flags|2049:a.flags&-2050;a.flags_changed=0;break;case 6:192>b?c=w(a,a.modrm_resolve(b)):c=a.reg8[b<<2&12|b>>2&1];b=c;d=a.reg16[0];c=d/b|0;256<=c||0===b?Yb(a):(a.reg8[0]=c,a.reg8[1]=d%b);break;
case 7:192>b?c=w(a,a.modrm_resolve(b))<<24>>24:c=a.reg8s[b<<2&12|b>>2&1],b=c,d=a.reg16s[0],c=d/b|0,128<=c||-129>=c||0===b?Yb(a):(a.reg8[0]=c,a.reg8[1]=d%b)}};
z[247]=function(a){var b=u(a);switch(b>>3&7){case 0:var c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];v(a,c,p(a),15);break;case 1:192>b?c=J(a,a.modrm_resolve(b)):c=a.reg16[b<<1&14];v(a,c,p(a),15);break;case 2:var d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=~c;192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c;break;case 3:e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,
c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=Ha(a,c,15);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c;break;case 4:192>b?c=J(a,a.modrm_resolve(b)):c=a.reg16[b<<1&14];b=c*a.reg16[0];d=b>>>16;a.reg16[0]=b;a.reg16[4]=d;a.flags=0===d?a.flags&-2050:a.flags|2049;a.flags_changed=0;break;case 5:192>b?c=J(a,a.modrm_resolve(b))<<16>>16:c=a.reg16s[b<<1&14];b=c*a.reg16s[0];a.reg16[0]=b;a.reg16[4]=b>>16;a.flags=32767<b||-32768>b?a.flags|2049:a.flags&-2050;a.flags_changed=0;break;case 6:192>
b?c=J(a,a.modrm_resolve(b)):c=a.reg16[b<<1&14];b=c;d=(a.reg16[0]|a.reg16[4]<<16)>>>0;e=d/b|0;65536<=e||0>e||0===b?Yb(a):(a.reg16[0]=e,a.reg16[4]=d%b);break;case 7:192>b?c=J(a,a.modrm_resolve(b))<<16>>16:c=a.reg16s[b<<1&14],b=c,d=a.reg16[0]|a.reg16[4]<<16,e=d/b|0,32768<=e||-32769>=e||0===b?Yb(a):(a.reg16[0]=e,a.reg16[4]=d%b)}};
A[247]=function(a){var b=u(a);switch(b>>3&7){case 0:var c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];v(a,c,s(a),31);break;case 1:192>b?c=L(a,a.modrm_resolve(b)):c=a.reg32s[b&7];v(a,c,s(a),31);break;case 2:var d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=~c;192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c;break;case 3:e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=
H(a.memory,d)):c=a.reg32s[b&7];c=Ha(a,c,31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c;break;case 4:192>b?c=L(a,a.modrm_resolve(b))>>>0:c=a.reg32[b&7];d=a.reg32s[0];b=d&65535;d=d>>>16;var f=c&65535,c=c>>>16,e=b*f,f=(e>>>16)+(d*f|0)|0,g=f>>>16,f=(f&65535)+(b*c|0)|0,g=((f>>>16)+(d*c|0)|0)+g|0;a.reg32s[0]=f<<16|e&65535;a.reg32s[2]=g;a.flags=0===g?a.flags&-2050:a.flags|2049;a.flags_changed=0;break;case 5:192>b?c=L(a,a.modrm_resolve(b)):c=a.reg32s[b&7];e=c;d=a.reg32s[0];b=!1;0>d&&(b=!0,d=
-d|0);0>e&&(b=!b,e=-e|0);c=d&65535;d=d>>>16;var g=e&65535,e=e>>>16,f=c*g,g=(f>>>16)+(d*g|0)|0,r=g>>>16,g=(g&65535)+(c*e|0)|0,f=g<<16|f&65535,r=((g>>>16)+(d*e|0)|0)+r|0;b&&(f=-f|0,r=~r+!f|0);a.reg32s[0]=f;a.reg32s[2]=r;a.flags=r===f>>31?a.flags&-2050:a.flags|2049;a.flags_changed=0;break;case 6:192>b?c=L(a,a.modrm_resolve(b))>>>0:c=a.reg32[b&7];b=c;d=a.reg32[0];e=a.reg32[2];(e>=b||!b)&&Yb(a);c=0;if(1048576<e){f=32;for(g=b;g>e;)g>>>=1,f--;for(;1048576<e;)e>=g&&(e-=g,r=b<<f>>>0,r>d&&e--,d=d-r>>>0,c|=
1<<f),f--,g>>=1;c>>>=0}d+=4294967296*e;e=d%b;c+=d/b|0;4294967296<=c||0===b?Yb(a):(a.reg32s[0]=c,a.reg32s[2]=e);break;case 7:192>b?c=L(a,a.modrm_resolve(b)):c=a.reg32s[b&7];b=c;f=a.reg32[0];g=a.reg32s[2];d=c=!1;0>b&&(d=!0,b=-b);0>g&&(c=!0,d=!d,f=-f|0,g=~g+!f);(g>=b||!b)&&Yb(a);e=0;if(1048576<g){for(var r=32,t=b;t>g;)t>>>=1,r--;for(;1048576<g;){if(g>=t){var g=g-t,x=b<<r>>>0;x>f&&g--;f=f-x>>>0;e|=1<<r}r--;t>>=1}e>>>=0}f+=4294967296*g;g=f%b;e+=f/b|0;d&&(e=-e|0);c&&(g=-g|0);2147483648<=e||-2147483649>=
e||0===b?Yb(a):(a.reg32s[0]=e,a.reg32s[2]=g)}};z[248]=A[248]=function(a){a.flags&=-2;a.flags_changed&=-2};z[249]=A[249]=function(a){a.flags|=1;a.flags_changed&=-2};z[250]=A[250]=function(a){!a.protected_mode||(a.flags&131072?3===(a.flags>>12&3):(a.flags>>12&3)>=a.cpl)?a.flags&=-513:3>(a.flags>>12&3)&&(a.flags&131072?a.cr4&1:3===a.cpl&&a.cr4&2)?a.flags&=-524289:W(a,0)};
z[251]=A[251]=function(a){!a.protected_mode||(a.flags&131072?3===(a.flags>>12&3):(a.flags>>12&3)>=a.cpl)?(a.flags|=512,nc(a),Rb(a)):3>(a.flags>>12&3)&&0===(a.flags&1048576)&&(a.flags&131072?a.cr4&1:3===a.cpl&&a.cr4&2)?a.flags|=524288:W(a,0)};z[252]=A[252]=function(a){a.flags&=-1025};z[253]=A[253]=function(a){a.flags|=1024};
z[254]=A[254]=function(a){var b=u(a),c=b&56;if(0===c){var d;192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1];c=Fa(a,c,7);192>b?a.memory.write8(d,c):a.reg8[b<<2&12|b>>2&1]=c}else 8===c?(192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1],c=Ga(a,c,7),192>b?a.memory.write8(d,c):a.reg8[b<<2&12|b>>2&1]=c):V(a)};
z[255]=function(a){var b=u(a);switch(b>>3&7){case 0:var c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=Fa(a,c,15);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c;break;case 1:e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=Ga(a,c,15);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c;break;case 2:192>b?
c=J(a,a.modrm_resolve(b)):c=a.reg16[b<<1&14];M(a,Nb(a));a.instruction_pointer=a.segment_offsets[1]+c|0;a.last_instr_jump=!0;break;case 3:192<=b&&V(a);c=a.modrm_resolve(b);b=J(a,c+2);d=J(a,c);Mb(a,xb(a,-4),4);M(a,a.sreg[1]);M(a,Nb(a));O(a,1,b);a.instruction_pointer=a.segment_offsets[1]+d|0;a.last_instr_jump=!0;break;case 4:192>b?c=J(a,a.modrm_resolve(b)):c=a.reg16[b<<1&14];a.instruction_pointer=a.segment_offsets[1]+c|0;a.last_instr_jump=!0;break;case 5:192<=b&&V(a);c=a.modrm_resolve(b);b=J(a,c+2);
d=J(a,c);O(a,1,b);a.instruction_pointer=a.segment_offsets[1]+d|0;a.last_instr_jump=!0;break;case 6:192>b?c=J(a,a.modrm_resolve(b)):c=a.reg16[b<<1&14];M(a,c);break;case 7:V(a)}};
A[255]=function(a){var b=u(a);switch(b>>3&7){case 0:var c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=Fa(a,c,31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c;break;case 1:e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=Ga(a,c,31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c;break;case 2:192>b?c=L(a,a.modrm_resolve(b)):
c=a.reg32s[b&7];N(a,Nb(a));a.instruction_pointer=a.segment_offsets[1]+c|0;a.last_instr_jump=!0;break;case 3:192<=b&&V(a);c=a.modrm_resolve(b);b=J(a,c+4);d=L(a,c);Mb(a,xb(a,-8),8);N(a,a.sreg[1]);N(a,Nb(a));O(a,1,b);a.instruction_pointer=a.segment_offsets[1]+d|0;a.last_instr_jump=!0;break;case 4:192>b?c=L(a,a.modrm_resolve(b)):c=a.reg32s[b&7];a.instruction_pointer=a.segment_offsets[1]+c|0;a.last_instr_jump=!0;break;case 5:192<=b&&V(a);c=a.modrm_resolve(b);b=J(a,c+4);d=L(a,c);O(a,1,b);a.instruction_pointer=
a.segment_offsets[1]+d|0;a.last_instr_jump=!0;break;case 6:192>b?c=L(a,a.modrm_resolve(b)):c=a.reg32s[b&7];N(a,c);break;case 7:V(a)}};
C[0]=D[0]=function(a){var b=u(a);a.protected_mode||V(a);a.cpl&&W(a,0);switch(b>>3&7){case 0:if(192>b)var c=a.modrm_resolve(b);var d=a.sreg[7];192>b?S(a,c,d):a.reg16[b<<1&14]=d;break;case 1:192>b&&(c=a.modrm_resolve(b));d=a.sreg[6];192>b?S(a,c,d):a.reg16[b<<1&14]=d;break;case 2:192>b?d=J(a,a.modrm_resolve(b)):d=a.reg16[b<<1&14];b=d;c=Xb(a,b);if(c.is_null)a.segment_offsets[7]=0,a.segment_limits[7]=0;else{if(!c.from_gdt)throw a.debug.unimpl("LDTR can only be loaded from GDT");if(!c.is_present)throw a.debug.unimpl("#GP handler");
if(!c.is_system)throw a.debug.unimpl("#GP handler");if(2!==c.type)throw a.debug.unimpl("#GP handler");a.segment_offsets[7]=c.base;a.segment_limits[7]=c.effective_limit;a.sreg[7]=b}break;case 3:192>b?d=J(a,a.modrm_resolve(b)):d=a.reg16[b<<1&14];b=d;c=Xb(a,b);if(!c.from_gdt)throw a.debug.unimpl("TR can only be loaded from GDT");if(c.is_null)throw a.debug.unimpl("#GP handler");if(!c.is_present)throw a.debug.unimpl("#GP handler");if(!c.is_system)throw a.debug.unimpl("#GP handler");if(9!==c.type)throw a.debug.unimpl("#GP handler");
a.segment_offsets[6]=c.base;a.segment_limits[6]=c.effective_limit;a.sreg[6]=b;a.memory.write8(c.table_offset+5,a.memory.read8(c.table_offset+5)|2);break;default:V(a)}};
C[1]=D[1]=function(a){var b=u(a);a.cpl&&W(a,0);var c=b>>3&7;if(4===c){if(192>b)var d=a.modrm_resolve(b);var e=a.cr0;192>b?S(a,d,e):a.reg16[b<<1&14]=e}else if(6===c)192>b?e=J(a,a.modrm_resolve(b)):e=a.reg16[b<<1&14],a.cr0=a.cr0&-16|e&15,a.protected_mode&&(a.cr0|=1),oc(a);else switch(192<=b&&V(a),2!==c&&3!==c||!a.protected_mode||(a.segment_prefix=9),d=a.modrm_resolve(b),a.segment_prefix=-1,c){case 0:Mb(a,d,6);S(a,d,a.gdtr_size);T(a,d+2,a.gdtr_offset);break;case 1:Mb(a,d,6);S(a,d,a.idtr_size);T(a,d+
2,a.idtr_offset);break;case 2:b=J(a,d);d=L(a,d+2);a.gdtr_size=b;a.gdtr_offset=d;a.operand_size_32||(a.gdtr_offset&=16777215);break;case 3:b=J(a,d);d=L(a,d+2);a.idtr_size=b;a.idtr_offset=d;a.operand_size_32||(a.idtr_offset&=16777215);break;case 7:d=d>>>12;a.tlb_info[d]=0;a.tlb_info_global[d]=0;a.last_virt_eip=-1;break;default:V(a)}};C[2]=D[2]=function(a){u(a);V(a)};C[3]=D[3]=function(a){u(a);V(a)};C[4]=D[4]=function(a){V(a)};C[5]=D[5]=function(a){V(a)};C[6]=D[6]=function(a){a.cpl?W(a,0):a.cr0&=-9};
C[7]=D[7]=function(a){V(a)};C[8]=D[8]=function(a){V(a)};C[9]=D[9]=function(a){a.cpl&&W(a,0)};C[10]=D[10]=function(a){V(a)};C[11]=D[11]=function(a){V(a)};C[12]=D[12]=function(a){V(a)};C[13]=D[13]=function(a){V(a)};C[14]=D[14]=function(a){V(a)};C[15]=D[15]=function(a){V(a)};C[16]=D[16]=function(a){V(a)};C[17]=D[17]=function(a){V(a)};C[18]=D[18]=function(a){V(a)};C[19]=D[19]=function(a){V(a)};C[20]=D[20]=function(a){V(a)};C[21]=D[21]=function(a){V(a)};C[22]=D[22]=function(a){V(a)};C[23]=D[23]=function(a){V(a)};
C[24]=D[24]=function(a){var b=u(a);192>b&&a.modrm_resolve(b)};C[25]=D[25]=function(a){V(a)};C[26]=D[26]=function(a){V(a)};C[27]=D[27]=function(a){V(a)};C[28]=D[28]=function(a){V(a)};C[29]=D[29]=function(a){V(a)};C[30]=D[30]=function(a){V(a)};C[31]=D[31]=function(a){V(a)};C[32]=D[32]=function(a){var b=u(a);a.cpl&&W(a,0);switch(b>>3&7){case 0:a.reg32s[b&7]=a.cr0;break;case 2:a.reg32s[b&7]=a.cr2;break;case 3:a.reg32s[b&7]=a.cr3;break;case 4:a.reg32s[b&7]=a.cr4;break;default:V(a)}};
C[33]=D[33]=function(a){var b=u(a);a.cpl&&W(a,0);a.reg32s[b&7]=a.dreg[b>>3&7]};C[34]=D[34]=function(a){var b=u(a);a.cpl&&W(a,0);var c=a.reg32s[b&7];switch(b>>3&7){case 0:a.cr0=c;if(-2147483648===(a.cr0&-2147483647))throw a.debug.unimpl("#GP handler");oc(a);break;case 2:a.cr2=c;break;case 3:a.cr3=c;pc(a);break;case 4:c&-3565568&&W(a,0);(a.cr4^c)&128&&(c&128?pc(a):ua(a));a.cr4=c;a.page_size_extensions=a.cr4&16?128:0;if(a.cr4&32)throw a.debug.unimpl("PAE");break;default:V(a)}};
C[35]=D[35]=function(a){var b=u(a);a.cpl&&W(a,0);a.dreg[b>>3&7]=a.reg32s[b&7]};C[36]=D[36]=function(a){V(a)};C[37]=D[37]=function(a){V(a)};C[38]=D[38]=function(a){V(a)};C[39]=D[39]=function(a){V(a)};C[40]=D[40]=function(a){V(a)};C[41]=D[41]=function(a){V(a)};C[42]=D[42]=function(a){V(a)};C[43]=D[43]=function(a){V(a)};C[44]=D[44]=function(a){V(a)};C[45]=D[45]=function(a){V(a)};C[46]=D[46]=function(a){V(a)};C[47]=D[47]=function(a){V(a)};
C[48]=D[48]=function(a){a.cpl&&W(a,0);var b=a.reg32s[0];switch(a.reg32s[1]){case 372:a.sysenter_cs=b&65535;break;case 374:a.sysenter_eip=b;break;case 373:a.sysenter_esp=b}};C[49]=D[49]=function(a){if(a.cpl&&a.cr4&4)W(a,0);else{var b=a.microtick()-a.tsc_offset;a.reg32s[0]=1024*b;a.reg32s[2]=2.384185791015625E-7*b}};C[50]=D[50]=function(a){a.cpl&&W(a,0);var b=0;switch(a.reg32s[1]){case 372:b=a.sysenter_cs;break;case 374:b=a.sysenter_eip;break;case 373:b=a.sysenter_esp}a.reg32s[0]=b;a.reg32s[2]=0};
C[51]=D[51]=function(a){V(a)};C[52]=D[52]=function(a){var b=a.sysenter_cs&65532;a.protected_mode&&0!==b||W(a,0);a.flags&=-131585;a.instruction_pointer=a.sysenter_eip;a.reg32s[4]=a.sysenter_esp;a.sreg[1]=b;a.segment_is_null[1]=0;a.segment_limits[1]=-1;a.segment_offsets[1]=0;a.is_32||Wb(a,!0);a.cpl=0;a.last_virt_eip=-1;a.sreg[2]=b+8;a.segment_is_null[2]=0;a.segment_limits[2]=-1;a.segment_offsets[2]=0;a.stack_size_32=!0;a.stack_reg=a.reg32s;a.reg_vsp=4;a.reg_vbp=5};
C[53]=D[53]=function(a){var b=a.sysenter_cs&65532;a.protected_mode&&!a.cpl&&0!==b||W(a,0);a.instruction_pointer=a.reg32s[2];a.reg32s[4]=a.reg32s[1];a.sreg[1]=b+16|3;a.segment_is_null[1]=0;a.segment_limits[1]=-1;a.segment_offsets[1]=0;a.is_32||Wb(a,!0);a.cpl=3;a.last_virt_eip=-1;a.sreg[2]=b+24|3;a.segment_is_null[2]=0;a.segment_limits[2]=-1;a.segment_offsets[2]=0;a.stack_size_32=!0;a.stack_reg=a.reg32s;a.reg_vsp=4;a.reg_vbp=5};C[54]=D[54]=function(a){V(a)};C[55]=D[55]=function(a){V(a)};
C[56]=D[56]=function(a){V(a)};C[57]=D[57]=function(a){V(a)};C[58]=D[58]=function(a){V(a)};C[59]=D[59]=function(a){V(a)};C[60]=D[60]=function(a){V(a)};C[61]=D[61]=function(a){V(a)};C[62]=D[62]=function(a){V(a)};C[63]=D[63]=function(a){V(a)};C[64]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.test_o()&&(a.reg16[b>>2&14]=c)};D[64]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.test_o()&&(a.reg32s[b>>3&7]=c)};
C[65]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.test_o()||(a.reg16[b>>2&14]=c)};D[65]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.test_o()||(a.reg32s[b>>3&7]=c)};C[66]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.test_b()&&(a.reg16[b>>2&14]=c)};D[66]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.test_b()&&(a.reg32s[b>>3&7]=c)};
C[67]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.test_b()||(a.reg16[b>>2&14]=c)};D[67]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.test_b()||(a.reg32s[b>>3&7]=c)};C[68]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.test_z()&&(a.reg16[b>>2&14]=c)};D[68]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.test_z()&&(a.reg32s[b>>3&7]=c)};
C[69]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.test_z()||(a.reg16[b>>2&14]=c)};D[69]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.test_z()||(a.reg32s[b>>3&7]=c)};C[70]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];Gb(a)&&(a.reg16[b>>2&14]=c)};D[70]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];Gb(a)&&(a.reg32s[b>>3&7]=c)};
C[71]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];Gb(a)||(a.reg16[b>>2&14]=c)};D[71]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];Gb(a)||(a.reg32s[b>>3&7]=c)};C[72]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.test_s()&&(a.reg16[b>>2&14]=c)};D[72]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.test_s()&&(a.reg32s[b>>3&7]=c)};
C[73]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.test_s()||(a.reg16[b>>2&14]=c)};D[73]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.test_s()||(a.reg32s[b>>3&7]=c)};C[74]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.test_p()&&(a.reg16[b>>2&14]=c)};D[74]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.test_p()&&(a.reg32s[b>>3&7]=c)};
C[75]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.test_p()||(a.reg16[b>>2&14]=c)};D[75]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.test_p()||(a.reg32s[b>>3&7]=c)};C[76]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];Hb(a)&&(a.reg16[b>>2&14]=c)};D[76]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];Hb(a)&&(a.reg32s[b>>3&7]=c)};
C[77]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];Hb(a)||(a.reg16[b>>2&14]=c)};D[77]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];Hb(a)||(a.reg32s[b>>3&7]=c)};C[78]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];Ib(a)&&(a.reg16[b>>2&14]=c)};D[78]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];Ib(a)&&(a.reg32s[b>>3&7]=c)};
C[79]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];Ib(a)||(a.reg16[b>>2&14]=c)};D[79]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];Ib(a)||(a.reg32s[b>>3&7]=c)};C[80]=D[80]=function(a){V(a)};C[81]=D[81]=function(a){V(a)};C[82]=D[82]=function(a){V(a)};C[83]=D[83]=function(a){V(a)};C[84]=D[84]=function(a){V(a)};C[85]=D[85]=function(a){V(a)};C[86]=D[86]=function(a){V(a)};C[87]=D[87]=function(a){V(a)};C[88]=D[88]=function(a){V(a)};C[89]=D[89]=function(a){V(a)};
C[90]=D[90]=function(a){V(a)};C[91]=D[91]=function(a){V(a)};C[92]=D[92]=function(a){V(a)};C[93]=D[93]=function(a){V(a)};C[94]=D[94]=function(a){V(a)};C[95]=D[95]=function(a){V(a)};C[96]=D[96]=function(a){V(a)};C[97]=D[97]=function(a){V(a)};C[98]=D[98]=function(a){V(a)};C[99]=D[99]=function(a){V(a)};C[100]=D[100]=function(a){V(a)};C[101]=D[101]=function(a){V(a)};C[102]=D[102]=function(a){V(a)};C[103]=D[103]=function(a){V(a)};C[104]=D[104]=function(a){V(a)};C[105]=D[105]=function(a){V(a)};
C[106]=D[106]=function(a){V(a)};C[107]=D[107]=function(a){V(a)};C[108]=D[108]=function(a){V(a)};C[109]=D[109]=function(a){V(a)};C[110]=D[110]=function(a){V(a)};C[111]=D[111]=function(a){V(a)};C[112]=D[112]=function(a){V(a)};C[113]=D[113]=function(a){V(a)};C[114]=D[114]=function(a){V(a)};C[115]=D[115]=function(a){V(a)};C[116]=D[116]=function(a){V(a)};C[117]=D[117]=function(a){V(a)};C[118]=D[118]=function(a){V(a)};C[119]=D[119]=function(a){V(a)};C[120]=D[120]=function(a){V(a)};C[121]=D[121]=function(a){V(a)};
C[122]=D[122]=function(a){V(a)};C[123]=D[123]=function(a){V(a)};C[124]=D[124]=function(a){V(a)};C[125]=D[125]=function(a){V(a)};C[126]=D[126]=function(a){V(a)};C[127]=D[127]=function(a){V(a)};C[128]=function(a){qc(a,a.test_o())};D[128]=function(a){rc(a,a.test_o())};C[129]=function(a){qc(a,!a.test_o())};D[129]=function(a){rc(a,!a.test_o())};C[130]=function(a){qc(a,a.test_b())};D[130]=function(a){rc(a,a.test_b())};C[131]=function(a){qc(a,!a.test_b())};D[131]=function(a){rc(a,!a.test_b())};
C[132]=function(a){qc(a,a.test_z())};D[132]=function(a){rc(a,a.test_z())};C[133]=function(a){qc(a,!a.test_z())};D[133]=function(a){rc(a,!a.test_z())};C[134]=function(a){qc(a,Gb(a))};D[134]=function(a){rc(a,Gb(a))};C[135]=function(a){qc(a,!Gb(a))};D[135]=function(a){rc(a,!Gb(a))};C[136]=function(a){qc(a,a.test_s())};D[136]=function(a){rc(a,a.test_s())};C[137]=function(a){qc(a,!a.test_s())};D[137]=function(a){rc(a,!a.test_s())};C[138]=function(a){qc(a,a.test_p())};D[138]=function(a){rc(a,a.test_p())};
C[139]=function(a){qc(a,!a.test_p())};D[139]=function(a){rc(a,!a.test_p())};C[140]=function(a){qc(a,Hb(a))};D[140]=function(a){rc(a,Hb(a))};C[141]=function(a){qc(a,!Hb(a))};D[141]=function(a){rc(a,!Hb(a))};C[142]=function(a){qc(a,Ib(a))};D[142]=function(a){rc(a,Ib(a))};C[143]=function(a){qc(a,!Ib(a))};D[143]=function(a){rc(a,!Ib(a))};C[144]=D[144]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!a.test_o()^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};
C[145]=D[145]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!!a.test_o()^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};C[146]=D[146]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!a.test_b()^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};C[147]=D[147]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!!a.test_b()^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};
C[148]=D[148]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!a.test_z()^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};C[149]=D[149]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!!a.test_z()^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};C[150]=D[150]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!Gb(a)^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};
C[151]=D[151]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!!Gb(a)^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};C[152]=D[152]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!a.test_s()^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};C[153]=D[153]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!!a.test_s()^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};
C[154]=D[154]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!a.test_p()^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};C[155]=D[155]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!!a.test_p()^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};C[156]=D[156]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!Hb(a)^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};
C[157]=D[157]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!!Hb(a)^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};C[158]=D[158]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!Ib(a)^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};C[159]=D[159]=function(a){var b=u(a);if(192>b)var c=a.modrm_resolve(b);var d=!!Ib(a)^1;192>b?U(a,c,d):a.reg8[b<<2&12|b>>2&1]=d};C[160]=function(a){M(a,a.sreg[4])};D[160]=function(a){N(a,a.sreg[4])};
C[161]=function(a){O(a,4,J(a,xb(a,0)));a.stack_reg[a.reg_vsp]+=2};D[161]=function(a){O(a,4,J(a,xb(a,0)));a.stack_reg[a.reg_vsp]+=4};C[162]=D[162]=function(a){var b=0,c=0,d=0,e=0;switch(a.reg32s[0]){case 0:b=5;e=1970169159;d=1231384169;c=1818588270;break;case 1:b=3939;e=0;c=8388608;d=(a.fpu?1:0)|43322;break;case 2:b=1717260289;c=e=0;d=8024064;break;case -2147483648:b=5}a.reg32s[0]=b;a.reg32s[1]=c;a.reg32s[2]=d;a.reg32s[3]=e};
C[163]=function(a){var b=u(a);192>b?rb(a,a.modrm_resolve(b),a.reg16s[b>>2&14]):nb(a,a.reg16[b<<1&14],a.reg16[b>>2&14]&15)};D[163]=function(a){var b=u(a);192>b?rb(a,a.modrm_resolve(b),a.reg32s[b>>3&7]):nb(a,a.reg32s[b&7],a.reg32s[b>>3&7]&31)};
C[164]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=lb(a,c,a.reg16[b>>2&14],u(a)&31);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c};
D[164]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=mb(a,c,a.reg32s[b>>3&7],u(a)&31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c};
C[165]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=lb(a,c,a.reg16[b>>2&14],a.reg8[4]&31);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c};
D[165]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=mb(a,c,a.reg32s[b>>3&7],a.reg8[4]&31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c};C[166]=D[166]=function(a){V(a)};C[167]=D[167]=function(a){V(a)};C[168]=function(a){M(a,a.sreg[5])};D[168]=function(a){N(a,a.sreg[5])};C[169]=function(a){O(a,5,J(a,xb(a,0)));a.stack_reg[a.reg_vsp]+=2};
D[169]=function(a){O(a,5,J(a,xb(a,0)));a.stack_reg[a.reg_vsp]+=4};C[170]=D[170]=function(a){V(a)};C[171]=function(a){var b=u(a);192>b?vb(a,a.modrm_resolve(b),a.reg16s[b>>2&14]):a.reg16[b<<1&14]=pb(a,a.reg16[b<<1&14],a.reg16s[b>>2&14]&15)};D[171]=function(a){var b=u(a);192>b?vb(a,a.modrm_resolve(b),a.reg32s[b>>3&7]):a.reg32s[b&7]=pb(a,a.reg32s[b&7],a.reg32s[b>>3&7]&31)};
C[172]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=jb(a,c,a.reg16[b>>2&14],u(a)&31);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c};
D[172]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=kb(a,c,a.reg32s[b>>3&7],u(a)&31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c};
C[173]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];c=jb(a,c,a.reg16[b>>2&14],a.reg8[4]&31);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c};
D[173]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];c=kb(a,c,a.reg32s[b>>3&7],a.reg8[4]&31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c};C[174]=D[174]=function(a){V(a)};C[175]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b))<<16>>16:a.reg16s[b<<1&14];a.reg16[b>>2&14]=Ia(a,a.reg16s[b>>2&14],c)};
D[175]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.reg32s[b>>3&7]=Ka(a,a.reg32s[b>>3&7],c)};C[176]=D[176]=function(a){var b=u(a);if(192>b){var c=a.modrm_resolve(b);Mb(a,c,1);var d=w(a,c)}else d=a.reg8[b<<2&12|b>>2&1];a.sub(d,a.reg8[0],7);a.getzf()?192>b?U(a,c,a.reg8[b>>1&12|b>>5&1]):a.reg8[b<<2&12|b>>2&1]=a.reg8[b>>1&12|b>>5&1]:a.reg8[0]=d};
C[177]=function(a){var b=u(a);if(192>b){var c=a.modrm_resolve(b);Mb(a,c,2);var d=J(a,c)}else d=a.reg16[b<<1&14];a.sub(d,a.reg16[0],15);a.getzf()?192>b?S(a,c,a.reg16[b>>2&14]):a.reg16[b<<1&14]=a.reg16[b>>2&14]:a.reg16[0]=d};D[177]=function(a){var b=u(a);if(192>b){var c=a.modrm_resolve(b);Mb(a,c,4);var d=L(a,c)}else d=a.reg32s[b&7];a.sub(d,a.reg32s[0],31);a.getzf()?192>b?T(a,c,a.reg32s[b>>3&7]):a.reg32s[b&7]=a.reg32s[b>>3&7]:a.reg32s[0]=d};
C[178]=function(a){var b=u(a);192<=b&&V(a);Tb(a,2,a.modrm_resolve(b),b>>2&14)};D[178]=function(a){var b=u(a);192<=b&&V(a);Ub(a,2,a.modrm_resolve(b),b>>3&7)};C[179]=function(a){var b=u(a);192>b?tb(a,a.modrm_resolve(b),a.reg16s[b>>2&14]):a.reg16[b<<1&14]=qb(a,a.reg16[b<<1&14],a.reg16s[b>>2&14]&15)};D[179]=function(a){var b=u(a);192>b?tb(a,a.modrm_resolve(b),a.reg32s[b>>3&7]):a.reg32s[b&7]=qb(a,a.reg32s[b&7],a.reg32s[b>>3&7]&31)};
C[180]=function(a){var b=u(a);192<=b&&V(a);Tb(a,4,a.modrm_resolve(b),b>>2&14)};D[180]=function(a){var b=u(a);192<=b&&V(a);Ub(a,4,a.modrm_resolve(b),b>>3&7)};C[181]=function(a){var b=u(a);192<=b&&V(a);Tb(a,5,a.modrm_resolve(b),b>>2&14)};D[181]=function(a){var b=u(a);192<=b&&V(a);Ub(a,5,a.modrm_resolve(b),b>>3&7)};C[182]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];a.reg16[b>>2&14]=c};
D[182]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b)):a.reg8[b<<2&12|b>>2&1];a.reg32s[b>>3&7]=c};C[183]=D[183]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.reg32s[b>>3&7]=c};C[184]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14];a.reg16[b>>2&14]=wb(a,c)};D[184]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7];a.reg32s[b>>3&7]=wb(a,c)};C[185]=D[185]=function(a){V(a)};
C[186]=function(a){var b=u(a);switch(b>>3&7){case 4:192>b?rb(a,a.modrm_resolve(b),u(a)&15):nb(a,a.reg16[b<<1&14],u(a)&15);break;case 5:192>b?vb(a,a.modrm_resolve(b),u(a)):a.reg16[b<<1&14]=pb(a,a.reg16[b<<1&14],u(a)&15);break;case 6:192>b?tb(a,a.modrm_resolve(b),u(a)):a.reg16[b<<1&14]=qb(a,a.reg16[b<<1&14],u(a)&15);break;case 7:192>b?sb(a,a.modrm_resolve(b),u(a)):a.reg16[b<<1&14]=ob(a,a.reg16[b<<1&14],u(a)&15);break;default:V(a)}};
D[186]=function(a){var b=u(a);switch(b>>3&7){case 4:192>b?rb(a,a.modrm_resolve(b),u(a)&31):nb(a,a.reg32s[b&7],u(a)&31);break;case 5:192>b?vb(a,a.modrm_resolve(b),u(a)):a.reg32s[b&7]=pb(a,a.reg32s[b&7],u(a)&31);break;case 6:192>b?tb(a,a.modrm_resolve(b),u(a)):a.reg32s[b&7]=qb(a,a.reg32s[b&7],u(a)&31);break;case 7:192>b?sb(a,a.modrm_resolve(b),u(a)):a.reg32s[b&7]=ob(a,a.reg32s[b&7],u(a)&31);break;default:V(a)}};
C[187]=function(a){var b=u(a);192>b?sb(a,a.modrm_resolve(b),a.reg16s[b>>2&14]):a.reg16[b<<1&14]=ob(a,a.reg16[b<<1&14],a.reg16s[b>>2&14]&15)};D[187]=function(a){var b=u(a);192>b?sb(a,a.modrm_resolve(b),a.reg32s[b>>3&7]):a.reg32s[b&7]=ob(a,a.reg32s[b&7],a.reg32s[b>>3&7]&31)};C[188]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14],d=a.reg16,e=b>>2&14;b=a.reg16[b>>2&14];a.flags_changed=0;0===c?(a.flags|=64,a=b):(a.flags&=-65,a=Math.int_log2(-c&c));d[e]=a};
D[188]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7],d=a.reg32s,e=b>>3&7;b=a.reg32s[b>>3&7];a.flags_changed=0;0===c?(a.flags|=64,a=b):(a.flags&=-65,a=Math.int_log2((-c&c)>>>0));d[e]=a};C[189]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b)):a.reg16[b<<1&14],d=a.reg16,e=b>>2&14;b=a.reg16[b>>2&14];a.flags_changed=0;0===c?(a.flags|=64,a=b):(a.flags&=-65,a=Math.int_log2(c));d[e]=a};
D[189]=function(a){var b=u(a),c=192>b?L(a,a.modrm_resolve(b)):a.reg32s[b&7],d=a.reg32s,e=b>>3&7;b=a.reg32s[b>>3&7];a.flags_changed=0;0===c?(a.flags|=64,a=b):(a.flags&=-65,a=Math.int_log2(c>>>0));d[e]=a};C[190]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b))<<24>>24:a.reg8s[b<<2&12|b>>2&1];a.reg16[b>>2&14]=c};D[190]=function(a){var b=u(a),c=192>b?w(a,a.modrm_resolve(b))<<24>>24:a.reg8s[b<<2&12|b>>2&1];a.reg32s[b>>3&7]=c};
C[191]=D[191]=function(a){var b=u(a),c=192>b?J(a,a.modrm_resolve(b))<<16>>16:a.reg16s[b<<1&14];a.reg32s[b>>3&7]=c};C[192]=D[192]=function(a){var b=u(a),c,d;192>b?(d=y(a,a.modrm_resolve(b)),c=a.memory.read8(d)):c=a.reg8[b<<2&12|b>>2&1];var e=b>>1&12|b>>5&1,f=a.reg8[e];a.reg8[e]=c;c=a.add(c,f,7);192>b?a.memory.write8(d,c):a.reg8[b<<2&12|b>>2&1]=c};
C[193]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4095===(c&4095)?(e=y(a,c+1),c=E(a,d,e)):c=a.memory.read16(d)):c=a.reg16[b<<1&14];var f=b>>2&14,g=a.reg16[f];a.reg16[f]=c;c=a.add(c,g,15);192>b?e?F(a,d,e,c):a.memory.write16(d,c):a.reg16[b<<1&14]=c};
D[193]=function(a){var b=u(a),c,d,e=0;192>b?(c=a.modrm_resolve(b),d=y(a,c),a.paging&&4093<=(c&4095)?(e=y(a,c+3),c=G(a,d,e)):c=H(a.memory,d)):c=a.reg32s[b&7];var f=b>>3&7,g=a.reg32s[f];a.reg32s[f]=c;c=a.add(c,g,31);192>b?e?I(a,d,e,c):a.memory.write32(d,c):a.reg32s[b&7]=c};C[194]=D[194]=function(a){V(a)};C[195]=D[195]=function(a){V(a)};C[196]=D[196]=function(a){V(a)};C[197]=D[197]=function(a){V(a)};C[198]=D[198]=function(a){V(a)};
C[199]=D[199]=function(a){var b=u(a);192<=b&&V(a);b=a.modrm_resolve(b);Mb(a,b,8);var c=L(a,b),d=L(a,b+4);a.reg32s[0]===c&&a.reg32s[2]===d?(a.flags|=64,T(a,b,a.reg32s[3]),T(a,b+4,a.reg32s[1])):(a.flags&=-65,a.reg32s[0]=c,a.reg32s[2]=d);a.flags_changed&=-65};C[200]=D[200]=function(a){sc(a,0)};C[201]=D[201]=function(a){sc(a,1)};C[202]=D[202]=function(a){sc(a,2)};C[203]=D[203]=function(a){sc(a,3)};C[204]=D[204]=function(a){sc(a,4)};C[205]=D[205]=function(a){sc(a,5)};C[206]=D[206]=function(a){sc(a,6)};
C[207]=D[207]=function(a){sc(a,7)};C[208]=D[208]=function(a){V(a)};C[209]=D[209]=function(a){V(a)};C[210]=D[210]=function(a){V(a)};C[211]=D[211]=function(a){V(a)};C[212]=D[212]=function(a){V(a)};C[213]=D[213]=function(a){V(a)};C[214]=D[214]=function(a){V(a)};C[215]=D[215]=function(a){V(a)};C[216]=D[216]=function(a){V(a)};C[217]=D[217]=function(a){V(a)};C[218]=D[218]=function(a){V(a)};C[219]=D[219]=function(a){V(a)};C[220]=D[220]=function(a){V(a)};C[221]=D[221]=function(a){V(a)};C[222]=D[222]=function(a){V(a)};
C[223]=D[223]=function(a){V(a)};C[224]=D[224]=function(a){V(a)};C[225]=D[225]=function(a){V(a)};C[226]=D[226]=function(a){V(a)};C[227]=D[227]=function(a){V(a)};C[228]=D[228]=function(a){V(a)};C[229]=D[229]=function(a){V(a)};C[230]=D[230]=function(a){V(a)};C[231]=D[231]=function(a){V(a)};C[232]=D[232]=function(a){V(a)};C[233]=D[233]=function(a){V(a)};C[234]=D[234]=function(a){V(a)};C[235]=D[235]=function(a){V(a)};C[236]=D[236]=function(a){V(a)};C[237]=D[237]=function(a){V(a)};C[238]=D[238]=function(a){V(a)};
C[239]=D[239]=function(a){V(a)};C[240]=D[240]=function(a){V(a)};C[241]=D[241]=function(a){V(a)};C[242]=D[242]=function(a){V(a)};C[243]=D[243]=function(a){V(a)};C[244]=D[244]=function(a){V(a)};C[245]=D[245]=function(a){V(a)};C[246]=D[246]=function(a){V(a)};C[247]=D[247]=function(a){V(a)};C[248]=D[248]=function(a){V(a)};C[249]=D[249]=function(a){V(a)};C[250]=D[250]=function(a){V(a)};C[251]=D[251]=function(a){V(a)};C[252]=D[252]=function(a){V(a)};C[253]=D[253]=function(a){V(a)};C[254]=D[254]=function(a){V(a)};
C[255]=D[255]=function(a){V(a)};"use strict";function mc(a,b){var c=a.segment_offsets[1];a.instruction_pointer-=c;a.instruction_pointer=a.instruction_pointer+b&65535;a.instruction_pointer=a.instruction_pointer+c|0;a.last_instr_jump=!0}function qc(a,b){b?mc(a,p(a)):a.instruction_pointer=a.instruction_pointer+2|0;a.last_instr_jump=!0}function rc(a,b){if(b){var c=s(a);a.instruction_pointer=a.instruction_pointer+c|0}else a.instruction_pointer=a.instruction_pointer+4|0;a.last_instr_jump=!0}h=l.prototype;
h.loop=function(){if(--this.regv[this.reg_vcx]){var a=n(this);this.instruction_pointer=this.instruction_pointer+a|0}else this.instruction_pointer++;this.last_instr_jump=!0};h.getcf=function(){return this.flags_changed&1?(this.last_op1^(this.last_op1^this.last_op2)&(this.last_op2^this.last_add_result))>>>this.last_op_size&1:this.flags&1};h.getpf=function(){return this.flags_changed&4?154020>>((this.last_result^this.last_result>>4)&15)&4:this.flags&4};
function zb(a){return a.flags_changed&16?(a.last_op1^a.last_op2^a.last_add_result)&16:a.flags&16}h.getzf=function(){return this.flags_changed&64?(~this.last_result&this.last_result-1)>>>this.last_op_size&1:this.flags&64};h.getsf=function(){return this.flags_changed&128?this.last_result>>>this.last_op_size&1:this.flags&128};h.getof=function(){return this.flags_changed&2048?((this.last_op1^this.last_add_result)&(this.last_op2^this.last_add_result))>>>this.last_op_size&1:this.flags&2048};h.test_o=l.prototype.getof;
h.test_b=l.prototype.getcf;h.test_z=l.prototype.getzf;h.test_s=l.prototype.getsf;h.test_p=l.prototype.getpf;function Gb(a){return a.getcf()||a.getzf()}function Hb(a){return!a.getsf()!==!a.getof()}function Ib(a){return a.getzf()||!a.getsf()!==!a.getof()}function M(a,b){var c=xb(a,-2);S(a,c,b);a.stack_reg[a.reg_vsp]-=2}function N(a,b){var c=xb(a,-4);T(a,c,b);a.stack_reg[a.reg_vsp]-=4}function P(a){var b=J(a,a.segment_offsets[2]+a.stack_reg[a.reg_vsp]|0);a.stack_reg[a.reg_vsp]+=2;return b}
function Q(a){var b=L(a,a.segment_offsets[2]+a.stack_reg[a.reg_vsp]|0);a.stack_reg[a.reg_vsp]+=4;return b}function Kb(a,b){var c=a.reg16[0];a.reg16[0]=a.reg16[b];a.reg16[b]=c}function Lb(a,b){var c=a.reg32s[0];a.reg32s[0]=a.reg32s[b];a.reg32s[b]=c}function Tb(a,b,c,d){var e=J(a,c);c=J(a,c+2|0);O(a,b,c);a.reg16[d]=e}function Ub(a,b,c,d){var e=L(a,c);c=J(a,c+4|0);O(a,b,c);a.reg32s[d]=e}function sc(a,b){var c=a.reg32s[b];a.reg32s[b]=c>>>24|c<<24|c>>8&65280|c<<8&16711680}
h.run=function(){this.running||this.v86$next_tick()};function tc(a){if(a.stopped)a.stopped=a.running=!1;else{a.running=!0;try{a.in_hlt?a.hlt_loop():a.do_run()}catch(b){a.exception_cleanup(b)}}}h.stop=function(){this.running&&(this.stopped=!0)};
h.exception_cleanup=function(a){if(233495534===a)this.page_fault=!1,this.repeat_string_prefix=0,this.segment_prefix=-1,this.address_size_32=this.is_32,sa(this),this.operand_size_32=this.is_32,ta(this),this.v86$next_tick();else throw this.running=!1,console.log(a),console.log(a.stack),a;};
h.init=function(a){if(this.first_init){this.first_init=!1;var b=this;"undefined"!==typeof setImmediate?this.v86$next_tick=function(){setImmediate(function(){tc(b)})}:"undefined"!==typeof window&&"undefined"!==typeof postMessage?(window.addEventListener("message",function(a){a.source===window&&43605===a.data&&tc(b)},!1),this.v86$next_tick=function(){window.postMessage(43605,"*")}):this.v86$next_tick=function(){setTimeout(function(){tc(b)},0)};"object"===typeof performance&&performance.now?this.microtick=
function(){return performance.now()}:this.microtick=Date.now}this.current_settings=a;this.memory_size=a.memory_size||67108864;this.memory=new vc(new ArrayBuffer(this.memory_size),this.memory_size);this.segment_is_null=new Uint8Array(8);this.segment_limits=new Uint32Array(8);this.segment_offsets=new Int32Array(8);this.tlb_data=new Int32Array(1048576);this.tlb_info=new Uint8Array(1048576);this.tlb_info_global=new Uint8Array(1048576);this.reg32s=new Int32Array(8);this.reg32=new Uint32Array(this.reg32s.buffer);
this.reg16s=new Int16Array(this.reg32s.buffer);this.reg16=new Uint16Array(this.reg32s.buffer);this.reg8s=new Int8Array(this.reg32s.buffer);this.reg8=new Uint8Array(this.reg32s.buffer);this.sreg=new Uint16Array(8);this.dreg=new Int32Array(8);this.protected_mode=!1;this.gdtr_offset=this.gdtr_size=this.idtr_offset=this.idtr_size=0;this.page_fault=!1;this.cr0=1610612752;this.cr4=this.cr3=this.cr2=0;this.dreg[6]=-61456;this.dreg[7]=1024;this.cpl=0;this.paging=!1;this.page_size_extensions=0;this.address_size_32=
this.stack_size_32=this.operand_size_32=this.is_32=!1;this.last_virt_eip=-1;ta(this);sa(this);this.stack_reg=this.reg16;this.reg_vsp=8;this.reg_vbp=10;this.previous_ip=this.timestamp_counter=0;this.stopped=this.running=this.in_hlt=!1;this.sysenter_eip=this.sysenter_esp=this.sysenter_cs=0;this.segment_prefix=-1;this.repeat_string_prefix=0;this.flags=2;this.last_op_size=this.last_op2=this.last_op1=this.last_add_result=this.last_result=this.flags_changed=0;this.tsc_offset=this.microtick();var c=new wc(this.memory);
this.io=c;var d=a.bios,e=a.vga_bios;if(d){var f=new Uint8Array(d);this.memory.mem8.set(f,1048576-d.byteLength);e&&(f=new Uint8Array(e),this.memory.mem8.set(f,786432));c.mmap_register(4293918720,1048576,function(a){return this.memory.mem8[a&1048575]}.bind(this),function(a,b){this.memory.mem8[a&1048575]=b}.bind(this));this.instruction_pointer=1048560;O(this,2,48);this.reg16[8]=256}else if(a.linux){this.instruction_pointer=65536;d=new Uint8Array(a.linux.vmlinux);this.memory.mem8.set(d,1048576);d=new Uint8Array(a.linux.linuxstart);
this.memory.mem8.set(d,this.instruction_pointer);a.linux.root&&(d=new Uint8Array(a.linux.root),this.memory.mem8.set(d,4194304),this.reg32s[3]=a.linux.root.byteLength);d=this.memory;e=a.linux.cmdline;for(f=0;f<e.length;f++)d.write8(63488+f,e.charCodeAt(f));this.reg32s[0]=this.memory_size;this.reg32s[1]=63488;O(this,1,0);O(this,2,0);O(this,3,0);O(this,0,0);O(this,5,0);O(this,4,0);this.protected_mode=this.stack_size_32=this.operand_size_32=this.address_size_32=this.is_32=!0;ta(this);sa(this);this.regv=
this.reg32s;this.reg_vsp=4;this.reg_vbp=5;this.cr0=1}else O(this,2,48),this.reg16[8]=256,this.instruction_pointer=0;var g=0;c.register_read(146,this,function(){return g});c.register_write(146,this,function(a){g=a});this.devices={};a.load_devices&&(this.devices.pic=new xc(this),this.devices.pci=new zc(this),this.devices.dma=new Ac(this),this.devices.acpi=new Bc,this.devices.vga=new Cc(this,a.screen_adapter,a.vga_memory_size||8388608),this.devices.ps2=new Dc(this,a.keyboard_adapter,a.mouse_adapter),
this.fpu=new Ec(this),this.devices.uart=a.serial_adapter?new Fc(this,1016,a.serial_adapter):new Fc(this,1016,{put_line:function(){},init:function(){}}),this.devices.fdc=new Gc(this,a.fda),a.cdrom&&(this.devices.cdrom=new Hc(this,a.cdrom,!0,1)),a.hda&&(this.devices.hda=new Hc(this,a.hda,!1,0)),this.devices.pit=new Ic(this),this.devices.rtc=new Jc(this,this.devices.fdc.type,a.boot_order||531),a.network_adapter&&(this.devices.net=new Kc(this,a.network_adapter)))};
h.do_run=function(){var a=Date.now(),b=a;for(this.devices.vga.timer(b);33>b-a;){this.devices.pit.timer(b,!1);this.devices.rtc.timer(b,!1);Rb(this);for(b=11001;b--;)nc(this);b=Date.now()}this.v86$next_tick()};"undefined"!==typeof window&&(window.__no_inline1=l.prototype.do_run,window.__no_inline2=l.prototype.exception_cleanup,window.__no_inline3=l.prototype.hlt_loop);function nc(a){a.timestamp_counter++;a.previous_ip=a.instruction_pointer;var b=u(a);a.table[b](a)}
l.prototype.hlt_loop=function(){var a=Date.now();this.devices.pit.timer(a,!1);this.devices.rtc.timer(a,!1);this.devices.vga.timer(a);if(this.in_hlt){var b=this;setTimeout(function(){b.hlt_loop()},0)}else this.v86$next_tick()};function oc(a){var b=-2147483648===(a.cr0&-2147483648);a.fpu||(a.cr0|=4);a.cr0|=16;b!==a.paging&&(a.paging=b,ua(a))}
function u(a){a.instruction_pointer&-4096^a.last_virt_eip&&(a.eip_phys=R(a,a.instruction_pointer)^a.instruction_pointer,a.last_virt_eip=a.instruction_pointer&-4096);var b=a.memory.mem8[a.eip_phys^a.instruction_pointer]|0;a.instruction_pointer=a.instruction_pointer+1|0;return b}function n(a){return u(a)<<24>>24}
function p(a){if(4094<(a.instruction_pointer^a.last_virt_eip)>>>0)return u(a)|u(a)<<8;var b=a.memory.read16(a.eip_phys^a.instruction_pointer);a.instruction_pointer=a.instruction_pointer+2|0;return b}function s(a){if(4092<(a.instruction_pointer^a.last_virt_eip)>>>0)return p(a)|p(a)<<16;var b=H(a.memory,a.eip_phys^a.instruction_pointer);a.instruction_pointer=a.instruction_pointer+4|0;return b}function E(a,b,c){return a.memory.read8(b)|a.memory.read8(c)<<8}
function G(a,b,c){var d;d=b&1?b&2?Eb(a.memory,c-2>>1):Eb(a.memory,b+1>>1):E(a,b+1,c-1);return a.memory.read8(b)|d<<8|a.memory.read8(c)<<24}function F(a,b,c,d){a.memory.write8(b,d);a.memory.write8(c,d>>8)}function I(a,b,c,d){a.memory.write8(b,d);a.memory.write8(c,d>>24);b&1?b&2?(a.memory.write8(c-2,d>>8),a.memory.write8(c-1,d>>16)):(a.memory.write8(b+1,d>>8),a.memory.write8(b+2,d>>16)):(a.memory.write8(b+1,d>>8),a.memory.write8(c-1,d>>16))}function w(a,b){return a.memory.read8(R(a,b))}
function J(a,b){return a.paging&&4095===(b&4095)?w(a,b)|w(a,b+1)<<8:a.memory.read16(R(a,b))}function L(a,b){return a.paging&&4093<=(b&4095)?J(a,b)|J(a,b+2)<<16:H(a.memory,R(a,b))}function U(a,b,c){a.memory.write8(y(a,b),c)}function S(a,b,c){var d=y(a,b);4095===(b&4095)?F(a,d,y(a,b+1),c):a.memory.write16(d,c)}function T(a,b,c){var d=y(a,b);4093<=(b&4095)?I(a,d,y(a,b+3),c):a.memory.write32(d,c)}function Sb(a){return a.address_size_32?Db(a,3)+s(a)|0:Db(a,3)+p(a)|0}
function Pb(a){a.flags=a.flags&-2262|!!a.getcf()|!!a.getpf()<<2|!!zb(a)<<4|!!a.getzf()<<6|!!a.getsf()<<7|!!a.getof()<<11;a.flags_changed=0}function Qb(a,b){var c=1769472,d=2588629;a.flags&131072?(c|=12288,d|=1572864):a.cpl&&(c|=12288,a.cpl>(a.flags>>12&3)&&(c|=512));a.flags=(b^(a.flags^b)&c)&d|2;a.flags_changed=0}function xb(a,b){return a.segment_offsets[2]+a.stack_reg[a.reg_vsp]+b|0}function Nb(a){return a.instruction_pointer-a.segment_offsets[1]|0}
function Vb(a,b,c,d){a.in_hlt=!1;if(a.protected_mode){if(a.flags&131072&&a.cr4&1)throw a.debug.unimpl("VME");a.flags&131072&&c&&3>(a.flags>>12&3)&&W(a,0);if((b<<3|7)>a.idtr_size)throw a.debug.unimpl("#GP handler");var e=a.idtr_offset+(b<<3)|0;a.paging&&(e=Lc(a,e));var f=a.memory.read16(e)|a.memory.read16(e+6)<<16,g=a.memory.read16(e+2),e=a.memory.read8(e+5),r=e>>5&3;if(0===(e&128))throw a.debug.unimpl("#NP handler");c&&r<a.cpl&&W(a,b<<3|2);e&=31;if(14===e)b=!1;else if(15===e)b=!0;else{if(5===e)throw a.debug.unimpl("call int to task gate");
if(6===e)throw a.debug.unimpl("16 bit interrupt gate");if(7===e)throw a.debug.unimpl("16 bit trap gate");throw a.debug.unimpl("#GP handler");}c=Xb(a,g);if(c.is_null)throw a.debug.unimpl("#GP handler");if(!c.is_executable||c.dpl>a.cpl)throw a.debug.unimpl("#GP handler");if(!c.is_present)throw a.debug.unimpl("#NP handler");Pb(a);e=a.flags;if(!c.dc_bit&&c.dpl<a.cpl){var t=(c.dpl<<3)+4;if(t+5>a.segment_limits[6])throw a.debug.unimpl("#TS handler");t=t+a.segment_offsets[6]|0;a.paging&&(t=Lc(a,t));var r=
H(a.memory,t),t=a.memory.read16(t+4),x=Xb(a,t);if(x.is_null)throw a.debug.unimpl("#TS handler");if(x.rpl!==c.dpl)throw a.debug.unimpl("#TS handler");if(x.dpl!==c.dpl||!x.rw_bit)throw a.debug.unimpl("#TS handler");if(!x.is_present)throw a.debug.unimpl("#TS handler");var x=a.reg32s[4],B=a.sreg[2];a.cpl=c.dpl;a.last_virt_eip=-1;a.is_32!==c.size&&Wb(a,c.size);a.flags&=-196609;a.reg32s[4]=r;O(a,2,t);e&131072&&(N(a,a.sreg[5]),N(a,a.sreg[4]),N(a,a.sreg[3]),N(a,a.sreg[0]));N(a,B);N(a,x)}else if(c.dc_bit||
c.dpl===a.cpl)a.flags&131072&&W(a,g&-4);else throw a.debug.unimpl("#GP handler");N(a,e);N(a,a.sreg[1]);N(a,Nb(a));e&131072&&(O(a,5,0),O(a,4,0),O(a,3,0),O(a,0,0));!1!==d&&N(a,d);a.sreg[1]=g;a.is_32!==c.size&&Wb(a,c.size);a.segment_limits[1]=c.effective_limit;a.segment_offsets[1]=c.base;a.instruction_pointer=a.segment_offsets[1]+f|0;b?Rb(a):a.flags&=-513}else Pb(a),M(a,a.flags),M(a,a.sreg[1]),M(a,Nb(a)),a.flags&=-513,O(a,1,a.memory.read16((b<<2)+2)),a.instruction_pointer=a.segment_offsets[1]+a.memory.read16(b<<
2)|0;a.last_instr_jump=!0}function Yb(a){a.instruction_pointer=a.previous_ip;Vb(a,0,!1,!1);throw 233495534;}function V(a){a.instruction_pointer=a.previous_ip;Vb(a,6,!1,!1);throw 233495534;}function Ob(a){a.instruction_pointer=a.previous_ip;Vb(a,7,!1,!1);throw 233495534;}function W(a,b){a.instruction_pointer=a.previous_ip;Vb(a,13,!1,b);throw 233495534;}function yb(a,b){a.segment_prefix=b;a.table[u(a)](a);a.segment_prefix=-1}function m(a){return Db(a,3)}function q(a){return Db(a,2)}
function Db(a,b){return-1===a.segment_prefix?a.segment_offsets[b]:9===a.segment_prefix?0:a.segment_offsets[a.segment_prefix]}function Rb(a){a.devices.pic&&a.flags&512&&!a.page_fault&&a.devices.pic.check_irqs()}
function Ab(a,b,c){if(a.protected_mode&&(a.cpl>(a.flags>>12&3)||a.flags&131072)){var d=a.segment_limits[6],e=a.segment_offsets[6];if(103<=d){var f=a.memory.read16(Lc(a,e+100+2));if(d>=f+(b+c-1>>3)&&(c=(1<<c)-1<<(b&7),b=Lc(a,e+f+(b>>3)),!((c&65280?a.memory.read16(b):a.memory.read8(b))&c)))return}W(a,0)}}function Wb(a,b){a.is_32=a.operand_size_32=a.address_size_32=b;ta(a);sa(a)}function ta(a){a.operand_size_32?(a.table=a.table32,a.table0F=a.table0F_32):(a.table=a.table16,a.table0F=a.table0F_16)}
function sa(a){a.address_size_32?(a.regv=a.reg32s,a.reg_vcx=1,a.reg_vsi=6,a.reg_vdi=7):(a.regv=a.reg16,a.reg_vcx=2,a.reg_vsi=12,a.reg_vdi=14)}
function Xb(a,b){var c=0===(b&4),d=b&-8,e,f;e={rpl:b&3,from_gdt:c,is_null:!1,is_valid:!0,base:0,access:0,flags:0,type:0,dpl:0,is_system:!1,is_present:!1,is_executable:!1,rw_bit:!1,dc_bit:!1,size:!1,effective_limit:0,is_writable:!1,is_readable:!1,table_offset:0};c?(c=a.gdtr_offset,f=a.gdtr_size):(c=a.segment_offsets[7],f=a.segment_limits[7]);if(0===d)return e.is_null=!0,e;if((b|7)>f)return e.is_valid=!1,e;c=c+d|0;a.paging&&(c=Lc(a,c));e.table_offset=c;e.base=a.memory.read16(c+2)|a.memory.read8(c+4)<<
16|a.memory.read8(c+7)<<24;e.access=a.memory.read8(c+5);e.flags=a.memory.read8(c+6)>>4;e.type=e.access&15;e.dpl=e.access>>5&3;e.is_system=0===(e.access&16);e.is_present=128===(e.access&128);e.is_executable=8===(e.access&8);e.rw_bit=2===(e.access&2);e.dc_bit=4===(e.access&4);e.size=4===(e.flags&4);d=a.memory.read16(c)|(a.memory.read8(c+6)&15)<<16;e.effective_limit=e.flags&8?(d<<12|4095)>>>0:d;e.is_writable=e.rw_bit&&!e.is_executable;e.is_readable=e.rw_bit||!e.is_executable;return e}
function O(a,b,c){1===b&&(a.protected_mode=1===(a.cr0&1));if(!a.protected_mode||a.flags&131072)a.sreg[b]=c,a.segment_is_null[b]=0,a.segment_limits[b]=1048575,a.segment_offsets[b]=c<<4;else{var d=Xb(a,c);if(2===b){if(d.is_null){W(a,0);return}if(!d.is_valid||d.is_system||d.rpl!==a.cpl||!d.is_writable||d.dpl!==a.cpl){W(a,c&-4);return}if(!d.is_present)throw a.instruction_pointer=a.previous_ip,Vb(a,12,!1,c&-4),233495534;(a.stack_size_32=d.size)?(a.stack_reg=a.reg32s,a.reg_vsp=4,a.reg_vbp=5):(a.stack_reg=
a.reg16,a.reg_vsp=8,a.reg_vbp=10)}else if(1===b){if(!d.is_executable)throw a.debug.unimpl("#GP handler");if(d.is_system)throw a.debug.unimpl("load system segment descriptor, type = "+(d.access&15));if(d.rpl!==a.cpl)throw a.debug.unimpl("privilege change");if(!d.dc_bit&&d.dpl<a.cpl)throw a.debug.unimpl("inter privilege call");if(!d.dc_bit&&d.dpl!==a.cpl)throw a.debug.unimpl("#GP handler");d.size!==a.is_32&&Wb(a,d.size)}else{if(d.is_null){a.sreg[b]=c;a.segment_is_null[b]=1;return}if(!d.is_valid||d.is_system||
!d.is_readable||(!d.is_executable||!d.dc_bit)&&d.rpl>d.dpl&&a.cpl>d.dpl){W(a,c&-4);return}if(!d.is_present)throw a.instruction_pointer=a.previous_ip,Vb(a,11,!1,c&-4),233495534;}a.segment_is_null[b]=0;a.segment_limits[b]=d.effective_limit;a.segment_offsets[b]=d.base;a.sreg[b]=c}}function pc(a){a.last_virt_eip=-1;a.tlb_info.set(a.tlb_info_global)}function ua(a){for(var b=new Int32Array(a.tlb_info_global.buffer),c=0;262144>c;)b[c++]=b[c++]=b[c++]=b[c++]=0;pc(a)}
function R(a,b){var c;a.paging?3===a.cpl?(c=b>>>12,c=a.tlb_info[c]&4?a.tlb_data[c]^b:Mc(a,b,0,1)|b&4095):c=Lc(a,b):c=b;return c}function y(a,b){var c;a.paging?3===a.cpl?(c=b>>>12,c=a.tlb_info[c]&8?a.tlb_data[c]^b:Mc(a,b,1,1)|b&4095):(c=b>>>12,c=a.tlb_info[c]&2?a.tlb_data[c]^b:Mc(a,b,1,0)|b&4095):c=b;return c}function Lc(a,b){var c=b>>>12;return a.tlb_info[c]&1?a.tlb_data[c]^b:Mc(a,b,0,0)|b&4095}
function Mc(a,b,c,d){var e=b>>>12,f=(a.cr3>>>2)+(e>>10),g=a.memory.mem32s[f],r=!0,t=!0;g&1||(a.cr2=b,Nc(a,c,d,0));0===(g&2)&&(r=!1,c&&(d||a.cr0&65536)&&(a.cr2=b,Nc(a,c,d,1)));0===(g&4)&&(t=!1,d&&(a.cr2=b,Nc(a,c,d,1)));if(g&a.page_size_extensions)a.memory.mem32s[f]=g|32|c<<6,b=g&4290772992|b&4190208,g=g&256;else{var x=((g&4294963200)>>>2)+(e&1023),B=a.memory.mem32s[x];0===(B&1)&&(a.cr2=b,Nc(a,c,d,0));0===(B&2)&&(r=!1,c&&(d||a.cr0&65536)&&(a.cr2=b,Nc(a,c,d,1)));0===(B&4)&&(t=!1,d&&(a.cr2=b,Nc(a,c,d,
1)));a.memory.mem32s[f]=g|32;a.memory.mem32s[x]=B|32|c<<6;b=B&4294963200;g=B&256}a.tlb_data[e]=b^e<<12;r=t?r?15:5:r?3:1;a.tlb_info[e]=r;g&&a.cr4&128&&(a.tlb_info_global[e]=r);return b}function Mb(a,b,c){if(a.paging){var d=3===a.cpl?1:0,e=d?8:2,f=b>>>12;0===(a.tlb_info[f]&e)&&Mc(a,b,1,d);4096<=(b&4095)+c-1&&0===(a.tlb_info[f+1]&e)&&Mc(a,b+c-1,1,d)}}
function Nc(a,b,c,d){if(a.page_fault)throw a.debug.unimpl("Double fault");var e=a.cr2>>>12;a.tlb_info[e]=0;a.tlb_info_global[e]=0;a.instruction_pointer=a.previous_ip;a.page_fault=!0;Vb(a,14,!1,c<<2|b<<1|d);throw 233495534;}"object"===typeof window&&(window.v86=l,l.prototype.run=l.prototype.run,l.prototype.stop=l.prototype.stop);function wc(a){function b(){return 255}function c(){return 65535}function d(){return-1}function e(){}var f=a.size;this.IO$ports=[];this.devices=Array(65536);for(var g=0;65536>g;g++)this.IO$ports[g]={read8:b,read16:c,read32:d,write8:e,write16:e,write32:e,device:void 0};this.register_read=function(a,b,c,d,e){c&&(this.IO$ports[a].read8=c);d&&(this.IO$ports[a].read16=d);e&&(this.IO$ports[a].read32=e);this.IO$ports[a].device=b};this.register_write=function(a,b,c,d,e){c&&(this.IO$ports[a].write8=c);d&&
(this.IO$ports[a].write16=d);e&&(this.IO$ports[a].write32=e);this.IO$ports[a].device=b};this.register_read_consecutive=function(a,b,c,d,e,f){function g(){return c.call(this)|d.call(this)<<8}function aa(){return e.call(this)|f.call(this)<<8}function la(){return c.call(this)|d.call(this)<<8|e.call(this)<<16|f.call(this)<<24}e&&f?(this.register_read(a,b,c,g,la),this.register_read(a+1,b,d),this.register_read(a+2,b,e,aa),this.register_read(a+3,b,f)):(this.register_read(a,b,c,g),this.register_read(a+1,
b,d))};this.register_write_consecutive=function(a,b,c,d,e,f){function g(a){c.call(this,a&255);d.call(this,a>>8&255)}function aa(a){e.call(this,a&255);f.call(this,a>>8&255)}function la(a){c.call(this,a&255);d.call(this,a>>8&255);e.call(this,a>>16&255);f.call(this,a>>>24)}e&&f?(this.register_write(a,b,c,g,la),this.register_write(a+1,b,d),this.register_write(a+2,b,e,aa),this.register_write(a+3,b,f)):(this.register_write(a,b,c,g),this.register_write(a+1,b,d))};this.mmap_read32_shim=function(b){var c=
a.memory_map_read8[b>>>14];return c(b)|c(b+1)<<8|c(b+2)<<16|c(b+3)<<24};this.mmap_write32_shim=function(b,c){var d=a.memory_map_write8[b>>>14];d(b,c&255);d(b+1,c>>8&255);d(b+2,c>>16&255);d(b+3,c>>>24)};this.mmap_register=function(b,c,d,e,f,g){f||(f=this.mmap_read32_shim);g||(g=this.mmap_write32_shim);for(b>>>=14;0<c;b++)a.memory_map_registered[b]=1,a.memory_map_read8[b]=d,a.memory_map_write8[b]=e,a.memory_map_read32[b]=f,a.memory_map_write32[b]=g,c-=16384};for(g=0;g<<14<f;g++)a.memory_map_read8[g]=
a.memory_map_write8[g]=void 0,a.memory_map_read32[g]=a.memory_map_write32[g]=void 0;this.mmap_register(f,4294967296-f,function(){return 255},function(){},function(){return-1},function(){});this.in_mmap_range=function(b,c){b>>>=0;var d=b+(c>>>0);if(d>=f)return!0;for(b&=-16384;b<d;){if(a.memory_map_registered[b>>14])return!0;b+=16384}return!1};this.port_write8=function(a,b){var c=this.IO$ports[a];c.write8.call(c.device,b)};this.port_write16=function(a,b){var c=this.IO$ports[a];c.write16.call(c.device,
b)};this.port_write32=function(a,b){var c=this.IO$ports[a];c.write32.call(c.device,b)};this.port_read8=function(a){a=this.IO$ports[a];return a.read8.call(a.device)};this.port_read16=function(a){a=this.IO$ports[a];return a.read16.call(a.device)};this.port_read32=function(a){a=this.IO$ports[a];return a.read32.call(a.device)}};Object.fromList=function(){for(var a=[[1,""],[2,"CPU"],[32768,"DISK"],[4,"FPU"],[8,"MEM"],[16,"DMA"],[32,"IO"],[64,"PS2"],[128,"PIC"],[256,"VGA"],[512,"PIT"],[1024,"MOUS"],[2048,"PCI"],[4096,"BIOS"],[8192,"CD"],[16384,"SERI"],[65536,"RTC"],[131072,"HPET"],[262144,"ACPI"],[524288,"APIC"],[1048576,"NET"],[LOG_VIRTIO,"VIO"]],b={},c=0;c<a.length;c++)b[a[c][0]]=a[c][1];return b};function Jb(){}String.pads=function(a,b){for(a=a?a+"":"";a.length<b;)a=a+" ";return a};
String.pad0=function(a,b){for(a=a?a+"":"";a.length<b;)a="0"+a;return a};function ga(a){this.byteLength=a.byteLength;this.get=function(b,c,d){d(new Uint8Array(a,b,c))};this.set=function(b,c,d){(new Uint8Array(a,b,c.byteLength)).set(c);d()};this.get_buffer=function(b){b(a)}}"object"===typeof window&&(window.SyncBuffer=ga);for(var Oc=new Int8Array(256),Pc=0,Qc=-2;256>Pc;Pc++)Pc&Pc-1||Qc++,Oc[Pc]=Qc;
Math.int_log2=function(a){var b=a>>>16;if(b){var c=b>>>8;return c?24+Oc[c]:16+Oc[b]}return(c=a>>>8)?8+Oc[c]:Oc[a]};function Rc(a){var b=new Uint8Array(a),c,d;this.length=0;this.push=function(c){this.length!==a&&this.length++;b[d]=c;d=d+1&a-1};this.shift=function(){if(this.length){var d=b[c];c=c+1&a-1;this.length--;return d}return-1};this.ByteQueue$clear=function(){this.length=d=c=0};this.ByteQueue$clear()};function Ec(a){this.cpu=a;this._st=new Float64Array(8);this._st8=new Uint8Array(this._st.buffer);new Int32Array(this._st.buffer);this._stack_empty=255;this._stack_ptr=0;this._control_word=895;this._fpu_dp_selector=this._fpu_dp=this._fpu_opcode=this._fpu_ip_selector=this._fpu_ip=this._status_word=0;this.float32=new Float32Array(1);new Uint8Array(this.float32.buffer);this.float32_int=new Int32Array(this.float32.buffer);this.float64=new Float64Array(1);this.float64_byte=new Uint8Array(this.float64.buffer);
this.float64_int=new Int32Array(this.float64.buffer);this.indefinite_nan=NaN;this.constants=new Float64Array([1,Math.log(10)/Math.LN2,Math.LOG2E,Math.PI,Math.log(2)/Math.LN10,Math.LN2,0])}
Ec.prototype._state_restore=function(){this.float32=new Float32Array(1);new Uint8Array(this.float32.buffer);this.float32_int=new Int32Array(this.float32.buffer);this.float64=new Float64Array(1);this.float64_byte=new Uint8Array(this.float64.buffer);this.float64_int=new Int32Array(this.float64.buffer);this._st8=new Uint8Array(this._st.buffer);new Int32Array(this._st.buffer)};function $(a){V(a.cpu)}function fc(a){a._status_word|=1}
function $b(a,b){var c=X(a);a._status_word&=-18177;c>b||(a._status_word=b>c?a._status_word|256:c===b?a._status_word|16384:a._status_word|17664)}function jc(a,b){var c=a._st[a._stack_ptr];a.cpu.flags_changed&=-70;a.cpu.flags&=-70;c>b||(a.cpu.flags=b>c?a.cpu.flags|1:c===b?a.cpu.flags|64:a.cpu.flags|69)}function ic(a){a._control_word=895;a._status_word=0;a._fpu_ip=0;a._fpu_dp=0;a._fpu_opcode=0;a._stack_empty=255;a._stack_ptr=0}
function cc(a,b){if(a.cpu.operand_size_32){Mb(a.cpu,b,26);S(a.cpu,b,a._control_word);S(a.cpu,b+4,a._status_word&-14337|a._stack_ptr<<11);for(var c=0,d,e=0;8>e;e++)d=a._st[e],a._stack_empty>>e&1?c|=3<<(e<<1):0===d?c|=1<<(e<<1):isFinite(d)||(c|=2<<(e<<1));S(a.cpu,b+8,c);T(a.cpu,b+12,a._fpu_ip);S(a.cpu,b+16,a._fpu_ip_selector);S(a.cpu,b+18,a._fpu_opcode);T(a.cpu,b+20,a._fpu_dp);S(a.cpu,b+24,a._fpu_dp_selector)}else $(a)}
function bc(a,b){if(a.cpu.operand_size_32){a._control_word=J(a.cpu,b);var c=J(a.cpu,b+4);a._status_word=c&-14337;a._stack_ptr=c>>11&7;for(var c=J(a.cpu,b+8),d=a._stack_empty=0;8>d;d++)a._stack_empty|=c>>d&c>>d+1&1<<d;a._fpu_ip=L(a.cpu,b+12);a._fpu_ip_selector=J(a.cpu,b+16);a._fpu_opcode=J(a.cpu,b+18);a._fpu_dp=L(a.cpu,b+20);a._fpu_dp_selector=J(a.cpu,b+24)}else $(a)}
function dc(a,b){var c=a._control_word>>10&3;return 0===c?(c=Math.round(b),0.5===c-b&&c%2&&c--,c):1===c||3===c&&0<b?Math.floor(b):Math.ceil(b)}function ec(a){return 0<a?Math.floor(a):Math.ceil(a)}function ac(a,b){a._stack_ptr=a._stack_ptr-1&7;a._stack_empty>>a._stack_ptr&1?(a._status_word&=-513,a._stack_empty&=~(1<<a._stack_ptr),a._st[a._stack_ptr]=b):(a._status_word|=512,a._status_word|=65,a._st[a._stack_ptr]=a.indefinite_nan)}
function Y(a){a._stack_empty|=1<<a._stack_ptr;a._stack_ptr=a._stack_ptr+1&7}function Z(a,b){b=b+a._stack_ptr&7;return a._stack_empty>>b&1?(a._status_word&=-513,a._status_word|=65,a.indefinite_nan):a._st[b]}function X(a){return a._stack_empty>>a._stack_ptr&1?(a._status_word&=-513,a._status_word|=65,a.indefinite_nan):a._st[a._stack_ptr]}
function gc(a,b){var c=J(a.cpu,b+8),d,e=L(a.cpu,b)>>>0,f=L(a.cpu,b+4)>>>0;d=c>>15;c&=-32769;if(0===c)return 0;if(!(32767>c))return a.float64_byte[7]=127|d<<7,a.float64_byte[6]=240|f>>30<<3&8,a.float64_byte[5]=0,a.float64_byte[4]=0,a.float64_int[0]=0,a.float64[0];e+=4294967296*f;d&&(e=-e);return e*Math.pow(2,c-16383-63)}
function hc(a,b,c){a.float64[0]=a._st[a._stack_ptr+c&7];c=a.float64_byte[7]&128;var d=(a.float64_byte[7]&127)<<4|a.float64_byte[6]>>4,e,f;2047===d?(d=32767,e=0,f=2147483648|(a.float64_int[1]&524288)<<11):0===d?f=e=0:(d+=15360,e=a.float64_int[0]<<11,f=2147483648|(a.float64_int[1]&1048575)<<11|a.float64_int[0]>>>21);T(a.cpu,b,e);T(a.cpu,b+4,f);S(a.cpu,b+8,c<<8|d)}function kc(a,b){var c=L(a.cpu,b),d=L(a.cpu,b+4);a.float64_int[0]=c;a.float64_int[1]=d;return a.float64[0]}
function lc(a,b){Mb(a.cpu,b,8);a.float64[0]=Z(a,0);T(a.cpu,b,a.float64_int[0]);T(a.cpu,b+4,a.float64_int[1])}function Zb(a,b){a.float32_int[0]=L(a.cpu,b);return a.float32[0]};function Hc(a,b,c,d){0===d?(this.ata_port=496,this.IDEDevice$irq=14,this.pci_id=240):(this.ata_port=496,this.IDEDevice$irq=14,this.pci_id=248);this.ata_port_high=this.ata_port|516;this.pic=a.devices.pic;this.memory=a.memory;this.buffer=b;this.sector_size=c?2048:512;this.is_atapi=c;this.cylinder_count=this.IDEDevice$sectors_per_track=this.head_count=this.sector_count=0;this.buffer&&(this.sector_count=this.buffer.byteLength/this.sector_size,this.sector_count!==(this.sector_count|0)&&(this.sector_count=
Math.ceil(this.sector_count)),c?(this.head_count=1,this.IDEDevice$sectors_per_track=0):(this.head_count=255,this.IDEDevice$sectors_per_track=63),this.cylinder_count=this.sector_count/(this.head_count+1)/(this.IDEDevice$sectors_per_track+1),this.cylinder_count!==(this.cylinder_count|0)&&(this.cylinder_count=Math.ceil(this.cylinder_count)));this.stats={sectors_read:0,sectors_written:0,bytes_read:0,bytes_written:0,loading:!1};this.pci_space=[134,128,32,58,5,0,160,2,0,143,1,1,0,0,0,0,this.ata_port&255|
1,this.ata_port>>8,0,0,this.ata_port_high&255|1,this.ata_port_high>>8,0,0,0,0,0,0,0,0,0,0,1,192,0,0,0,0,0,0,0,0,0,0,67,16,212,130,0,0,0,0,0,0,0,0,0,0,0,0,this.IDEDevice$irq,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.pci_bars=[{size:8},{size:4},!1,!1,{size:16}];a.devices.pci.register_device(this);a.io.register_read(this.ata_port|7,this,this.read_status);
a.io.register_read(this.ata_port_high|2,this,this.read_status);a.io.register_write(this.ata_port|7,this,this.write_control);a.io.register_write(this.ata_port_high|2,this,this.write_control);this.device_control=2;this.data_pointer=0;this.pio_data=new Uint8Array(0);this.drive_head=this.head=this.cylinder_high=this.cylinder_low=this.lba_count=this.sector=this.bytecount=this.is_lba=0;this.status=80;this.sectors_per_drq=1;this.data_port_current=this.data_port_count=this.write_dest=0;this.data_port_buffer=
new Uint8Array(0);this.data_port_callback=null;this.next_status=-1;this.dma_status=this.prdt_addr=0;a.io.register_read(this.ata_port|0,this,this.read_data_port8,this.read_data_port16,this.read_data_port32);a.io.register_read(this.ata_port|1,this,this.read_lba_port);a.io.register_read(this.ata_port|2,this,this.read_bytecount_port);a.io.register_read(this.ata_port|3,this,this.read_sector_port);a.io.register_read(this.ata_port|4,this,function(){return this.cylinder_low&255});a.io.register_read(this.ata_port|
5,this,function(){return this.cylinder_high&255});a.io.register_read(this.ata_port|6,this,function(){return this.drive_head});a.io.register_write(this.ata_port|0,this,this.write_data_port8,this.write_data_port16,this.write_data_port32);a.io.register_write(this.ata_port|1,this,this.write_lba_port);a.io.register_write(this.ata_port|2,this,this.write_bytecount_port);a.io.register_write(this.ata_port|3,this,this.write_sector_port);a.io.register_write(this.ata_port|4,this,function(a){this.cylinder_low=
(this.cylinder_low<<8|a)&65535});a.io.register_write(this.ata_port|5,this,function(a){this.cylinder_high=(this.cylinder_high<<8|a)&65535});a.io.register_write(this.ata_port|6,this,function(a){a&16||(this.drive_head=a,this.is_lba=a>>6&1,this.head=a&15)});a.io.register_write(this.ata_port|7,this,this.ata_command);a.io.register_read(49156,this,void 0,void 0,this.dma_read_addr);a.io.register_write(49156,this,void 0,void 0,this.dma_set_addr);a.io.register_read(49152,this,this.dma_read_command8,void 0,
this.dma_read_command);a.io.register_write(49152,this,void 0,void 0,this.dma_write_command);a.io.register_read(49154,this,this.dma_read_status);a.io.register_write(49154,this,this.dma_write_status)}Hc.prototype.push_irq=function(){0===(this.device_control&2)&&(this.dma_status|=4,this.pic.push_irq(this.IDEDevice$irq))};
Hc.prototype.ata_command=function(a){switch(a){case 0:this.push_irq();this.status=80;break;case 8:this.data_pointer=0;this.pio_data=new Uint8Array(0);this.status=80;this.push_irq();break;case 16:this.push_irq();break;case 39:this.push_irq();this.pio_data=new Uint8Array([0,0,0,0,this.buffer.byteLength&255,this.buffer.byteLength>>8&255,this.buffer.byteLength>>16&255,this.buffer.byteLength>>24&255,0,0,0,0]);this.status=88;break;case 32:case 41:case 36:case 196:if(32===a||196===a){var b=this.bytecount&
255,c=this.is_lba?Sc(this):Tc(this);0===b&&(b=256)}else if(36===a||41===a)b=this.bytecount,c=Uc(this),0===b&&(b=65536);var d=b*this.sector_size,e=c*this.sector_size;this.cylinder_low+=b;e+d>this.buffer.byteLength?(this.status=255,this.push_irq()):(this.status=128,this.stats.loading=!0,this.buffer.get(e,d,function(a){this.pio_data=a;this.status=88;this.data_pointer=0;this.push_irq();this.stats.loading=!1;this.stats.sectors_read+=d/this.sector_size|0;this.stats.bytes_read+=d}.bind(this)));break;case 48:case 52:case 57:if(48===
a){var e=this.bytecount&255,f=this.is_lba?Sc(this):Tc(this);0===e&&(e=256)}else if(52===a||57===a)e=this.bytecount,f=Uc(this),0===e&&(e=65536);b=e*this.sector_size;f=f*this.sector_size;this.cylinder_low+=e;f+b>this.buffer.byteLength?this.status=255:(this.status=80,this.next_status=88,Vc(this,b),this.write_dest=f,this.data_port_callback="do_write");this.push_irq();break;case 144:this.push_irq();this.lba_count=257;this.status=80;break;case 145:this.push_irq();break;case 160:this.is_atapi&&(this.status=
88,Vc(this,12),this.data_port_callback="atapi_handle",this.bytecount=1,this.push_irq());break;case 161:this.is_atapi?(Wc(this),this.status=88):this.status=80;this.push_irq();break;case 198:this.sectors_per_drq=this.bytecount;this.push_irq();break;case 200:var e=this.bytecount&255,g=e*this.sector_size,b=Sc(this)*this.sector_size;this.cylinder_low+=e;b+g>this.buffer.byteLength?(this.status=255,this.push_irq()):(this.status=128,this.dma_status|=1,this.stats.loading=!0,this.buffer.get(b,g,function(a){var b=
this.prdt_addr,c=0;do{var d=H(this.memory,b),e=this.memory.read16(b+4),f=this.memory.read8(b+7)&128;e||(e=65536);this.memory.mem8.set(a.subarray(c,c+e),d);c+=e;b+=8}while(!f);this.status=80;this.dma_status&=-4;this.dma_status|=4;this.push_irq();this.stats.loading=!1;this.stats.sectors_read+=g/this.sector_size|0;this.stats.bytes_read+=g}.bind(this)));break;case 202:f=this.bytecount&255;e=f*this.sector_size;b=Sc(this)*this.sector_size;this.cylinder_low+=f;if(b+e>this.buffer.byteLength)this.status=255,
this.push_irq();else{this.status=128;this.dma_status|=1;var f=this.prdt_addr,r=0,t=0;a=0;do{var c=H(this.memory,f),x=this.memory.read16(f+4),B=this.memory.read8(f+7)&128;x||(x=65536);this.buffer.set(b+a,this.memory.mem8.subarray(c,c+x),function(){t++;t===r&&(this.status=80,this.push_irq(),this.dma_status&=-4,this.dma_status|=4)}.bind(this));a+=x;f+=8;r++}while(!B);t===r&&(this.status=80,this.push_irq(),this.dma_status&=-4,this.dma_status|=4);this.stats.sectors_written+=e/this.sector_size|0;this.stats.bytes_written+=
e}break;case 225:this.push_irq();break;case 236:if(this.is_atapi)break;Wc(this);this.status=88;this.push_irq();break;case 234:this.push_irq();break;case 239:this.push_irq();break;default:this.lba_count=4}};
Hc.prototype.atapi_handle=function(){this.bytecount=2;switch(this.data_port_buffer[0]){case 0:this.status=64;this.cylinder_low=8;this.cylinder_high=0;this.push_irq();break;case 3:this.pio_data=new Uint8Array(Math.min(this.data_port_buffer[4],15));this.status=88;this.pio_data[0]=240;this.pio_data[7]=8;this.data_pointer=0;this.bytecount=2;this.cylinder_low=8;this.cylinder_high=0;this.push_irq();break;case 18:this.pio_data=new Uint8Array(Math.min(this.data_port_buffer[4],36));this.status=88;this.pio_data.set([5,
128,1,49,0,0,0,0,83,79,78,89,32,32,32,32,67,68,45,82,79,77,32,67,68,85,45,49,48,48,48,32,49,46,49,97]);this.data_pointer=0;this.bytecount=2;this.push_irq();break;case 30:this.pio_data=new Uint8Array(0);this.status=80;this.data_pointer=0;this.bytecount=2;this.push_irq();break;case 37:this.pio_data=new Uint8Array([this.sector_count>>24&255,this.sector_count>>16&255,this.sector_count>>8&255,this.sector_count&255,0,0,this.sector_size>>8&255,this.sector_size&255]);this.status=88;this.data_pointer=0;this.bytecount=
2;this.cylinder_low=8;this.cylinder_high=0;this.push_irq();break;case 40:if(this.lba_count&1){var a=this.data_port_buffer,b=(a[7]<<8|a[8])*this.sector_size,a=(a[2]<<24|a[3]<<16|a[4]<<8|a[5])*this.sector_size;a>=this.buffer.byteLength?(this.status=255,this.push_irq()):(b=Math.min(b,this.buffer.byteLength-a),this.status=128,this.stats.loading=!0,this.buffer.get(a,b,function(a){var c=this.prdt_addr,d=0;do{var r=H(this.memory,c),t=this.memory.read16(c+4),x=this.memory.read8(c+7)&128;t||(t=65536);this.memory.mem8.set(a.subarray(d,
d+t),r);d+=t;c+=8}while(!x);this.status=80;this.dma_status&=-4;this.dma_status|=4;this.push_irq();this.stats.loading=!1;this.stats.sectors_read+=b/this.sector_size|0;this.stats.bytes_read+=b}.bind(this)))}else{var c=this.data_port_buffer,d=(c[7]<<8|c[8])*this.sector_size,a=(this.cylinder_high&255)<<8|this.cylinder_low&255,c=(c[2]<<24|c[3]<<16|c[4]<<8|c[5])*this.sector_size;a||(a=32768);a=Math.min(d,a);this.cylinder_low=a&255;this.cylinder_high=a>>8&255;c>=this.buffer.byteLength?(this.status=255,this.push_irq()):
(d=Math.min(d,this.buffer.byteLength-c),this.status=128,this.stats.loading=!0,this.buffer.get(c,d,function(a){this.pio_data=a;this.status=88;this.data_pointer=0;this.push_irq();this.stats.loading=!1;this.stats.sectors_read+=d/this.sector_size|0;this.stats.bytes_read+=d}.bind(this)))}break;case 67:this.pio_data=new Uint8Array(2048);this.pio_data[0]=0;this.pio_data[1]=10;this.pio_data[2]=1;this.pio_data[3]=1;this.status=88;this.data_pointer=0;this.bytecount=2;this.cylinder_high=8;this.cylinder_low=
0;this.push_irq();break;case 70:this.pio_data=new Uint8Array(this.data_port_buffer[8]|this.data_port_buffer[7]<<8);this.status=88;this.data_pointer=0;this.bytecount=2;this.push_irq();break;case 74:this.pio_data=new Uint8Array(this.data_port_buffer[8]|this.data_port_buffer[7]<<8);this.status=88;this.data_pointer=0;this.bytecount=2;this.push_irq();break;case 81:this.pio_data=new Uint8Array(0);this.status=80;this.data_pointer=0;this.bytecount=2;this.push_irq();break;case 90:this.push_irq();this.status=
80;break;default:this.status=80}};Hc.prototype.do_write=function(){this.status=80;this.buffer.set(this.write_dest,this.data_port_buffer.subarray(0,this.data_port_count),function(){this.push_irq()}.bind(this));this.stats.sectors_written+=this.data_port_count/this.sector_size|0;this.stats.bytes_written+=this.data_port_count};h=Hc.prototype;h.read_status=function(){var a=this.status;0<=this.next_status&&(this.status=this.next_status,this.next_status=-1);return a};
h.write_control=function(a){this.device_control=a;a&4&&(this.is_atapi?(this.status=81,this.sector=this.lba_count=this.bytecount=1,this.cylinder_low=20,this.cylinder_high=235):(this.status=81,this.sector=this.lba_count=this.bytecount=1,this.cylinder_low=60,this.cylinder_high=195))};function Vc(a,b){b>a.data_port_buffer.length&&(a.data_port_buffer=new Uint8Array(b));a.data_port_count=b;a.data_port_current=0}h.read_data_port8=function(){return Xc(this)};
h.read_data_port16=function(){return Xc(this)|Xc(this)<<8};h.read_data_port32=function(){return Xc(this)|Xc(this)<<8|Xc(this)<<16|Xc(this)<<24};h.read_lba_port=function(){return this.lba_count&255};h.read_bytecount_port=function(){return this.bytecount&255};h.read_sector_port=function(){return this.sector&255};
function Xc(a){if(a.data_pointer<a.pio_data.length){0!==(a.data_pointer+1)%(512*a.sectors_per_drq)&&a.data_pointer+1!==a.pio_data.length||a.push_irq();a.cylinder_low?a.cylinder_low--:a.cylinder_high&&(a.cylinder_high--,a.cylinder_low=255);if(!a.cylinder_low&&!a.cylinder_high){var b=a.pio_data.length-a.data_pointer-1;65536<=b?(a.cylinder_high=240,a.cylinder_low=0):(a.cylinder_high=b>>8,a.cylinder_low=b)}a.data_pointer+1>=a.pio_data.length&&(a.status=80);return a.pio_data[a.data_pointer++]}a.data_pointer++;
return 0}h.write_data_port8=function(a){if(!(this.data_port_current>=this.data_port_count)&&(this.data_port_buffer[this.data_port_current++]=a,0===this.data_port_current%(512*this.sectors_per_drq)&&this.push_irq(),this.data_port_current===this.data_port_count))this[this.data_port_callback]()};h.write_data_port16=function(a){this.write_data_port8(a&255);this.write_data_port8(a>>8&255)};
h.write_data_port32=function(a){this.write_data_port8(a&255);this.write_data_port8(a>>8&255);this.write_data_port8(a>>16&255);this.write_data_port8(a>>24&255)};h.write_lba_port=function(a){this.lba_count=(this.lba_count<<8|a)&65535};h.write_bytecount_port=function(a){this.bytecount=(this.bytecount<<8|a)&65535};h.write_sector_port=function(a){this.sector=(this.sector<<8|a)&65535};
function Tc(a){return((a.cylinder_low&255|a.cylinder_high<<8&65280)*a.head_count+a.head)*a.IDEDevice$sectors_per_track+(a.sector&255)-1}function Sc(a){return a.sector&255|a.cylinder_low<<8&65280|a.cylinder_high<<16&16711680}function Uc(a){return(a.sector&255|a.cylinder_low<<8&65280|a.cylinder_high<<16&16711680|a.sector>>8<<24&4278190080)>>>0}
function Wc(a){a.data_pointer=0;a.drive_head&16?a.pio_data=new Uint8Array(0):(a.pio_data=new Uint8Array([64,a.is_atapi?133:0,a.cylinder_count,a.cylinder_count>>8,0,0,a.head_count,a.head_count>>8,0,0,0,0,a.IDEDevice$sectors_per_track,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,2,4,0,0,0,0,0,0,0,0,0,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,32,255,0,1,0,0,3,0,0,0,2,0,2,7,0,a.cylinder_count,a.cylinder_count>>8,
a.head_count,a.head_count>>8,a.IDEDevice$sectors_per_track,0,a.sector_count&255,a.sector_count>>8&255,a.sector_count>>16&255,a.sector_count>>24&255,0,0,a.sector_count&255,a.sector_count>>8&255,a.sector_count>>16&255,a.sector_count>>24&255,0,0,0,4,0,0,30,0,30,0,30,0,30,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,126,0,0,0,0,0,0,116,0,64,0,64,0,116,0,64,0,0,0,0,0,0,0,0,0,0,1,96,0,0,0,0,0,0,0,0,0,0,0,0,a.sector_count&255,a.sector_count>>8&255,a.sector_count>>16&255,a.sector_count>>24&255]),16383<a.cylinder_count&&
(a.pio_data[2]=a.pio_data[108]=255,a.pio_data[3]=a.pio_data[109]=63))}h.dma_read_addr=function(){return this.prdt_addr};h.dma_set_addr=function(a){this.prdt_addr=a};h.dma_read_status=function(){return this.dma_status};h.dma_write_status=function(a){this.dma_status&=~a};h.dma_read_command=function(){return 1|this.dma_status<<16};h.dma_read_command8=function(){return 1};h.dma_write_command=function(a){a&1&&this.push_irq();this.dma_write_status(a>>16&255)};function zc(a){function b(a){var b=c[2]<<8|c[1],d=c[0]&252,e=r[b],b=t[b];e&&3===a&&16<=d&&40>d&&(a=d-16>>2,b=b.pci_bars,a<b.length&&b[a]||(e[d>>2]=0))}a=a.io;var c=new Uint8Array(4),d=new Uint8Array(4),e=new Uint8Array(4);new Int32Array(c.buffer);var f=new Int32Array(d.buffer),g=new Int32Array(e.buffer),r=Array(65536),t=Array(65536);a.register_write_consecutive(3324,this,function(){b(0)},function(){b(1)},function(){b(2)},function(){b(3)});a.register_read_consecutive(3324,this,function(){return d[0]},
function(){return d[1]},function(){return d[2]},function(){return d[3]});a.register_read_consecutive(3320,this,function(){return e[0]},function(){return e[1]},function(){return e[2]},function(){return e[3]});a.register_write_consecutive(3320,this,function(a){c[0]=a},function(a){c[1]=a},function(a){c[2]=a},function(a){c[3]=a;a=c[0]&252;var b=r[c[2]<<8|c[1]];void 0!==b?(g[0]=-2147483648,f[0]=a<b.byteLength?b[a>>2]:-1):(f[0]=-1,g[0]=0)});this.register_device=function(a){var b=a.pci_id;r[b]=new Int32Array((new Uint8Array(a.pci_space)).buffer);
t[b]=a};this.register_device({pci_id:0,pci_space:[134,128,55,18,0,0,0,0,2,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],pci_bars:[]});this.register_device({pci_id:8,pci_space:[134,128,0,112,7,0,0,2,0,0,1,6,0,0,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],pci_bars:[]})};function Gc(a,b){this.io=a.io;this.pic=a.devices.pic;this.dma=a.devices.dma;this.bytes_expecting=0;this.receiving_command=new Uint8Array(10);this.receiving_index=0;this.next_command=null;this.response_data=new Uint8Array(10);this.floppy_size=this.response_length=this.response_index=0;this.fda_image=b;this.last_cylinder=0;if(b){this.floppy_size=b.byteLength;var c,d;if((d={160:{type:1,tracks:40,sectors:8,heads:1},180:{type:1,tracks:40,sectors:9,heads:1},200:{type:1,tracks:40,sectors:10,heads:1},320:{type:1,
tracks:40,sectors:8,heads:2},360:{type:1,tracks:40,sectors:9,heads:2},400:{type:1,tracks:40,sectors:10,heads:2},720:{type:3,tracks:80,sectors:9,heads:2},1200:{type:2,tracks:80,sectors:15,heads:2},1440:{type:4,tracks:80,sectors:18,heads:2},1722:{type:5,tracks:82,sectors:21,heads:2},2880:{type:5,tracks:80,sectors:36,heads:2}}[this.floppy_size>>10])&&0===(this.floppy_size&1023))this.type=d.type,c=d.sectors,d=d.heads;else throw"Unknown floppy size: "+(b.byteLength?b.byteLength.toString(16).toUpperCase():
String.pad0("",1));this.FloppyController$sectors_per_track=c;this.number_of_heads=d;this.io.register_read(1008,this,this.port3F0_read);this.io.register_read(1010,this,this.port3F2_read);this.io.register_read(1012,this,this.port3F4_read);this.io.register_read(1013,this,this.port3F5_read);this.io.register_read(1015,this,this.port3F7_read);this.io.register_write(1010,this,this.port3F2_write);this.io.register_write(1013,this,this.port3F5_write)}else this.type=4}h=Gc.prototype;h.port3F0_read=function(){return 0};
h.port3F4_read=function(){var a=128;this.response_index<this.response_length&&(a|=80);0===(Yc&8)&&(a|=32);return a};h.port3F7_read=function(){return 0};h.port3F5_read=function(){return this.response_index<this.response_length?this.response_data[this.response_index++]:255};
h.port3F5_write=function(a){if(0<this.bytes_expecting)this.receiving_command[this.receiving_index++]=a,this.bytes_expecting--,0===this.bytes_expecting&&this.next_command.call(this,this.receiving_command);else{switch(a){case 3:this.next_command=this.fix_drive_data;this.bytes_expecting=2;break;case 4:this.next_command=this.check_drive_status;this.bytes_expecting=1;break;case 5:case 197:this.next_command=function(a){Zc(this,!0,a)};this.bytes_expecting=8;break;case 230:this.next_command=function(a){Zc(this,
!1,a)};this.bytes_expecting=8;break;case 7:this.next_command=this.calibrate;this.bytes_expecting=1;break;case 8:this.response_index=0;this.response_length=2;this.response_data[0]=32;this.response_data[1]=this.last_cylinder;break;case 74:this.next_command=this.read_sector_id;this.bytes_expecting=1;break;case 15:this.bytes_expecting=2;this.next_command=this.FloppyController_prototype$seek;break;case 14:this.response_data[0]=128,this.response_index=0,this.response_length=1,this.bytes_expecting=0}this.receiving_index=
0}};var Yc=0;h=Gc.prototype;h.port3F2_read=function(){return Yc};h.port3F2_write=function(a){4===(a&4)&&0===(Yc&4)&&this.pic.push_irq(6);Yc=a};h.check_drive_status=function(){this.response_index=0;this.response_length=1;this.response_data[0]=32};h.FloppyController_prototype$seek=function(a){this.last_cylinder=a[1];Yc&8&&this.pic.push_irq(6)};h.calibrate=function(){Yc&8&&this.pic.push_irq(6)};
function Zc(a,b,c){var d=c[2],e=c[1],f=c[3],g=((d+a.number_of_heads*e)*a.FloppyController$sectors_per_track+f-1)*(128<<c[4]);if(b){b=a.dma;var r=a.fda_image,t=a.done.bind(a,c,e,d,f);a=b.channels[2].count;c=b.channels[2].address;g+a>r.byteLength?t(!0):(b.channels[2].address+=a,r.set(g,new Uint8Array(b.memory.buffer,c,a+1),function(){t(!1)}))}else{b=a.dma;var r=a.fda_image,x=a.done.bind(a,c,e,d,f);a=b.channels[2].count+1;var B=b.channels[2].address;if(g+a>r.byteLength)x(!0);else{var K=b.memory;b.channels[2].address+=
a;r.get(g,a,function(a){K.mem8.set(a,B);x(!1)})}}}h.done=function(a,b,c,d,e){e||(d++,d>this.FloppyController$sectors_per_track&&(d=1,c++,c>=this.number_of_heads&&(c=0,a++)),this.last_cylinder=a,this.response_index=0,this.response_length=7,this.response_data[0]=c<<2|32,this.response_data[1]=0,this.response_data[2]=0,this.response_data[3]=a,this.response_data[4]=c,this.response_data[5]=d,this.response_data[6]=b[4],Yc&8&&this.pic.push_irq(6))};h.fix_drive_data=function(){};
h.read_sector_id=function(){this.response_index=0;this.response_length=7;this.response_data[0]=0;this.response_data[1]=0;this.response_data[2]=0;this.response_data[3]=0;this.response_data[4]=0;this.response_data[5]=0;this.response_data[6]=0;Yc&8&&this.pic.push_irq(6)};function vc(a,b){this.mem8=new Uint8Array(a);this.mem16=new Uint16Array(a);this.mem32s=new Int32Array(a);this.buffer=a;this.size=b;this.memory_map_registered=new Uint8Array(262144);this.memory_map_read8=[];this.memory_map_write8=[];this.memory_map_read32=[];this.memory_map_write32=[]}h=vc.prototype;h._state_restore=function(){this.mem8=new Uint8Array(this.buffer);this.mem16=new Uint16Array(this.buffer);this.mem32s=new Int32Array(this.buffer)};
function $c(a,b){var c=a.memory_map_read8[b>>>14];return c(b)|c(b+1)<<8}function ad(a,b,c){a=a.memory_map_write8[b>>>14];a(b,c&255);a(b+1,c>>8&255)}h.read8=function(a){return this.memory_map_registered[a>>>14]?this.memory_map_read8[a>>>14](a):this.mem8[a]};h.read16=function(a){return this.memory_map_registered[a>>>14]?$c(this,a):this.mem8[a]|this.mem8[a+1]<<8};function Eb(a,b){return a.memory_map_registered[b>>>13]?$c(a,b<<1):a.mem16[b]}
function H(a,b){return a.memory_map_registered[b>>>14]?a.memory_map_read32[b>>>14](b):a.mem8[b]|a.mem8[b+1]<<8|a.mem8[b+2]<<16|a.mem8[b+3]<<24}function Fb(a,b){return a.memory_map_registered[b>>>12]?a.memory_map_read32[b<<2>>>14](b<<2):a.mem32s[b]}h.write8=function(a,b){if(this.memory_map_registered[a>>>14])this.memory_map_write8[a>>>14](a,b);else this.mem8[a]=b};h.write16=function(a,b){this.memory_map_registered[a>>>14]?ad(this,a,b):(this.mem8[a]=b,this.mem8[a+1]=b>>8)};
function Bb(a,b,c){a.memory_map_registered[b>>>13]?ad(a,b<<1,c):a.mem16[b]=c}h.write32=function(a,b){if(this.memory_map_registered[a>>>14])this.memory_map_write32[a>>>14](a,b);else this.mem8[a]=b,this.mem8[a+1]=b>>8,this.mem8[a+2]=b>>16,this.mem8[a+3]=b>>24};function Cb(a,b,c){a.memory_map_registered[b>>>12]?(b=b<<2,a.memory_map_write32[b>>>14](b,c)):a.mem32s[b]=c};function Ac(a){this.io=a.io;this.memory=a.memory;this.channels=[{address:0,count:0},{address:0,count:0},{address:0,count:0},{address:0,count:0}];this.lsb_msb_flipflop=0;this.io.register_write(4,this,this.port_write.bind(this,4));this.io.register_write(5,this,this.port_write.bind(this,5));this.io.register_write(10,this,this.portA_write);this.io.register_write(11,this,this.portB_write);this.io.register_write(12,this,this.portC_write);this.io.register_write(129,this,this.port81_write)}h=Ac.prototype;
h.port_write=function(a,b){if(8>a){var c=a>>1;a&1?this.channels[c].count=bd(this,this.channels[c].count,b):this.channels[c].address=bd(this,this.channels[c].address,b)}};h.portA_write=function(){};h.portB_write=function(){};h.portC_write=function(){this.lsb_msb_flipflop=0};h.port81_write=function(a){this.channels[2].address=this.channels[2].address&65535|a<<16};function bd(a,b,c){a.lsb_msb_flipflop^=1;return a.lsb_msb_flipflop?b&-256|c:b&-65281|c<<8};function Ic(a){this.pic=a.devices.pic;this.PIT$next_tick=Date.now();this.counter_next_low=new Uint8Array(4);this.counter_enabled=new Uint8Array(4);this.counter_mode=new Uint8Array(4);this.counter_read_mode=new Uint8Array(4);this.counter_latch=new Uint8Array(4);this.counter_latch_value=new Uint16Array(3);this.counter_reload=new Uint16Array(3);this.counter_current=new Uint16Array(3);var b=this.counter2_out=0;a.io.register_read(97,this,function(){b^=16;return b|this.counter2_out<<5});a.io.register_read(64,
this,function(){return cd(this,0)});a.io.register_read(65,this,function(){return cd(this,1)});a.io.register_read(66,this,function(){return cd(this,2)});a.io.register_write(64,this,function(a){dd(this,0,a)});a.io.register_write(65,this,function(a){dd(this,1,a)});a.io.register_write(66,this,function(a){dd(this,2,a)});a.io.register_write(67,this,this.port43_write)}
Ic.prototype.timer=function(a,b){var c,d,e=1193.1816666*(a-this.PIT$next_tick)>>>0;if(e){this.PIT$next_tick+=e/1193.1816666;if(!b&&this.counter_enabled[0]&&(c=this.counter_current[0]-=e,0>=c))if(this.pic.push_irq(0),d=this.counter_mode[0],0===d)this.counter_enabled[0]=0,this.counter_current[0]=0;else if(3===d||2===d)this.counter_current[0]=this.counter_reload[0]+c%this.counter_reload[0];this.counter_enabled[2]&&(c=this.counter_current[2]-=e,0>=c&&(d=this.counter_mode[2],0===d?(this.counter2_out=1,
this.counter_enabled[2]=0,this.counter_current[2]=0):2===d?(this.counter2_out=1,this.counter_current[2]=this.counter_reload[2]+c%this.counter_reload[2]):3===d&&(this.counter2_out^=1,this.counter_current[2]=this.counter_reload[2]+c%this.counter_reload[2])))}};
function cd(a,b){var c=a.counter_latch[b];if(c)return a.counter_latch[b]--,2===c?a.counter_latch_value[b]&255:a.counter_latch_value[b]>>8;c=a.counter_next_low[b];3===a.counter_mode[b]&&(a.counter_next_low[b]^=1);return c?a.counter_current[b]&255:a.counter_current[b]>>8}
function dd(a,b,c){a.counter_reload[b]=a.counter_next_low[b]?a.counter_reload[b]&-256|c:a.counter_reload[b]&255|c<<8;3===a.counter_read_mode[b]&&a.counter_next_low[b]||(a.counter_reload[b]||(a.counter_reload[b]=65535),a.counter_current[b]=a.counter_reload[b],a.counter_enabled[b]=!0);3===a.counter_read_mode[b]&&(a.counter_next_low[b]^=1)}
Ic.prototype.port43_write=function(a){var b=a>>1&7,c=a>>6&3;a=a>>4&3;3!==c&&(0===a?(this.counter_latch[c]=2,this.counter_latch_value[c]=this.counter_current[c]):(6<=b&&(b&=-5),this.counter_next_low[c]=1===a?0:1,this.counter_mode[c]=b,this.counter_read_mode[c]=a,2===c&&(this.counter2_out=0===b?0:1)))};function Cc(a,b,c){void 0===b?this.VGAScreen$adapter=new gd:this.VGAScreen$adapter=b;this.vga_memory_size=c;this.cursor_address=0;this.cursor_scanline_start=14;this.cursor_scanline_end=15;this.start_address=this.screen_height=this.screen_width=this.max_rows=this.max_cols=0;this.graphical_mode_is_linear=!0;this.do_complete_redraw=this.graphical_mode=!1;this.vga256_palette=new Int32Array(256);this.svga_height=this.svga_width=this.latch3=this.latch2=this.latch1=this.latch0=0;this.text_mode_width=80;
this.plane0;this.plane1;this.plane2;this.plane3;this.svga_memory32=this.svga_memory16=this.svga_memory=this.vga_memory=null;this.svga_enabled=!1;this.svga_offset=this.svga_bpp=0;this.pci_space=[222,16,32,10,7,0,0,0,162,0,0,3,0,0,128,0,8,0,0,224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,1,0,0];this.pci_id=144;this.pci_bars=[{size:this.vga_memory_size}];a.devices.pci.register_device(this);this.stats={is_graphical:!1,res_x:0,res_y:0,bpp:0};this.dac_color_index=
this.index_crtc=0;this.attribute_controller_index=-1;this.dac_map=new Uint8Array(16);this.sequencer_index=-1;this.plane_write_bm=15;this.sequencer_memory_mode=0;this.graphics_index=-1;this.planar_rotate_reg=this.planar_mode=this.plane_read=0;this.planar_bitmap=255;this.max_scan_line=0;this.port_3DA_value=this.miscellaneous_output_register=255;a=a.io;a.register_write(960,this,this.port3C0_write);a.register_read(960,this,this.port3C0_read);a.register_read(961,this,this.port3C1_read);a.register_write(962,
this,this.port3C2_write);a.register_write_consecutive(964,this,this.port3C4_write,this.port3C5_write);a.register_read(964,this,this.port3C4_read);a.register_read(965,this,this.port3C5_read);a.register_write_consecutive(974,this,this.port3CE_write,this.port3CF_write);a.register_read(974,this,this.port3CE_read);a.register_read(975,this,this.port3CF_read);a.register_write(967,this,this.port3C7_write);a.register_write(968,this,this.port3C8_write);a.register_write(969,this,this.port3C9_write);a.register_read(972,
this,this.port3CC_read);a.register_write_consecutive(980,this,this.port3D4_write,this.port3D5_write);a.register_read(981,this,this.port3D5_read);a.register_read(986,this,this.port3DA_read);this.dispi_index=-1;this.dispi_enable_value=0;a.register_write(462,this,void 0,this.port1CE_write);a.register_write(463,this,void 0,this.port1CF_write);a.register_read(463,this,void 0,this.port1CF_read);void 0===this.vga_memory_size||262144>this.vga_memory_size?this.vga_memory_size=262144:this.vga_memory_size&65535&&
(this.vga_memory_size|=65535,this.vga_memory_size++);this.svga_memory=new Uint8Array(this.vga_memory_size);this.svga_memory16=new Uint16Array(this.svga_memory.buffer);this.svga_memory32=new Int32Array(this.svga_memory.buffer);this.vga_memory=new Uint8Array(this.svga_memory.buffer,0,262144);this.plane0=new Uint8Array(this.svga_memory.buffer,0,65536);this.plane1=new Uint8Array(this.svga_memory.buffer,65536,65536);this.plane2=new Uint8Array(this.svga_memory.buffer,131072,65536);this.plane3=new Uint8Array(this.svga_memory.buffer,
196608,65536);this.set_size_text(80,25);this.update_cursor_scanline();var d=this;a.mmap_register(655360,131072,function(a){a-=655360;!d.graphical_mode||d.graphical_mode_is_linear?a=d.vga_memory[a]:(a&=65535,d.latch0=d.plane0[a],d.latch1=d.plane1[a],d.latch2=d.plane2[a],d.latch3=d.plane3[a],a=d.vga_memory[d.plane_read<<16|a]);return a},function(a,b){var c;c=a-655360;if(d.graphical_mode)if(d.graphical_mode_is_linear){var r=c,t=r<<2,x=d.vga256_palette[b];d.VGAScreen$adapter.put_pixel_linear(t|2,x>>16&
255);d.VGAScreen$adapter.put_pixel_linear(t|1,x>>8&255);d.VGAScreen$adapter.put_pixel_linear(t,x&255);d.vga_memory[r]=b}else{if(!(65535<c)){var B,K=d.planar_mode&3;0===K?r=t=x=B=b:2===K&&(d.plane_write_bm&1&&(r=d.latch0&~d.planar_bitmap|(b&1?255:0)&d.planar_bitmap),d.plane_write_bm&2&&(t=d.latch1&~d.planar_bitmap|(b&2?255:0)&d.planar_bitmap),d.plane_write_bm&4&&(x=d.latch2&~d.planar_bitmap|(b&4?255:0)&d.planar_bitmap),d.plane_write_bm&8&&(B=d.latch3&~d.planar_bitmap|(b&8?255:0)&d.planar_bitmap));
if(0===K||2===K){switch(d.planar_rotate_reg&24){case 8:r&=d.latch0;t&=d.latch1;x&=d.latch2;B&=d.latch3;break;case 16:r|=d.latch0;t|=d.latch1;x|=d.latch2;B|=d.latch3;break;case 24:r^=d.latch0,t^=d.latch1,x^=d.latch2,B^=d.latch3}d.plane_write_bm&1&&(r=d.latch0&~d.planar_bitmap|r&d.planar_bitmap);d.plane_write_bm&2&&(t=d.latch1&~d.planar_bitmap|t&d.planar_bitmap);d.plane_write_bm&4&&(x=d.latch2&~d.planar_bitmap|x&d.planar_bitmap);d.plane_write_bm&8&&(B=d.latch3&~d.planar_bitmap|B&d.planar_bitmap)}else 1===
K&&(r=d.latch0,t=d.latch1,x=d.latch2,B=d.latch3);d.plane_write_bm&1?d.plane0[c]=r:r=d.plane0[c];d.plane_write_bm&2?d.plane1[c]=t:t=d.plane1[c];d.plane_write_bm&4?d.plane2[c]=x:x=d.plane2[c];d.plane_write_bm&8?d.plane3[c]=B:B=d.plane3[c];if(!(c>=d.screen_width*d.screen_height<<3))for(t<<=1,x<<=2,B<<=3,c=(c<<3|7)<<2,K=0;8>K;K++){var ja=d.vga256_palette[d.dac_map[r>>K&1|t>>K&2|x>>K&4|B>>K&8]];d.VGAScreen$adapter.put_pixel_linear(c|2,ja>>16);d.VGAScreen$adapter.put_pixel_linear(c|1,ja>>8&255);d.VGAScreen$adapter.put_pixel_linear(c,
ja&255);c-=4}}}else r=c,98304>r||(x=(r-98304>>1)-d.start_address,t=x/d.max_cols|0,x%=d.max_cols,r&1?(c=b,B=d.vga_memory[r&-2]):(B=b,c=d.vga_memory[r|1]),d.VGAScreen$adapter.put_char(t,x,B,d.vga256_palette[c>>4&15],d.vga256_palette[c&15]),d.vga_memory[r]=b)});a.mmap_register(3758096384,this.vga_memory_size,function(a){return d.svga_memory[a&268435455]},function(a,b){hd(d,a,b)},function(a){a&=268435455;return a&3?d.svga_memory[a]|d.svga_memory[a+1]<<8|d.svga_memory[a+2]<<16|d.svga_memory[a+3]<<24:d.svga_memory32[a>>
2]},function(a,b){var c;c=a&268435455;if(c&3||32!==d.svga_bpp)hd(d,c,b&255),hd(d,c+1,b>>8&255),hd(d,c+2,b>>16&255),hd(d,c+3,b>>24&255);else if(d.svga_memory32[c>>2]=b,d.svga_enabled&&(c-=d.svga_offset,!(0>c)))switch(d.svga_bpp){case 32:d.VGAScreen$adapter.put_pixel_linear32(c,b)}})}h=Cc.prototype;
h._state_restore=function(){this.svga_memory16=new Uint16Array(this.svga_memory.buffer);this.svga_memory32=new Int32Array(this.svga_memory.buffer);this.vga_memory=new Uint8Array(this.svga_memory.buffer,0,262144);this.plane0=new Uint8Array(this.svga_memory.buffer,0,65536);this.plane1=new Uint8Array(this.svga_memory.buffer,65536,65536);this.plane2=new Uint8Array(this.svga_memory.buffer,131072,65536);this.plane3=new Uint8Array(this.svga_memory.buffer,196608,65536);this.VGAScreen$adapter.set_mode(this.graphical_mode||
this.svga_enabled);this.graphical_mode||this.svga_enabled?this.set_size_graphical(this.svga_width,this.svga_height):(this.set_size_text(this.max_cols,this.max_rows),this.update_cursor_scanline(),this.update_cursor());this.do_complete_redraw=!0};h.update_cursor=function(){var a=(this.cursor_address-this.start_address)/this.max_cols|0,b=(this.cursor_address-this.start_address)%this.max_cols,a=Math.min(this.max_rows-1,a);this.VGAScreen$adapter.update_cursor(a,b)};
function hd(a,b,c){b&=268435455;a.svga_memory[b]=c;if(a.svga_enabled&&(b-=a.svga_offset,!(0>b)))switch(a.svga_bpp){case 32:3!==(b&3)&&a.VGAScreen$adapter.put_pixel_linear(b,c);break;case 24:a.VGAScreen$adapter.put_pixel_linear((b<<2)/3|0,c);break;case 16:if(b&1){var d=a.svga_memory16[b>>1],e;e=255*(c>>3&31)/31|0;c=255*(d>>5&63)/63|0;d=255*(d&31)/31|0;b<<=1;a.VGAScreen$adapter.put_pixel_linear(b,d);a.VGAScreen$adapter.put_pixel_linear(b-1,c);a.VGAScreen$adapter.put_pixel_linear(b-2,e)}break;case 8:d=
a.vga256_palette[c],b=b<<2,a.VGAScreen$adapter.put_pixel_linear(b,d>>16&255),a.VGAScreen$adapter.put_pixel_linear(b|1,d>>8&255),a.VGAScreen$adapter.put_pixel_linear(b|2,d&255)}}
h.timer=function(){if(this.do_complete_redraw)if(this.do_complete_redraw=!1,this.svga_enabled){var a=this.svga_offset,b=this.svga_height*this.svga_width,c=0;if(32===this.svga_bpp)for(var d=new Int32Array(this.svga_memory.buffer),a=a>>2,b=b<<2;c<b;)this.VGAScreen$adapter.put_pixel_linear32(c,d[a++]),c+=4;else if(24===this.svga_bpp)for(b<<=2;c<b;)this.VGAScreen$adapter.put_pixel_linear(c++,this.svga_memory[a++]),this.VGAScreen$adapter.put_pixel_linear(c++,this.svga_memory[a++]),this.VGAScreen$adapter.put_pixel_linear(c++,
this.svga_memory[a++]),c++}else if(this.graphical_mode){if(!this.graphical_mode_is_linear)for(b=a=0;b<this.screen_height;b++)for(c=0;c<this.screen_width;c+=8){for(d=0;8>d;d++)this.VGAScreen$adapter.put_pixel_linear32(b*this.screen_width+c<<2,this.vga256_palette[this.dac_map[this.plane0[a]>>d&1|this.plane1[a]>>d<<1&2|this.plane2[a]>>d<<2&4|this.plane3[a]>>d<<3&8]]);a++}}else for(a=98304|this.start_address<<1,d=0;d<this.max_rows;d++)for(var e=0;e<this.max_cols;e++)b=this.vga_memory[a],c=this.vga_memory[a|
1],this.VGAScreen$adapter.put_char(d,e,b,this.vga256_palette[c>>4&15],this.vga256_palette[c&15]),a+=2;this.VGAScreen$adapter.timer()};h.destroy=function(){};h.set_size_text=function(a,b){this.max_cols=a;this.max_rows=b;this.VGAScreen$adapter.set_size_text(a,b)};h.set_size_graphical=function(a,b){this.VGAScreen$adapter.set_size_graphical(a,b)};h.update_cursor_scanline=function(){this.VGAScreen$adapter.update_cursor_scanline(this.cursor_scanline_start,this.cursor_scanline_end)};
function id(a,b){var c=!1;switch(b){case 3:a.set_size_text(a.text_mode_width,25);break;case 16:a.screen_width=640;a.screen_height=350;c=!0;a.graphical_mode_is_linear=!1;break;case 18:a.screen_width=640;a.screen_height=480;c=!0;a.graphical_mode_is_linear=!1;break;case 19:a.screen_width=320,a.screen_height=200,c=!0,a.graphical_mode_is_linear=!0}a.VGAScreen$adapter.set_mode(c);if(a.stats.is_graphical=c)a.set_size_graphical(a.screen_width,a.screen_height),a.stats.res_x=a.screen_width,a.stats.res_y=a.screen_height,
a.stats.bpp=8;a.graphical_mode=c}h.port3C0_write=function(a){-1===this.attribute_controller_index?this.attribute_controller_index=a:(16>this.attribute_controller_index&&(this.dac_map[this.attribute_controller_index]=a),this.attribute_controller_index=-1)};h.port3C0_read=function(){var a=this.attribute_controller_index;this.attribute_controller_index=-1;return a};h.port3C1_read=function(){return this.attribute_controller_index=-1};
h.port3C2_write=function(a){this.miscellaneous_output_register=a;103===a?id(this,3):227===a?id(this,18):99===a?id(this,19):163===a?id(this,16):id(this,3)};h.port3C4_write=function(a){this.sequencer_index=a};h.port3C4_read=function(){return this.sequencer_index};h.port3C5_write=function(a){switch(this.sequencer_index){case 2:this.plane_write_bm=a;break;case 4:this.sequencer_memory_mode=a}};
h.port3C5_read=function(){switch(this.sequencer_index){case 2:return this.plane_write_bm;case 4:return this.sequencer_memory_mode;case 6:return 18}return 0};h.port3C7_write=function(){};h.port3C8_write=function(a){this.dac_color_index=3*a};h.port3C9_write=function(a){var b=this.dac_color_index/3|0,c=this.dac_color_index%3,d=this.vga256_palette[b];a=255*a/63&255;this.vga256_palette[b]=0===c?d&-16711681|a<<16:1===c?d&-65281|a<<8:d&-256|a;this.dac_color_index++;this.do_complete_redraw=!0};
h.port3CC_read=function(){return this.miscellaneous_output_register};h.port3CE_write=function(a){this.graphics_index=a};h.port3CE_read=function(){return this.graphics_index};h.port3CF_write=function(a){switch(this.graphics_index){case 3:this.planar_rotate_reg=a;break;case 4:this.plane_read=a;break;case 5:this.planar_mode=a;break;case 8:this.planar_bitmap=a}};
h.port3CF_read=function(){switch(this.graphics_index){case 3:return this.planar_rotate_reg;case 4:return this.plane_read;case 5:return this.planar_mode;case 8:return this.planar_bitmap}return 0};h.port3D4_write=function(a){this.index_crtc=a};
h.port3D5_write=function(a){switch(this.index_crtc){case 2:this.text_mode_width=a;break;case 9:this.max_scan_line=a;7===(a&31)?this.set_size_text(this.text_mode_width,50):this.set_size_text(this.text_mode_width,25);break;case 10:this.cursor_scanline_start=a;this.update_cursor_scanline();break;case 11:this.cursor_scanline_end=a;this.update_cursor_scanline();break;case 12:this.start_address=this.start_address&255|a<<8;this.do_complete_redraw=!0;break;case 13:this.start_address=this.start_address&65280|
a;this.do_complete_redraw=!0;break;case 14:this.cursor_address=this.cursor_address&255|a<<8;this.update_cursor();break;case 15:this.cursor_address=this.cursor_address&65280|a,this.update_cursor()}};h.port3D5_read=function(){return 9===this.index_crtc?this.max_scan_line:10===this.index_crtc?this.cursor_scanline_start:11===this.index_crtc?this.cursor_scanline_end:14===this.index_crtc?this.cursor_address>>8:15===this.index_crtc?this.cursor_address&255:0};
h.port3DA_read=function(){this.port_3DA_value^=8;this.attribute_controller_index=-1;return this.port_3DA_value};h.port1CE_write=function(a){this.dispi_index=a};
h.port1CF_write=function(a){switch(this.dispi_index){case 1:this.svga_width=a;2560<this.svga_width&&(this.svga_width=2560);break;case 2:this.svga_height=a;1600<this.svga_height&&(this.svga_height=1600);break;case 3:this.svga_bpp=a;break;case 4:this.svga_enabled=1===(a&1);this.dispi_enable_value=a;break;case 9:this.svga_offset=this.svga_width*(15===this.svga_bpp?16:this.svga_bpp)/8*a,this.do_complete_redraw=!0}!this.svga_enabled||this.svga_width&&this.svga_height||(this.svga_enabled=!1);this.svga_enabled&&
4===this.dispi_index&&(this.set_size_graphical(this.svga_width,this.svga_height),this.VGAScreen$adapter.set_mode(!0),this.stats.bpp=this.svga_bpp,this.stats.is_graphical=!0,this.stats.res_x=this.svga_width,this.stats.res_y=this.svga_height)};h.port1CF_read=function(){return jd(this,this.dispi_index)};
function jd(a,b){switch(b){case 0:return 45248;case 1:return a.dispi_enable_value&2?2560:a.svga_width;case 2:return a.dispi_enable_value&2?1600:a.svga_height;case 3:return a.dispi_enable_value&2?32:a.svga_bpp;case 4:return a.dispi_enable_value;case 6:return a.svga_width;case 10:return a.vga_memory_size/65536|0}return 255}
function gd(){this.put_pixel_linear=function(){};this.put_pixel_linear32=function(){};this.put_char=function(){};this.set_mode=function(){};this.set_size_graphical=function(){};this.set_size_text=function(){};this.update_cursor=function(){};this.update_cursor_scanline=function(){};this.timer=function(){}};function Dc(a,b,c){this.pic=a.devices.pic;this.cpu=a;this.have_mouse=this.enable_mouse=this.enable_mouse_stream=!1;this.mouse_clicks=this.mouse_delta_y=this.mouse_delta_x=0;this.next_read_resolution=this.next_read_rate=this.next_handle_scan_code_set=this.next_read_led=this.next_read_sample=this.next_is_mouse_command=this.enable_keyboard_stream=this.have_keyboard=!1;this.kbd_buffer=new Rc(32);this.last_port60_byte=0;this.sample_rate=100;this.resolution=4;this.scaling2=!1;this.last_mouse_packet=-1;
this.mouse_buffer=new Rc(32);this.keyboard=b;this.mouse=c;this.keyboard&&(this.have_keyboard=!0,this.keyboard.init(this.kbd_send_code.bind(this)));this.mouse&&(this.have_mouse=!0,this.mouse.init(this.mouse_send_click.bind(this),this.mouse_send_delta.bind(this)));this.command_register=5;this.read_command_register=this.read_output_register=!1;a.io.register_read(96,this,this.port60_read);a.io.register_read(100,this,this.port64_read);a.io.register_write(96,this,this.port60_write);a.io.register_write(100,
this,this.port64_write)}function kd(a){a.command_register&2&&a.pic.push_irq(12)}function ld(a){a.command_register&1&&a.pic.push_irq(1)}h=Dc.prototype;h.kbd_send_code=function(a){this.cpu.running&&this.enable_keyboard_stream&&(this.kbd_buffer.push(a),ld(this))};
h.mouse_send_delta=function(a,b){if(this.cpu.running&&this.have_mouse&&this.enable_mouse&&(this.mouse_delta_x+=a*this.resolution,this.mouse_delta_y+=b*this.resolution,this.enable_mouse_stream)){var c=this.mouse_delta_x|0,d=this.mouse_delta_y|0;!c&&!d||Date.now()-this.last_mouse_packet<1E3/this.sample_rate||(this.mouse_delta_x-=c,this.mouse_delta_y-=d,md(this,c,d))}};
h.mouse_send_click=function(a,b,c){this.have_mouse&&this.enable_mouse&&(this.mouse_clicks=a|c<<1|b<<2,this.enable_mouse_stream&&md(this,0,0))};function md(a,b,c){var d=(0>c)<<5|(0>b)<<4|8|a.mouse_clicks;a.last_mouse_packet=Date.now();a.scaling2&&(b=nd(b),c=nd(c));a.mouse_buffer.push(d);a.mouse_buffer.push(b);a.mouse_buffer.push(c);kd(a)}function nd(a){var b=a>>31;switch(Math.abs(a)){case 0:case 1:case 3:return a;case 2:return b;case 4:return 6*b;case 5:return 9*b;default:return a<<1}}
h.destroy=function(){this.have_keyboard&&this.keyboard.destroy();this.have_mouse&&this.mouse.destroy()};h.port60_read=function(){if(!this.kbd_buffer.length&&!this.mouse_buffer.length)return this.last_port60_byte;(this.kbd_buffer.length&&this.mouse_buffer.length?0!==(this.pic.isr&2):this.kbd_buffer.length)?(this.last_port60_byte=this.kbd_buffer.shift(),1<=this.kbd_buffer.length&&ld(this)):(this.last_port60_byte=this.mouse_buffer.shift(),1<=this.mouse_buffer.length&&kd(this));return this.last_port60_byte};
h.port64_read=function(){var a=16;if(this.mouse_buffer.length||this.kbd_buffer.length)a|=1;this.mouse_buffer.length&&(a|=32);return a};
h.port60_write=function(a){if(this.read_command_register)ld(this),this.command_register=a,this.read_command_register=!1;else if(this.read_output_register)this.read_output_register=!1,this.mouse_buffer.ByteQueue$clear(),this.mouse_buffer.push(a),kd(this);else if(this.next_read_sample)this.next_read_sample=!1,this.mouse_buffer.ByteQueue$clear(),this.mouse_buffer.push(250),this.sample_rate=a,kd(this);else if(this.next_read_resolution)this.next_read_resolution=!1,this.mouse_buffer.ByteQueue$clear(),this.mouse_buffer.push(250),
this.resolution=3<a?4:1<<a,kd(this);else if(this.next_read_led)this.next_read_led=!1,this.kbd_buffer.push(250),ld(this);else if(this.next_handle_scan_code_set)this.next_handle_scan_code_set=!1,this.kbd_buffer.push(250),ld(this),a||this.kbd_buffer.push(2);else if(this.next_read_rate)this.next_read_rate=!1,this.kbd_buffer.push(250),ld(this);else if(this.next_is_mouse_command){if(this.next_is_mouse_command=!1,this.have_mouse){this.kbd_buffer.ByteQueue$clear();this.mouse_buffer.ByteQueue$clear();this.mouse_buffer.push(250);
switch(a){case 230:this.scaling2=!1;break;case 231:this.scaling2=!0;break;case 232:this.next_read_resolution=!0;break;case 233:md(this,0,0);break;case 242:this.mouse_buffer.push(0);this.mouse_buffer.push(0);this.mouse_clicks=this.mouse_delta_x=this.mouse_delta_y=0;break;case 243:this.next_read_sample=!0;break;case 244:this.enable_mouse=this.enable_mouse_stream=!0;this.mouse.enabled=!0;this.mouse_clicks=this.mouse_delta_x=this.mouse_delta_y=0;break;case 245:this.enable_mouse_stream=!1;break;case 246:this.enable_mouse_stream=
!1;this.sample_rate=100;this.scaling2=!1;this.resolution=4;break;case 255:this.mouse_buffer.push(170),this.mouse_buffer.push(0),this.enable_mouse_stream=!1,this.sample_rate=100,this.scaling2=!1,this.resolution=4,this.mouse_clicks=this.mouse_delta_x=this.mouse_delta_y=0}kd(this)}}else{this.mouse_buffer.ByteQueue$clear();this.kbd_buffer.ByteQueue$clear();this.kbd_buffer.push(250);switch(a){case 237:this.next_read_led=!0;break;case 240:this.next_handle_scan_code_set=!0;break;case 242:this.kbd_buffer.push(171);
this.kbd_buffer.push(83);break;case 243:this.next_read_rate=!0;break;case 244:this.enable_keyboard_stream=!0;break;case 245:this.enable_keyboard_stream=!1;break;case 255:this.kbd_buffer.ByteQueue$clear(),this.kbd_buffer.push(250),this.kbd_buffer.push(170)}ld(this)}};
h.port64_write=function(a){switch(a){case 32:this.kbd_buffer.ByteQueue$clear();this.mouse_buffer.ByteQueue$clear();this.kbd_buffer.push(this.command_register);break;case 96:this.read_command_register=!0;break;case 211:this.read_output_register=!0;break;case 212:this.next_is_mouse_command=!0;break;case 167:this.command_register|=32;break;case 168:this.command_register&=-33;break;case 169:this.kbd_buffer.ByteQueue$clear();this.mouse_buffer.ByteQueue$clear();this.kbd_buffer.push(0);break;case 170:this.kbd_buffer.ByteQueue$clear();
this.mouse_buffer.ByteQueue$clear();this.kbd_buffer.push(85);break;case 171:this.kbd_buffer.ByteQueue$clear();this.mouse_buffer.ByteQueue$clear();this.kbd_buffer.push(0);break;case 173:this.command_register|=16;break;case 174:this.command_register&=-17;break;case 254:throw a=this.cpu,a.devices.ps2.destroy(),a.devices.vga.destroy(),a.init(a.current_settings),233495534;}};function xc(a,b){this.irr=this.isr=this.irq_map=this.irq_mask=0;this.is_master=void 0===b;this.slave=void 0;this.expect_icw4=!1;this.state=0;this.auto_eoi=this.read_irr=1;this.is_master?(this.slave=new xc(a,this),this.check_irqs=function(){var b=this.irr&this.irq_mask;if(!b)return this.slave.check_irqs();b&=-b;if(this.isr&&(this.isr&-this.isr)<=b)return!1;var c=Oc[b],b=1<<c;this.irr&=~b;if(4===b)return this.slave.check_irqs();this.auto_eoi||(this.isr|=b);a.previous_ip=a.instruction_pointer;Vb(a,this.irq_map|
c,!1,!1);return!0}):this.check_irqs=function(){var c=this.irr&this.irq_mask;if(!c)return!1;c&=-c;if(this.isr&&(this.isr&-this.isr)<=c)return!1;var e=Oc[c],c=1<<e;this.irr&=~c;this.isr|=c;a.previous_ip=a.instruction_pointer;Vb(a,this.irq_map|e,!1,!1);this.irr&&b.push_irq(2);this.auto_eoi||(this.isr&=~c);return!0};this.dump=function(){this.is_master&&this.slave.dump()};var c;c=this.is_master?32:160;a.io.register_write(c,this,function(a){if(a&16)this.expect_icw4=a&1,this.state=1;else if(a&8)this.read_irr=
a&1;else{var b=a>>5;1===b?this.isr&=this.isr-1:3===b&&(this.isr&=~(1<<(a&7)))}});a.io.register_read(c,this,function(){return this.read_irr?this.irr:this.isr});a.io.register_write(c|1,this,function(a){0===this.state?this.expect_icw4?(this.expect_icw4=!1,this.auto_eoi=a&2):this.irq_mask=~a:1===this.state?(this.irq_map=a,this.state++):2===this.state&&(this.state=0)});a.io.register_read(c|1,this,function(){return~this.irq_mask&255});this.push_irq=this.is_master?function(b){8<=b&&(this.slave.push_irq(b-
8),b=2);this.irr|=1<<b;Rb(a)}:function(a){this.irr|=1<<a}};function Jc(a,b,c){this.cpu=a;this.pic=a.devices.pic;this.cmos_index=0;this.boot_order=c;this.diskette_type=b;this.last_update=this.rtc_time=Date.now();this.next_interrupt=0;this.cmos_c_was_read=!0;this.periodic_interrupt=!1;this.periodic_interrupt_time=0.9765625;this.cmos_a=38;this.cmos_b=2;this.cmos_c=0;a.io.register_write(112,this,function(a){this.cmos_index=a&127});a.io.register_write(113,this,this.cmos_write);a.io.register_read(113,this,this.cmos_read)}
Jc.prototype.timer=function(a){this.periodic_interrupt&&this.cmos_c_was_read&&this.next_interrupt<a&&(this.cmos_c_was_read=!1,this.pic.push_irq(8),this.cmos_c|=64,this.next_interrupt+=this.periodic_interrupt_time*Math.ceil((a-this.next_interrupt)/this.periodic_interrupt_time));this.rtc_time+=a-this.last_update;this.last_update=a};function od(a,b){var c;if(a.cmos_b&4)c=b;else{c=b;for(var d=0,e=0,f;c;)f=c%10,e|=f<<4*d,d++,c=(c-f)/10;c=e}return c}
Jc.prototype.cmos_read=function(){switch(this.cmos_index){case 0:return od(this,(new Date(this.rtc_time)).getUTCSeconds());case 2:return od(this,(new Date(this.rtc_time)).getUTCMinutes());case 4:return od(this,(new Date(this.rtc_time)).getUTCHours());case 7:return od(this,(new Date(this.rtc_time)).getUTCDate());case 8:return od(this,(new Date(this.rtc_time)).getUTCMonth()+1);case 9:return od(this,(new Date(this.rtc_time)).getUTCFullYear()%100);case 10:return this.cmos_a;case 11:return this.cmos_b;
case 14:return 0;case 12:return this.cmos_c_was_read=!0,this.cmos_c;case 15:return 0;case 16:return this.diskette_type;case 20:return 45;case 50:return od(this,(new Date(this.rtc_time)).getUTCFullYear()/100|0);case 52:return this.cpu.memory_size-16777216>>16&255;case 53:return this.cpu.memory_size-16777216>>24&255;case 56:return 1|this.boot_order>>4&240;case 61:return this.boot_order&255;case 91:case 92:case 93:return 0}return 255};
Jc.prototype.cmos_write=function(a){switch(this.cmos_index){case 10:this.cmos_a=a&127;this.periodic_interrupt_time=1E3/(32768>>(this.cmos_a&15)-1);break;case 11:this.cmos_b=a,this.cmos_b&64&&(this.next_interrupt=Date.now())}this.periodic_interrupt=64===(this.cmos_b&64)&&0<(this.cmos_a&15)};function Fc(a,b,c){this.pic=a.devices.pic;this.line="";this.interrupt_enable=this.line_control=this.baud_rate=0;this.iir=1;this.UART$irq=this.scratch_register=this.modem_status=this.modem_control=0;this.input=new Rc(4096);if(1E3===b||1016===b)this.UART$irq=4;else if(1E3===b||1E3===b)this.UART$irq=3;else return;c.init(function(a){this.input.push(a);this.interrupt_enable&1&&this.push_irq()}.bind(this));a=a.io;a.register_write(b,this,function(a){this.line_control&128?this.baud_rate=this.baud_rate&-256|
a:255!==a&&c&&(c.put_line?this.line=10===a?"":this.line+String.fromCharCode(a):c.put_str(String.fromCharCode(a)))});a.register_write(b|1,this,function(a){this.line_control&128?this.baud_rate=this.baud_rate&255|a<<8:this.interrupt_enable=a});a.register_read(b,this,function(){return this.line_control&128?this.baud_rate&255:this.input.shift()});a.register_read(b|1,this,function(){return this.line_control&128?this.baud_rate>>8:this.interrupt_enable});a.register_read(b|2,this,function(){var a=this.iir;
this.iir^=1;return a});a.register_write(b|2,this,function(){});a.register_read(b|3,this,function(){return this.line_control});a.register_write(b|3,this,function(a){this.line_control=a});a.register_read(b|4,this,function(){return this.modem_control});a.register_write(b|4,this,function(a){this.modem_control=a});a.register_read(b|5,this,function(){var a=0;this.input.length&&(a|=1);return a|96});a.register_write(b|5,this,function(){});a.register_read(b|6,this,function(){return this.modem_status});a.register_write(b|
6,this,function(){});a.register_read(b|7,this,function(){return this.scratch_register});a.register_write(b|7,this,function(a){this.scratch_register=a})}Fc.prototype.push_irq=function(){this.pic.push_irq(this.UART$irq)};function Bc(){};function ia(a){this.message=a}ia.prototype=Error();
function ka(a,b,c){if("object"!==typeof b||b instanceof Array||null===b)return b;var d=b.__state_type__;if(void 0===d){for(var d=Object.keys(b),e=0;e<d.length;e++){var f=d[e];a[f]=ka(a[f],b[f],c)}a._state_restore&&a._state_restore();return a}if("ArrayBuffer"===d)return b=c.infos[b.buffer_id],(new Uint8Array(a)).set(new Uint8Array(c.full,b.offset,b.length)),a;d={Uint8Array:Uint8Array,Int8Array:Int8Array,Uint16Array:Uint16Array,Int16Array:Int16Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Float32Array:Float32Array,
Float64Array:Float64Array}[d];b=c.infos[b.buffer_id];if(a&&0===a.byteOffset&&a.constructor===d&&a.byteLength===b.length)return(new Uint8Array(a.buffer)).set(new Uint8Array(c.full,b.offset,b.length)),a;a=c.full.slice(b.offset,b.offset+b.length);return new d(a)};function Kc(a,b){this.pic=a.devices.pic;this.Ne2k$adapter=b;b.init(this.receive.bind(this));this.pci_space=[236,16,41,128,3,1,0,0,0,0,0,2,0,0,0,0,1,184,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,244,26,0,17,0,0,184,254,0,0,0,0,0,0,0,0,11,1,0,0];this.pci_id=40;this.pci_bars=[{size:131072}];a.devices.pci.register_device(this);this.imr=this.isr=0;this.cr=1;this.rcnt=0;this.remote_buffer=new Uint8Array(0);this.remote_pointer=0;this.receive_buffer=new Uint8Array(32768);this.receive_buffer[0]=
0;this.receive_buffer[1]=34;this.receive_buffer[2]=21;this.receive_buffer[3]=255*Math.random()|0;this.receive_buffer[4]=255*Math.random()|0;this.receive_buffer[5]=255*Math.random()|0;this.rsar=0;this.boundary=this.curpg=76;var c=a.io;c.register_read(47104,this,function(){return this.cr});c.register_write(47104,this,function(a){this.cr=a|this.cr&4;this.remote_pointer=0;this.rcnt>this.remote_buffer.length&&(this.remote_buffer=new Uint8Array(this.rcnt))});c.register_read(47117,this,function(){return 0});
c.register_read(47118,this,function(){return 0});c.register_read(47119,this,function(){return 0});c.register_read(47135,this,function(){if(0===(this.cr&192))return pd(this,128),0});c.register_write(47135,this,function(){});c.register_read(47111,this,function(){return 0===(this.cr&192)?this.isr:this.curpg});c.register_write(47111,this,function(a){0===(this.cr&192)?this.isr&=~a:this.curpg=a});c.register_write(47117,this,function(){});c.register_write(47118,this,function(){});c.register_write(47114,
this,function(a){0===(this.cr&192)&&(this.rcnt=this.rcnt&65280|a&255)});c.register_write(47115,this,function(a){0===(this.cr&192)&&(this.rcnt=this.rcnt&255|a<<8&65280)});c.register_write(47112,this,function(a){0===(this.cr&192)&&(this.rsar=this.rsar&65280|a&255)});c.register_write(47113,this,function(a){0===(this.cr&192)&&(this.rsar=this.rsar&255|a<<8&65280)});c.register_write(47119,this,function(a){0===(this.cr&192)&&(this.imr=a)});c.register_read(47107,this,function(){return 0===(this.cr&192)?this.boundary:
0});c.register_write(47107,this,function(a){0===(this.cr&192)&&(this.boundary=a)});c.register_read(47108,this,function(){return 0===(this.cr&192)?35:0});c.register_read(47116,this,function(){return 0===(this.cr&192)?9:0});c.register_read(47120,this,this.data_port_read,this.data_port_read16,this.data_port_read32);c.register_write(47120,this,this.data_port_write,this.data_port_write16,this.data_port_write32)}function pd(a,b){a.isr|=b;a.imr&b&&a.pic.push_irq(11)}h=Kc.prototype;
h.data_port_write=function(a){this.remote_buffer[this.remote_pointer++]=a;this.remote_pointer===this.rcnt&&(a=this.remote_buffer.subarray(0,this.rcnt),[].slice.call(a),pd(this,64),this.cr&=-5,this.Ne2k$adapter.send(a),pd(this,2))};h.data_port_write16=function(a){this.data_port_write(a);this.data_port_write(a>>8)};h.data_port_write32=function(a){this.data_port_write(a);this.data_port_write(a>>8);this.data_port_write(a>>16);this.data_port_write(a>>24)};h.data_port_read=function(){return this.receive_buffer[this.rsar++]};
h.data_port_read16=function(){return this.data_port_read()|this.data_port_read()<<8};h.data_port_read32=function(){return this.data_port_read()|this.data_port_read()<<8|this.data_port_read()<<16|this.data_port_read()<<24};
h.receive=function(a){if(!(this.cr&1)){if(60>a.length){var b=a;a=new Uint8Array(60);a.set(b)}var b=this.curpg<<8,c=a.length+4,d=b+4,e=this.curpg+1+(c>>8);if(b+c>this.receive_buffer.length){var f=this.receive_buffer.length-d;this.receive_buffer.set(a.subarray(0,f),d);this.receive_buffer.set(a.subarray(f),76)}else this.receive_buffer.set(a,d);128<=e&&(e+=-52);this.receive_buffer[b]=1;this.receive_buffer[b+1]=e;this.receive_buffer[b+2]=c;this.receive_buffer[b+3]=c>>8;this.curpg=e;pd(this,1)}};window.requestAnimationFrame||(window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame);
function pa(){var a=k("screen_container");function b(a){a=a.toString(16);return"#"+Array(7-a.length).join("0")+a}function c(){ub=!0;for(var a=0;a<uc;a++)Ua[a]&&(rd.text_update_row(a),Ua[a]=0)}function d(){ub=!0;ma<ya&&(g.putImageData(x,0,0,0,ma/Da>>2,Da,((ya-ma)/Da>>2)+1),ma=1E7,ya=0)}function e(a,b,c){b=""+(1===b?"":" scaleX("+b+")")+(1===c?"":" scaleY("+c+")");a.style.webkitTransform=a.style.MozTransform=b}console.assert(a,"1st argument must be a DOM container");for(var f=a.getElementsByTagName("canvas")[0],
g=f.getContext("2d"),r=f.nextElementSibling||f.previousElementSibling,t=document.createElement("div"),x,B,K,ja,va,aa=1,la=1,Da,ma=0,ya=0,Ua,ub=!0,yc=!1,Ca,gb,uc,rd=this,a=new Uint16Array([199,252,233,226,228,224,229,231,234,235,232,239,238,236,196,197,201,230,198,244,246,242,251,249,255,214,220,162,163,165,8359,402,225,237,243,250,241,209,170,186,191,8976,172,189,188,161,171,187,9617,9618,9619,9474,9508,9569,9570,9558,9557,9571,9553,9559,9565,9564,9563,9488,9492,9524,9516,9500,9472,9532,9566,9567,
9562,9556,9577,9574,9568,9552,9580,9575,9576,9572,9573,9561,9560,9554,9555,9579,9578,9496,9484,9608,9604,9612,9616,9600,945,223,915,960,931,963,181,964,934,920,937,948,8734,966,949,8745,8801,177,8805,8804,8992,8993,247,8776,176,8729,183,8730,8319,178,9632,160]),sd=new Uint16Array([32,9786,9787,9829,9830,9827,9824,8226,9688,9675,9689,9794,9792,9834,9835,9788,9658,9668,8597,8252,182,167,9644,8616,8593,8595,8594,8592,8735,8596,9650,9660]),ed=[],fd,Ja=0;256>Ja;Ja++)fd=127<Ja?a[Ja-128]:32>Ja?sd[Ja]:Ja,
ed[Ja]=String.fromCharCode(fd);g.imageSmoothingEnabled=!1;g.mozImageSmoothingEnabled=!1;g.webkitImageSmoothingEnabled=!1;t.style.position="absolute";t.style.backgroundColor="#ccc";t.style.width="7px";t.style.display="inline-block";r.style.display="block";r.style.backgroundColor="#000";f.style.display="none";this.init=function(){this.set_size_text(80,25)};this.make_screenshot=function(){try{window.open(f.toDataURL())}catch(a){}};this.put_char=function(a,b,c,d,e){a<uc&&b<gb&&(b=3*(a*gb+b),Ca[b]=c,Ca[b+
1]=d,Ca[b+2]=e,Ua[a]=1)};this.timer=function(){ub&&(ub=!1,requestAnimationFrame(yc?d:c))};this.put_pixel_linear=function(a,b){a>=B.length||(ma=a<ma?a:ma,ya=a>ya?a:ya,B[a+1^3]=b)};this.put_pixel_linear32=function(a,b){ma=a<ma?a:ma;ya=a>ya?a:ya;K[a>>2]=4278190080|b>>16&255|b<<16|b&65280};this.destroy=function(){};this.set_mode=function(a){(yc=a)?(r.style.display="none",f.style.display="block"):(r.style.display="block",f.style.display="none")};this.set_size_text=function(a,b){Ua=new Int8Array(b);Ca=
new Int32Array(a*b*3);gb=a;for(uc=b;r.childNodes.length>b;)r.removeChild(r.firstChild);for(;r.childNodes.length<b;)r.appendChild(document.createElement("div"));for(var c=0;c<b;c++)this.text_update_row(c)};this.set_size_graphical=function(a,b){f.style.display="block";f.width=a;f.height=b;x=g.createImageData(a,b);B=new Uint8Array(x.data.buffer);K=new Int32Array(x.data.buffer);for(var c=3;c<B.length;c+=4)B[c]=255;Da=a};this.set_scale=function(a,b){aa=a;la=b;e(f,aa,la);e(r,aa,la)};this.set_scale(aa,la);
this.update_cursor_scanline=function(a,b){a&32?t.style.display="none":(t.style.display="inline",t.style.height=Math.min(15,b-a)+"px",t.style.marginTop=Math.min(15,a)+"px")};this.update_cursor=function(a,b){if(a!==ja||b!==va)Ua[a]=1,Ua[ja]=1,ja=a,va=b};this.text_update_row=function(a){var c=3*a*gb,d,e,f,g,x,B;d=r.childNodes[a];for(f=document.createDocumentFragment();d.firstChild;)d.removeChild(d.firstChild);for(var aa=0;aa<gb;){e=document.createElement("span");g=Ca[c+1];x=Ca[c+2];e.style.backgroundColor=
b(g);e.style.color=b(x);for(B="";aa<gb&&Ca[c+1]===g&&Ca[c+2]===x;)if(B+=ed[Ca[c]],aa++,c+=3,a===ja)if(aa===va)break;else if(aa===va+1){f.appendChild(t);break}e.textContent=B;f.appendChild(e)}d.appendChild(f)};this.init()};function qa(){function a(a){return a.shiftKey&&a.ctrlKey&&74===a.keyCode||116===a.keyCode||!g.enabled?!1:a.target?"phone_keyboard"===a.target.className||"INPUT"!==a.target.nodeName&&"TEXTAREA"!==a.target.nodeName:!0}function b(b){if(a(b)){var c=b.keyCode;if(!f[c])return!1;f[c]=!1;e(c,!1)||b.preventDefault()}}function c(b){if(a(b)){var c=b.keyCode;f[c]&&e(c,!1);f[c]=!0;e(c,!0)||b.preventDefault()}}function d(){for(var a=Object.keys(f),b,c=0;c<a.length;c++)b=+a[c],f[b]&&e(b,!1);f={}}function e(a,b){if(a>=
t.length||0===t[a])return console.log("Missing char in map: "+a.toString(16)),!0;var c=t[a];b||(c|=128);255<c?(r(c>>8),r(c&255)):r(c);return!1}var f={},g=this,r;this.enabled=!0;var t=new Uint16Array([0,0,0,0,0,0,0,0,14,15,0,0,0,28,0,0,42,29,56,0,58,0,0,0,0,0,0,1,0,0,0,0,57,57417,57425,57423,57415,57419,57416,57421,80,0,0,0,0,82,83,0,11,2,3,4,5,6,7,8,9,10,0,39,0,13,0,0,0,30,48,46,32,18,33,34,35,23,36,37,38,50,49,24,25,16,19,31,20,22,47,17,45,21,44,0,0,0,0,0,82,79,80,81,75,76,77,71,72,73,0,0,0,0,0,
0,59,60,61,62,63,64,65,66,67,68,87,88,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,69,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,39,13,51,12,52,53,41,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,26,43,27,40,0]);this.init=function(a){this.destroy();r=a;window.addEventListener("keyup",b,!1);window.addEventListener("keydown",c,!1);window.addEventListener("blur",d,!1)};this.destroy=function(){window.removeEventListener("keyup",b,!1);window.removeEventListener("keydown",
c,!1);window.removeEventListener("blur",d,!1)}};function ra(){function a(a){return K.enabled&&(!a.target||"mousemove"===a.type||"INPUT"!==a.target.nodeName&&"TEXTAREA"!==a.target.nodeName)}function b(b){if(a(b)){var c,d;c=b.webkitMovementX||b.mozMovementX||0;d=b.webkitMovementY||b.mozMovementY||0;console.log([c,-d]);c=0.3*c;d=0.3*d;console.log("init");var e;e=this;var f=curtop=0;if(e.offsetParent){do f+=e.offsetLeft,curtop+=e.offsetTop;while(e=e.offsetParent)}e=[f,curtop];b=[b.pageX-e[0],b.pageY-e[1]];e=[b[0]-va[0],-(b[1]-va[1])];va=b;console.log(e);
B(c,-d)}}function c(b){a(b)&&b.preventDefault()}function d(b){a(b)&&f(b,!0)}function e(b){a(b)&&f(b,!1)}function f(a,b){1===a.which?g=b:2===a.which?t=b:3===a.which?r=b:console.log("Unknown event.which: "+a.which);x(g,t,r);a.preventDefault()}var g=!1,r=!1,t=!1,x,B,K=this,ja=document.getElementById("vga");console.log(ja);this.enabled=!1;this.destroy=function(){window.removeEventListener("mousemove",b,!1);document.removeEventListener("contextmenu",c,!1);window.removeEventListener("mousedown",d,!1);window.removeEventListener("mouseup",
e,!1)};this.init=function(a,f){this.destroy();x=a;B=f;console.log("init2");ja.addEventListener("mousemove",b,!1);document.addEventListener("contextmenu",c,!1);window.addEventListener("mousedown",d,!1);window.addEventListener("mouseup",e,!1)};var va=[0,0]};function na(a,b,c,d){var e=new XMLHttpRequest;e.open("get",a,!0);e.responseType="arraybuffer";if(d)for(var f=Object.keys(d),g=0;g<f.length;g++){var r=f[g];e.setRequestHeader(r,d[r])}e.onload=function(){4===e.readyState&&(200!==e.status&&206!==e.status?console.log("Loading the image `"+a+"` failed"):e.response&&b(e.response))};c&&(e.onprogress=function(a){c(a)});e.send(null)}
function qd(a,b,c){console.assert(a+b.length<=this.byteLength);var d=b.length;console.assert(0===a%this.block_size);console.assert(0===d%this.block_size);console.assert(d);a=a/this.block_size;for(var d=d/this.block_size,e=0;e<d;e++){var f=this.loaded_blocks[a+e];void 0===f&&(f=this.loaded_blocks[a+e]=new Uint8Array(this.block_size));var g=b.subarray(e*this.block_size,(e+1)*this.block_size);f.set(g);console.assert(f.byteLength===g.length)}c()}
function fa(a,b,c){this.AsyncXHRBuffer$filename=a;this.block_size=b;this.AsyncXHRBuffer$block_count=c/b;console.assert(this.AsyncXHRBuffer$block_count===(this.AsyncXHRBuffer$block_count|0));this.loaded_blocks={};this.byteLength=c;this.get_buffer=function(){}}
fa.prototype.get=function(a,b,c){console.assert(0===a%this.block_size);console.assert(0===b%this.block_size);console.assert(b);na(this.AsyncXHRBuffer$filename,function(d){d=new Uint8Array(d);this.handle_read(a,b,d);c(d)}.bind(this),null,{Range:"bytes="+a+"-"+(a+b-1)})};fa.prototype.set=qd;fa.prototype.handle_read=function(a,b,c){a=a/this.block_size;b=b/this.block_size;for(var d=0;d<b;d++){var e=this.loaded_blocks[a+d];e&&c.set(e,d*this.block_size)}};
function da(a){var b=4194304,c=!1,d=this;this.byteLength=a.size;1073741824<a.size&&console.log("Warning: Allocating buffer of "+(a.size>>20)+" MB ...");var e=new ArrayBuffer(a.size),f=0,g=new FileReader;this.AsyncFileBuffer$load=function(){function r(){if(d.onprogress)d.onprogress({loaded:f,total:a.size,lengthComputable:!0});if(f<a.size)g.readAsArrayBuffer(a.slice(f,Math.min(f+b,a.size)));else if(c=!0,d.onload)d.onload({})}g.onload=function(a){(new Uint8Array(e,f)).set(new Uint8Array(a.target.result));
f+=b;r()};r()};this.get=function(a,b,d){if(c)console.assert(a+b<=e.byteLength),d(new Uint8Array(e,a,b));else throw"SyncFileBuffer: Wait for ready";};this.get_buffer=function(a){if(c)a(e);else throw"SyncFileBuffer: Wait for ready";};this.set=function(a,b,d){if(c)console.assert(a+b.byteLength<=e.byteLength),(new Uint8Array(e,a,b.byteLength)).set(b),d();else throw"SyncFileBuffer: Wait for ready";}}
function ea(a){this.file=a;this.byteLength=a.size;this.block_size=512;this.loaded_blocks={};this.get_buffer=function(){};this.AsyncFileBuffer$load=function(){this.onload&&this.onload({})}}ea.prototype.get=function(a,b,c){console.assert(0===a%this.block_size);console.assert(0===b%this.block_size);console.assert(b);var d=new FileReader;d.onload=function(d){d=new Uint8Array(d.target.result);this.handle_read(a,b,d);c(d)}.bind(this);d.readAsArrayBuffer(this.file.slice(a,a+b))};ea.prototype.set=qd;
ea.prototype.handle_read=fa.prototype.handle_read;
//# sourceMappingURL=build/v86_all.js.map
